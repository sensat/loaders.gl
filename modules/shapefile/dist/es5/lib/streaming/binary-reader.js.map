{"version":3,"file":"binary-reader.js","names":["BinaryReader","arrayBuffer","_classCallCheck2","default","_defineProperty2","offset","_createClass2","key","value","hasAvailableBytes","bytes","byteLength","getDataView","Error","dataView","DataView","skip","rewind","exports"],"sources":["../../../../src/lib/streaming/binary-reader.ts"],"sourcesContent":["export default class BinaryReader {\n  offset: number;\n  arrayBuffer: ArrayBuffer;\n\n  constructor(arrayBuffer: ArrayBuffer) {\n    /** current global (stream) offset */\n    this.offset = 0;\n    /** current buffer from iterator */\n    this.arrayBuffer = arrayBuffer;\n  }\n  /**\n   * Checks if there are available bytes in data\n   *\n   * @param bytes\n   * @returns boolean\n   */\n  hasAvailableBytes(bytes: number): boolean {\n    return this.arrayBuffer.byteLength - this.offset >= bytes;\n  }\n\n  /**\n   * Get the required number of bytes from the iterator\n   *\n   * @param bytes\n   * @returns Dataview\n   */\n  getDataView(bytes: number): DataView {\n    if (bytes && !this.hasAvailableBytes(bytes)) {\n      throw new Error('binary data exhausted');\n    }\n\n    const dataView = bytes\n      ? new DataView(this.arrayBuffer, this.offset, bytes)\n      : new DataView(this.arrayBuffer, this.offset);\n    this.offset += bytes;\n    return dataView;\n  }\n\n  /**\n   * Skipping\n   *\n   * @param bytes\n   */\n  skip(bytes: number): void {\n    this.offset += bytes;\n  }\n\n  /**\n   * Rewinding\n   *\n   * @param bytes\n   */\n  rewind(bytes: number): void {\n    this.offset -= bytes;\n  }\n}\n"],"mappings":";;;;;;;;;;IAAqBA,YAAY;EAI/B,SAAAA,aAAYC,WAAwB,EAAE;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAH,YAAA;IAAA,IAAAI,gBAAA,CAAAD,OAAA;IAAA,IAAAC,gBAAA,CAAAD,OAAA;IAEpC,IAAI,CAACE,MAAM,GAAG,CAAC;IAEf,IAAI,CAACJ,WAAW,GAAGA,WAAW;EAChC;EAAC,IAAAK,aAAA,CAAAH,OAAA,EAAAH,YAAA;IAAAO,GAAA;IAAAC,KAAA,EAOD,SAAAC,kBAAkBC,KAAa,EAAW;MACxC,OAAO,IAAI,CAACT,WAAW,CAACU,UAAU,GAAG,IAAI,CAACN,MAAM,IAAIK,KAAK;IAC3D;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAQD,SAAAI,YAAYF,KAAa,EAAY;MACnC,IAAIA,KAAK,IAAI,CAAC,IAAI,CAACD,iBAAiB,CAACC,KAAK,CAAC,EAAE;QAC3C,MAAM,IAAIG,KAAK,CAAC,uBAAuB,CAAC;MAC1C;MAEA,IAAMC,QAAQ,GAAGJ,KAAK,GAClB,IAAIK,QAAQ,CAAC,IAAI,CAACd,WAAW,EAAE,IAAI,CAACI,MAAM,EAAEK,KAAK,CAAC,GAClD,IAAIK,QAAQ,CAAC,IAAI,CAACd,WAAW,EAAE,IAAI,CAACI,MAAM,CAAC;MAC/C,IAAI,CAACA,MAAM,IAAIK,KAAK;MACpB,OAAOI,QAAQ;IACjB;EAAC;IAAAP,GAAA;IAAAC,KAAA,EAOD,SAAAQ,KAAKN,KAAa,EAAQ;MACxB,IAAI,CAACL,MAAM,IAAIK,KAAK;IACtB;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAOD,SAAAS,OAAOP,KAAa,EAAQ;MAC1B,IAAI,CAACL,MAAM,IAAIK,KAAK;IACtB;EAAC;EAAA,OAAAV,YAAA;AAAA;AAAAkB,OAAA,CAAAf,OAAA,GAAAH,YAAA"}