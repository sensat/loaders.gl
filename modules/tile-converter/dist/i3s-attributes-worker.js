var ji=Object.create;var Lr=Object.defineProperty;var es=Object.getOwnPropertyDescriptor;var rs=Object.getOwnPropertyNames,Mn=Object.getOwnPropertySymbols,ts=Object.getPrototypeOf,bn=Object.prototype.hasOwnProperty,ns=Object.prototype.propertyIsEnumerable;var xn=(e,r,n)=>r in e?Lr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Ir=(e,r)=>{for(var n in r||(r={}))bn.call(r,n)&&xn(e,n,r[n]);if(Mn)for(var n of Mn(r))ns.call(r,n)&&xn(e,n,r[n]);return e};var as=e=>Lr(e,"__esModule",{value:!0});var A=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var is=(e,r,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of rs(r))!bn.call(e,a)&&a!=="default"&&Lr(e,a,{get:()=>r[a],enumerable:!(n=es(r,a))||n.enumerable});return e},At=e=>is(as(Lr(e!=null?ji(ts(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var X=A((X1,cr)=>{function cs(e){return e&&e.__esModule?e:{default:e}}cr.exports=cs,cr.exports.__esModule=!0,cr.exports.default=cr.exports});var j=A((G1,Me)=>{function qt(e){return Me.exports=qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Me.exports.__esModule=!0,Me.exports.default=Me.exports,qt(e)}Me.exports=qt,Me.exports.__esModule=!0,Me.exports.default=Me.exports});var $=A((Z1,lr)=>{function ls(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}lr.exports=ls,lr.exports.__esModule=!0,lr.exports.default=lr.exports});var Tn=A((Q1,fr)=>{var kn=j().default;function fs(e,r){if(kn(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r||"default");if(kn(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}fr.exports=fs,fr.exports.__esModule=!0,fr.exports.default=fr.exports});var Et=A(($1,hr)=>{var hs=j().default,ds=Tn();function vs(e){var r=ds(e,"string");return hs(r)==="symbol"?r:String(r)}hr.exports=vs,hr.exports.__esModule=!0,hr.exports.default=hr.exports});var H=A((H1,dr)=>{var ps=Et();function Rn(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ps(a.key),a)}}function ms(e,r,n){return r&&Rn(e.prototype,r),n&&Rn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}dr.exports=ms,dr.exports.__esModule=!0,dr.exports.default=dr.exports});var An=A((K1,be)=>{function Lt(e,r){return be.exports=Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,t){return a.__proto__=t,a},be.exports.__esModule=!0,be.exports.default=be.exports,Lt(e,r)}be.exports=Lt,be.exports.__esModule=!0,be.exports.default=be.exports});var se=A((J1,vr)=>{var ys=An();function gs(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ys(e,r)}vr.exports=gs,vr.exports.__esModule=!0,vr.exports.default=vr.exports});var Pn=A((j1,pr)=>{function Ms(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}pr.exports=Ms,pr.exports.__esModule=!0,pr.exports.default=pr.exports});var oe=A((ed,mr)=>{var bs=j().default,xs=Pn();function _s(e,r){if(r&&(bs(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xs(e)}mr.exports=_s,mr.exports.__esModule=!0,mr.exports.default=mr.exports});var ue=A((rd,xe)=>{function It(e){return xe.exports=It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xe.exports.__esModule=!0,xe.exports.default=xe.exports,It(e)}xe.exports=It,xe.exports.__esModule=!0,xe.exports.default=xe.exports});var Wr=A(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.default=Os;function Os(e,r){if(!e)throw new Error("math.gl assertion ".concat(r))}});var de=A(B=>{"use strict";var wn=X();Object.defineProperty(B,"__esModule",{value:!0});B.configure=As;B.formatValue=Ps;B.isArray=De;B.clone=ws;B.toRadians=Ss;B.toDegrees=qs;B.radians=qn;B.degrees=En;B.sin=Es;B.cos=Ls;B.tan=Is;B.asin=Ns;B.acos=Cs;B.atan=Ws;B.clamp=Ds;B.lerp=Ln;B.equals=In;B.exactEquals=Nn;B.withEpsilon=Fs;B.config=void 0;var Sn=wn(j()),ks=wn(Wr()),Ts=1/Math.PI*180,Rs=1/180*Math.PI,K={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};B.config=K;function As(e){for(var r in e)(0,ks.default)(r in K),K[r]=e[r];return K}function Ps(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.precision,a=n===void 0?K.precision:n;return e=Bs(e),"".concat(parseFloat(e.toPrecision(a)))}function De(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ws(e){return"clone"in e?e.clone():e.slice()}function Ss(e){return qn(e)}function qs(e){return En(e)}function qn(e,r){return _e(e,function(n){return n*Rs},r)}function En(e,r){return _e(e,function(n){return n*Ts},r)}function Es(e,r){return _e(e,function(n){return Math.sin(n)},r)}function Ls(e,r){return _e(e,function(n){return Math.cos(n)},r)}function Is(e,r){return _e(e,function(n){return Math.tan(n)},r)}function Ns(e,r){return _e(e,function(n){return Math.asin(n)},r)}function Cs(e,r){return _e(e,function(n){return Math.acos(n)},r)}function Ws(e,r){return _e(e,function(n){return Math.atan(n)},r)}function Ds(e,r,n){return _e(e,function(a){return Math.max(r,Math.min(n,a))})}function Ln(e,r,n){return De(e)?e.map(function(a,t){return Ln(a,r[t],n)}):n*r+(1-n)*e}function In(e,r,n){var a=K.EPSILON;n&&(K.EPSILON=n);try{if(e===r)return!0;if(De(e)&&De(r)){if(e.length!==r.length)return!1;for(var t=0;t<e.length;++t)if(!In(e[t],r[t]))return!1;return!0}return e&&e.equals?e.equals(r):r&&r.equals?r.equals(e):typeof e=="number"&&typeof r=="number"?Math.abs(e-r)<=K.EPSILON*Math.max(1,Math.abs(e),Math.abs(r)):!1}finally{K.EPSILON=a}}function Nn(e,r){if(e===r)return!0;if(e&&(0,Sn.default)(e)==="object"&&r&&(0,Sn.default)(r)==="object"){if(e.constructor!==r.constructor)return!1;if(e.exactEquals)return e.exactEquals(r)}if(De(e)&&De(r)){if(e.length!==r.length)return!1;for(var n=0;n<e.length;++n)if(!Nn(e[n],r[n]))return!1;return!0}return!1}function Fs(e,r){var n=K.EPSILON;K.EPSILON=e;var a;try{a=r()}finally{K.EPSILON=n}return a}function Bs(e){return Math.round(e/K.EPSILON)*K.EPSILON}function zs(e){return e.clone?e.clone():new Array(e.length)}function _e(e,r,n){if(De(e)){var a=e;n=n||zs(a);for(var t=0;t<n.length&&t<a.length;++t)n[t]=r(e[t],t,n);return n}return r(e)}});var Mr=A(Dr=>{"use strict";var yr=X();Object.defineProperty(Dr,"__esModule",{value:!0});Dr.default=void 0;var Vs=yr($()),Ys=yr(H()),Us=yr(se()),Xs=yr(oe()),Cn=yr(ue()),gr=de();function Gs(e){var r=Zs();return function(){var a=(0,Cn.default)(e),t;if(r){var i=(0,Cn.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,Xs.default)(this,t)}}function Zs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qs(e){function r(){var n=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return r.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e,r}var $s=function(e){(0,Us.default)(n,e);var r=Gs(n);function n(){return(0,Vs.default)(this,n),r.apply(this,arguments)}return(0,Ys.default)(n,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=0;s<this.ELEMENTS;++s)this[s]=t[s+i];return this.check()}},{key:"toArray",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=0;s<this.ELEMENTS;++s)t[i+s]=this[s];return t}},{key:"from",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:"to",value:function(t){return t===this?this:(0,gr.isArray)(t)?this.toArray(t):this.toObject(t)}},{key:"toTarget",value:function(t){return t?this.to(t):this}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(gr.config)}},{key:"formatString",value:function(t){for(var i="",s=0;s<this.ELEMENTS;++s)i+=(s>0?", ":"")+(0,gr.formatValue)(this[s],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(i,"]")}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(!(0,gr.equals)(this[i],t[i]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var i=0;i<this.ELEMENTS;++i)if(this[i]!==t[i])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"lerp",value:function(t,i,s){if(s===void 0)return this.lerp(this,t,i);for(var o=0;o<this.ELEMENTS;++o){var c=t[o];this[o]=c+s*(i[o]-c)}return this.check()}},{key:"min",value:function(t){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.min(t[i],this[i]);return this.check()}},{key:"max",value:function(t){for(var i=0;i<this.ELEMENTS;++i)this[i]=Math.max(t[i],this[i]);return this.check()}},{key:"clamp",value:function(t,i){for(var s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t[s]),i[s]);return this.check()}},{key:"add",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(var o=0,c=i;o<c.length;o++)for(var u=c[o],l=0;l<this.ELEMENTS;++l)this[l]+=u[l];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(var o=0,c=i;o<c.length;o++)for(var u=c[o],l=0;l<this.ELEMENTS;++l)this[l]-=u[l];return this.check()}},{key:"scale",value:function(t){if(typeof t=="number")for(var i=0;i<this.ELEMENTS;++i)this[i]*=t;else for(var s=0;s<this.ELEMENTS&&s<t.length;++s)this[s]*=t[s];return this.check()}},{key:"multiplyByScalar",value:function(t){for(var i=0;i<this.ELEMENTS;++i)this[i]*=t;return this.check()}},{key:"check",value:function(){if(gr.config.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var t=this.length===this.ELEMENTS,i=0;i<this.ELEMENTS;++i)t=t&&Number.isFinite(this[i]);return t}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var i=0;i<this.ELEMENTS;++i)this[i]=t;return this.check()}},{key:"addScalar",value:function(t){for(var i=0;i<this.ELEMENTS;++i)this[i]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){for(var i=0;i<this.ELEMENTS;++i)this[i]*=t;return this.check()}},{key:"divideScalar",value:function(t){return this.multiplyByScalar(1/t)}},{key:"clampScalar",value:function(t,i){for(var s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t),i);return this.check()}},{key:"elements",get:function(){return this}}]),n}(Qs(Array));Dr.default=$s});var ve=A(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.validateVector=Wn;Qe.checkNumber=Ks;Qe.checkVector=Js;Qe.deprecated=js;var Hs=de();function Wn(e,r){if(e.length!==r)return!1;for(var n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}function Ks(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Js(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(Hs.config.debug&&!Wn(e,r))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return e}var Dn={};function js(e,r){Dn[e]||(Dn[e]=!0,console.warn("".concat(e," has been removed in version ").concat(r,", see upgrade guide for more information")))}});var Br=A(Fr=>{"use strict";var Fe=X();Object.defineProperty(Fr,"__esModule",{value:!0});Fr.default=void 0;var eo=Fe($()),ro=Fe(H()),to=Fe(se()),no=Fe(oe()),Fn=Fe(ue()),ao=Fe(Mr()),br=ve(),Bn=Fe(Wr());function io(e){var r=so();return function(){var a=(0,Fn.default)(e),t;if(r){var i=(0,Fn.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,no.default)(this,t)}}function so(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oo=function(e){(0,to.default)(n,e);var r=io(n);function n(){return(0,eo.default)(this,n),r.apply(this,arguments)}return(0,ro.default)(n,[{key:"x",get:function(){return this[0]},set:function(t){this[0]=(0,br.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=(0,br.checkNumber)(t)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var t=0,i=0;i<this.ELEMENTS;++i)t+=this[i]*this[i];return t}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var i=0,s=0;s<this.ELEMENTS;++s){var o=this[s]-t[s];i+=o*o}return(0,br.checkNumber)(i)}},{key:"dot",value:function(t){for(var i=0,s=0;s<this.ELEMENTS;++s)i+=this[s]*t[s];return(0,br.checkNumber)(i)}},{key:"normalize",value:function(){var t=this.magnitude();if(t!==0)for(var i=0;i<this.ELEMENTS;++i)this[i]/=t;return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(var o=0,c=i;o<c.length;o++)for(var u=c[o],l=0;l<this.ELEMENTS;++l)this[l]*=u[l];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(var o=0,c=i;o<c.length;o++)for(var u=c[o],l=0;l<this.ELEMENTS;++l)this[l]/=u[l];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return(0,Bn.default)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,br.checkNumber)(this[t])}},{key:"setComponent",value:function(t,i){return(0,Bn.default)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=i,this.check()}},{key:"addVectors",value:function(t,i){return this.copy(t).add(i)}},{key:"subVectors",value:function(t,i){return this.copy(t).subtract(i)}},{key:"multiplyVectors",value:function(t,i){return this.copy(t).multiply(i)}},{key:"addScaledVector",value:function(t,i){return this.add(new this.constructor(t).multiplyScalar(i))}}]),n}(ao.default);Fr.default=oo});var Be=A(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.setMatrixArrayType=co;ne.toRadian=fo;ne.equals=ho;ne.RANDOM=ne.ARRAY_TYPE=ne.EPSILON=void 0;var zn=1e-6;ne.EPSILON=zn;var Vn=typeof Float32Array!="undefined"?Float32Array:Array;ne.ARRAY_TYPE=Vn;var uo=Math.random;ne.RANDOM=uo;function co(e){ne.ARRAY_TYPE=Vn=e}var lo=Math.PI/180;function fo(e){return e*lo}function ho(e,r){return Math.abs(e-r)<=zn*Math.max(1,Math.abs(e),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)})});var Vr=A(R=>{"use strict";function zr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zr=function(n){return typeof n}:zr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zr(e)}Object.defineProperty(R,"__esModule",{value:!0});R.create=Un;R.clone=po;R.fromValues=mo;R.copy=yo;R.set=go;R.add=Mo;R.subtract=Xn;R.multiply=Gn;R.divide=Zn;R.ceil=bo;R.floor=xo;R.min=_o;R.max=Oo;R.round=ko;R.scale=To;R.scaleAndAdd=Ro;R.distance=Qn;R.squaredDistance=$n;R.length=Hn;R.squaredLength=Kn;R.negate=Ao;R.inverse=Po;R.normalize=wo;R.dot=So;R.cross=qo;R.lerp=Eo;R.random=Lo;R.transformMat2=Io;R.transformMat2d=No;R.transformMat3=Co;R.transformMat4=Wo;R.rotate=Do;R.angle=Fo;R.zero=Bo;R.str=zo;R.exactEquals=Vo;R.equals=Yo;R.forEach=R.sqrLen=R.sqrDist=R.dist=R.div=R.mul=R.sub=R.len=void 0;var ze=vo(Be());function Yn(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Yn=function(t){return t?n:r})(e)}function vo(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||zr(e)!=="object"&&typeof e!="function")return{default:e};var n=Yn(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function Un(){var e=new ze.ARRAY_TYPE(2);return ze.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function po(e){var r=new ze.ARRAY_TYPE(2);return r[0]=e[0],r[1]=e[1],r}function mo(e,r){var n=new ze.ARRAY_TYPE(2);return n[0]=e,n[1]=r,n}function yo(e,r){return e[0]=r[0],e[1]=r[1],e}function go(e,r,n){return e[0]=r,e[1]=n,e}function Mo(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e}function Xn(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e}function Gn(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e}function Zn(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e}function bo(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e}function xo(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e}function _o(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e}function Oo(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e}function ko(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e}function To(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e}function Ro(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e}function Qn(e,r){var n=r[0]-e[0],a=r[1]-e[1];return Math.hypot(n,a)}function $n(e,r){var n=r[0]-e[0],a=r[1]-e[1];return n*n+a*a}function Hn(e){var r=e[0],n=e[1];return Math.hypot(r,n)}function Kn(e){var r=e[0],n=e[1];return r*r+n*n}function Ao(e,r){return e[0]=-r[0],e[1]=-r[1],e}function Po(e,r){return e[0]=1/r[0],e[1]=1/r[1],e}function wo(e,r){var n=r[0],a=r[1],t=n*n+a*a;return t>0&&(t=1/Math.sqrt(t)),e[0]=r[0]*t,e[1]=r[1]*t,e}function So(e,r){return e[0]*r[0]+e[1]*r[1]}function qo(e,r,n){var a=r[0]*n[1]-r[1]*n[0];return e[0]=e[1]=0,e[2]=a,e}function Eo(e,r,n,a){var t=r[0],i=r[1];return e[0]=t+a*(n[0]-t),e[1]=i+a*(n[1]-i),e}function Lo(e,r){r=r||1;var n=ze.RANDOM()*2*Math.PI;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e}function Io(e,r,n){var a=r[0],t=r[1];return e[0]=n[0]*a+n[2]*t,e[1]=n[1]*a+n[3]*t,e}function No(e,r,n){var a=r[0],t=r[1];return e[0]=n[0]*a+n[2]*t+n[4],e[1]=n[1]*a+n[3]*t+n[5],e}function Co(e,r,n){var a=r[0],t=r[1];return e[0]=n[0]*a+n[3]*t+n[6],e[1]=n[1]*a+n[4]*t+n[7],e}function Wo(e,r,n){var a=r[0],t=r[1];return e[0]=n[0]*a+n[4]*t+n[12],e[1]=n[1]*a+n[5]*t+n[13],e}function Do(e,r,n,a){var t=r[0]-n[0],i=r[1]-n[1],s=Math.sin(a),o=Math.cos(a);return e[0]=t*o-i*s+n[0],e[1]=t*s+i*o+n[1],e}function Fo(e,r){var n=e[0],a=e[1],t=r[0],i=r[1],s=Math.sqrt(n*n+a*a)*Math.sqrt(t*t+i*i),o=s&&(n*t+a*i)/s;return Math.acos(Math.min(Math.max(o,-1),1))}function Bo(e){return e[0]=0,e[1]=0,e}function zo(e){return"vec2("+e[0]+", "+e[1]+")"}function Vo(e,r){return e[0]===r[0]&&e[1]===r[1]}function Yo(e,r){var n=e[0],a=e[1],t=r[0],i=r[1];return Math.abs(n-t)<=ze.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(a-i)<=ze.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var Uo=Hn;R.len=Uo;var Xo=Xn;R.sub=Xo;var Go=Gn;R.mul=Go;var Zo=Zn;R.div=Zo;var Qo=Qn;R.dist=Qo;var $o=$n;R.sqrDist=$o;var Ho=Kn;R.sqrLen=Ho;var Ko=function(){var e=Un();return function(r,n,a,t,i,s){var o,c;for(n||(n=2),a||(a=0),t?c=Math.min(t*n+a,r.length):c=r.length,o=a;o<c;o+=n)e[0]=r[o],e[1]=r[o+1],i(e,e,s),r[o]=e[0],r[o+1]=e[1];return r}}();R.forEach=Ko});var $e=A(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.vec2_transformMat4AsVector=Jo;Ve.vec3_transformMat4AsVector=jo;Ve.vec3_transformMat2=eu;Ve.vec4_transformMat2=ru;Ve.vec4_transformMat3=tu;function Jo(e,r,n){var a=r[0],t=r[1],i=n[3]*a+n[7]*t||1;return e[0]=(n[0]*a+n[4]*t)/i,e[1]=(n[1]*a+n[5]*t)/i,e}function jo(e,r,n){var a=r[0],t=r[1],i=r[2],s=n[3]*a+n[7]*t+n[11]*i||1;return e[0]=(n[0]*a+n[4]*t+n[8]*i)/s,e[1]=(n[1]*a+n[5]*t+n[9]*i)/s,e[2]=(n[2]*a+n[6]*t+n[10]*i)/s,e}function eu(e,r,n){var a=r[0],t=r[1];return e[0]=n[0]*a+n[2]*t,e[1]=n[1]*a+n[3]*t,e[2]=r[2],e}function ru(e,r,n){var a=r[0],t=r[1];return e[0]=n[0]*a+n[2]*t,e[1]=n[1]*a+n[3]*t,e[2]=r[2],e[3]=r[3],e}function tu(e,r,n){var a=r[0],t=r[1],i=r[2];return e[0]=n[0]*a+n[3]*t+n[6]*i,e[1]=n[1]*a+n[4]*t+n[7]*i,e[2]=n[2]*a+n[5]*t+n[8]*i,e[3]=r[3],e}});var ea=A(Xr=>{"use strict";var He=X(),nu=j();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=void 0;var au=He($()),iu=He(H()),su=He(se()),ou=He(oe()),Jn=He(ue()),uu=He(Br()),Ct=de(),Yr=ve(),Ur=lu(Vr()),cu=$e();function jn(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(jn=function(t){return t?n:r})(e)}function lu(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||nu(e)!=="object"&&typeof e!="function")return{default:e};var n=jn(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function fu(e){var r=hu();return function(){var a=(0,Jn.default)(e),t;if(r){var i=(0,Jn.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,ou.default)(this,t)}}function hu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var du=function(e){(0,su.default)(n,e);var r=fu(n);function n(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,au.default)(this,n),a=r.call(this,2),(0,Ct.isArray)(t)&&arguments.length===1?a.copy(t):(Ct.config.debug&&((0,Yr.checkNumber)(t),(0,Yr.checkNumber)(i)),a[0]=t,a[1]=i),a}return(0,iu.default)(n,[{key:"set",value:function(t,i){return this[0]=t,this[1]=i,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this.check()}},{key:"fromObject",value:function(t){return Ct.config.debug&&((0,Yr.checkNumber)(t.x),(0,Yr.checkNumber)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return Ur.transformMat4(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return(0,cu.vec2_transformMat4AsVector)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return Ur.transformMat3(this,this,t),this.check()}},{key:"transformByMatrix2x3",value:function(t){return Ur.transformMat2d(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return Ur.transformMat2(this,this,t),this.check()}}]),n}(uu.default);Xr.default=du});var Pe=A(O=>{"use strict";function Gr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gr=function(n){return typeof n}:Gr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gr(e)}Object.defineProperty(O,"__esModule",{value:!0});O.create=ta;O.clone=pu;O.length=na;O.fromValues=mu;O.copy=yu;O.set=gu;O.add=Mu;O.subtract=aa;O.multiply=ia;O.divide=sa;O.ceil=bu;O.floor=xu;O.min=_u;O.max=Ou;O.round=ku;O.scale=Tu;O.scaleAndAdd=Ru;O.distance=oa;O.squaredDistance=ua;O.squaredLength=ca;O.negate=Au;O.inverse=Pu;O.normalize=wu;O.dot=la;O.cross=Su;O.lerp=qu;O.hermite=Eu;O.bezier=Lu;O.random=Iu;O.transformMat4=Nu;O.transformMat3=Cu;O.transformQuat=Wu;O.rotateX=Du;O.rotateY=Fu;O.rotateZ=Bu;O.angle=zu;O.zero=Vu;O.str=Yu;O.exactEquals=Uu;O.equals=Xu;O.forEach=O.sqrLen=O.len=O.sqrDist=O.dist=O.div=O.mul=O.sub=void 0;var Oe=vu(Be());function ra(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(ra=function(t){return t?n:r})(e)}function vu(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||Gr(e)!=="object"&&typeof e!="function")return{default:e};var n=ra(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function ta(){var e=new Oe.ARRAY_TYPE(3);return Oe.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function pu(e){var r=new Oe.ARRAY_TYPE(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function na(e){var r=e[0],n=e[1],a=e[2];return Math.hypot(r,n,a)}function mu(e,r,n){var a=new Oe.ARRAY_TYPE(3);return a[0]=e,a[1]=r,a[2]=n,a}function yu(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function gu(e,r,n,a){return e[0]=r,e[1]=n,e[2]=a,e}function Mu(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function aa(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e}function ia(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e}function sa(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e}function bu(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}function xu(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}function _u(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e}function Ou(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e}function ku(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}function Tu(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e}function Ru(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e}function oa(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2];return Math.hypot(n,a,t)}function ua(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2];return n*n+a*a+t*t}function ca(e){var r=e[0],n=e[1],a=e[2];return r*r+n*n+a*a}function Au(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function Pu(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}function wu(e,r){var n=r[0],a=r[1],t=r[2],i=n*n+a*a+t*t;return i>0&&(i=1/Math.sqrt(i)),e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e}function la(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function Su(e,r,n){var a=r[0],t=r[1],i=r[2],s=n[0],o=n[1],c=n[2];return e[0]=t*c-i*o,e[1]=i*s-a*c,e[2]=a*o-t*s,e}function qu(e,r,n,a){var t=r[0],i=r[1],s=r[2];return e[0]=t+a*(n[0]-t),e[1]=i+a*(n[1]-i),e[2]=s+a*(n[2]-s),e}function Eu(e,r,n,a,t,i){var s=i*i,o=s*(2*i-3)+1,c=s*(i-2)+i,u=s*(i-1),l=s*(3-2*i);return e[0]=r[0]*o+n[0]*c+a[0]*u+t[0]*l,e[1]=r[1]*o+n[1]*c+a[1]*u+t[1]*l,e[2]=r[2]*o+n[2]*c+a[2]*u+t[2]*l,e}function Lu(e,r,n,a,t,i){var s=1-i,o=s*s,c=i*i,u=o*s,l=3*i*o,h=3*c*s,f=c*i;return e[0]=r[0]*u+n[0]*l+a[0]*h+t[0]*f,e[1]=r[1]*u+n[1]*l+a[1]*h+t[1]*f,e[2]=r[2]*u+n[2]*l+a[2]*h+t[2]*f,e}function Iu(e,r){r=r||1;var n=Oe.RANDOM()*2*Math.PI,a=Oe.RANDOM()*2-1,t=Math.sqrt(1-a*a)*r;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e[2]=a*r,e}function Nu(e,r,n){var a=r[0],t=r[1],i=r[2],s=n[3]*a+n[7]*t+n[11]*i+n[15];return s=s||1,e[0]=(n[0]*a+n[4]*t+n[8]*i+n[12])/s,e[1]=(n[1]*a+n[5]*t+n[9]*i+n[13])/s,e[2]=(n[2]*a+n[6]*t+n[10]*i+n[14])/s,e}function Cu(e,r,n){var a=r[0],t=r[1],i=r[2];return e[0]=a*n[0]+t*n[3]+i*n[6],e[1]=a*n[1]+t*n[4]+i*n[7],e[2]=a*n[2]+t*n[5]+i*n[8],e}function Wu(e,r,n){var a=n[0],t=n[1],i=n[2],s=n[3],o=r[0],c=r[1],u=r[2],l=t*u-i*c,h=i*o-a*u,f=a*c-t*o,d=t*f-i*h,v=i*l-a*f,m=a*h-t*l,p=s*2;return l*=p,h*=p,f*=p,d*=2,v*=2,m*=2,e[0]=o+l+d,e[1]=c+h+v,e[2]=u+f+m,e}function Du(e,r,n,a){var t=[],i=[];return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],i[0]=t[0],i[1]=t[1]*Math.cos(a)-t[2]*Math.sin(a),i[2]=t[1]*Math.sin(a)+t[2]*Math.cos(a),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Fu(e,r,n,a){var t=[],i=[];return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],i[0]=t[2]*Math.sin(a)+t[0]*Math.cos(a),i[1]=t[1],i[2]=t[2]*Math.cos(a)-t[0]*Math.sin(a),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Bu(e,r,n,a){var t=[],i=[];return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],i[0]=t[0]*Math.cos(a)-t[1]*Math.sin(a),i[1]=t[0]*Math.sin(a)+t[1]*Math.cos(a),i[2]=t[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function zu(e,r){var n=e[0],a=e[1],t=e[2],i=r[0],s=r[1],o=r[2],c=Math.sqrt(n*n+a*a+t*t),u=Math.sqrt(i*i+s*s+o*o),l=c*u,h=l&&la(e,r)/l;return Math.acos(Math.min(Math.max(h,-1),1))}function Vu(e){return e[0]=0,e[1]=0,e[2]=0,e}function Yu(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Uu(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function Xu(e,r){var n=e[0],a=e[1],t=e[2],i=r[0],s=r[1],o=r[2];return Math.abs(n-i)<=Oe.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-s)<=Oe.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(t-o)<=Oe.EPSILON*Math.max(1,Math.abs(t),Math.abs(o))}var Gu=aa;O.sub=Gu;var Zu=ia;O.mul=Zu;var Qu=sa;O.div=Qu;var $u=oa;O.dist=$u;var Hu=ua;O.sqrDist=Hu;var Ku=na;O.len=Ku;var Ju=ca;O.sqrLen=Ju;var ju=function(){var e=ta();return function(r,n,a,t,i,s){var o,c;for(n||(n=3),a||(a=0),t?c=Math.min(t*n+a,r.length):c=r.length,o=a;o<c;o+=n)e[0]=r[o],e[1]=r[o+1],e[2]=r[o+2],i(e,e,s),r[o]=e[0],r[o+1]=e[1],r[o+2]=e[2];return r}}();O.forEach=ju});var $r=A(Qr=>{"use strict";var Ke=X(),ec=j();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.default=void 0;var rc=Ke($()),tc=Ke(H()),nc=Ke(se()),ac=Ke(oe()),fa=Ke(ue()),ic=Ke(Br()),Wt=de(),Ye=ve(),we=sc(Pe()),ha=$e();function da(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(da=function(t){return t?n:r})(e)}function sc(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||ec(e)!=="object"&&typeof e!="function")return{default:e};var n=da(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function oc(e){var r=uc();return function(){var a=(0,fa.default)(e),t;if(r){var i=(0,fa.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,ac.default)(this,t)}}function uc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Dt=[0,0,0],Zr,cc=function(e){(0,nc.default)(n,e);var r=oc(n);function n(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(0,rc.default)(this,n),a=r.call(this,-0,-0,-0),arguments.length===1&&(0,Wt.isArray)(t)?a.copy(t):(Wt.config.debug&&((0,Ye.checkNumber)(t),(0,Ye.checkNumber)(i),(0,Ye.checkNumber)(s)),a[0]=t,a[1]=i,a[2]=s),a}return(0,tc.default)(n,[{key:"set",value:function(t,i,s){return this[0]=t,this[1]=i,this[2]=s,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:"fromObject",value:function(t){return Wt.config.debug&&((0,Ye.checkNumber)(t.x),(0,Ye.checkNumber)(t.y),(0,Ye.checkNumber)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=(0,Ye.checkNumber)(t)}},{key:"angle",value:function(t){return we.angle(this,t)}},{key:"cross",value:function(t){return we.cross(this,this,t),this.check()}},{key:"rotateX",value:function(t){var i=t.radians,s=t.origin,o=s===void 0?Dt:s;return we.rotateX(this,this,o,i),this.check()}},{key:"rotateY",value:function(t){var i=t.radians,s=t.origin,o=s===void 0?Dt:s;return we.rotateY(this,this,o,i),this.check()}},{key:"rotateZ",value:function(t){var i=t.radians,s=t.origin,o=s===void 0?Dt:s;return we.rotateZ(this,this,o,i),this.check()}},{key:"transform",value:function(t){return this.transformAsPoint(t)}},{key:"transformAsPoint",value:function(t){return we.transformMat4(this,this,t),this.check()}},{key:"transformAsVector",value:function(t){return(0,ha.vec3_transformMat4AsVector)(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return we.transformMat3(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return(0,ha.vec3_transformMat2)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return we.transformQuat(this,this,t),this.check()}}],[{key:"ZERO",get:function(){return Zr||(Zr=new n(0,0,0),Object.freeze(Zr)),Zr}}]),n}(ic.default);Qr.default=cc});var Bt=A(Kr=>{"use strict";var Je=X(),lc=j();Object.defineProperty(Kr,"__esModule",{value:!0});Kr.default=void 0;var fc=Je($()),hc=Je(H()),dc=Je(se()),vc=Je(oe()),va=Je(ue()),pc=Je(Br()),Ft=de(),pe=ve(),pa=mc(Pe()),ma=$e();function ya(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(ya=function(t){return t?n:r})(e)}function mc(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||lc(e)!=="object"&&typeof e!="function")return{default:e};var n=ya(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function yc(e){var r=gc();return function(){var a=(0,va.default)(e),t;if(r){var i=(0,va.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,vc.default)(this,t)}}function gc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hr,Mc=function(e){(0,dc.default)(n,e);var r=yc(n);function n(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return(0,fc.default)(this,n),a=r.call(this,-0,-0,-0,-0),(0,Ft.isArray)(t)&&arguments.length===1?a.copy(t):(Ft.config.debug&&((0,pe.checkNumber)(t),(0,pe.checkNumber)(i),(0,pe.checkNumber)(s),(0,pe.checkNumber)(o)),a[0]=t,a[1]=i,a[2]=s,a[3]=o),a}return(0,hc.default)(n,[{key:"set",value:function(t,i,s,o){return this[0]=t,this[1]=i,this[2]=s,this[3]=o,this.check()}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"fromObject",value:function(t){return Ft.config.debug&&((0,pe.checkNumber)(t.x),(0,pe.checkNumber)(t.y),(0,pe.checkNumber)(t.z),(0,pe.checkNumber)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}},{key:"toObject",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=(0,pe.checkNumber)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=(0,pe.checkNumber)(t)}},{key:"transform",value:function(t){return pa.transformMat4(this,this,t),this.check()}},{key:"transformByMatrix3",value:function(t){return(0,ma.vec4_transformMat3)(this,this,t),this.check()}},{key:"transformByMatrix2",value:function(t){return(0,ma.vec4_transformMat2)(this,this,t),this.check()}},{key:"transformByQuaternion",value:function(t){return pa.transformQuat(this,this,t),this.check()}},{key:"applyMatrix4",value:function(t){return t.transform(this,this),this}}],[{key:"ZERO",get:function(){return Hr||(Hr=new n(0,0,0,0),Object.freeze(Hr)),Hr}}]),n}(pc.default);Kr.default=Mc});var zt=A(Jr=>{"use strict";var je=X();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.default=void 0;var bc=je($()),xc=je(H()),_c=je(se()),Oc=je(oe()),ga=je(ue()),kc=je(Mr()),Tc=ve(),Rc=de();function Ac(e){var r=Pc();return function(){var a=(0,ga.default)(e),t;if(r){var i=(0,ga.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,Oc.default)(this,t)}}function Pc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wc=function(e){(0,_c.default)(n,e);var r=Ac(n);function n(){return(0,bc.default)(this,n),r.apply(this,arguments)}return(0,xc.default)(n,[{key:"toString",value:function(){var t="[";if(Rc.config.printRowMajor){t+="row-major:";for(var i=0;i<this.RANK;++i)for(var s=0;s<this.RANK;++s)t+=" ".concat(this[s*this.RANK+i])}else{t+="column-major:";for(var o=0;o<this.ELEMENTS;++o)t+=" ".concat(this[o])}return t+="]",t}},{key:"getElementIndex",value:function(t,i){return i*this.RANK+t}},{key:"getElement",value:function(t,i){return this[i*this.RANK+t]}},{key:"setElement",value:function(t,i,s){return this[i*this.RANK+t]=(0,Tc.checkNumber)(s),this}},{key:"getColumn",value:function(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Array(this.RANK).fill(-0),s=t*this.RANK,o=0;o<this.RANK;++o)i[o]=this[s+o];return i}},{key:"setColumn",value:function(t,i){for(var s=t*this.RANK,o=0;o<this.RANK;++o)this[s+o]=i[o];return this}}]),n}(kc.default);Jr.default=wc});var Vt=A(q=>{"use strict";function jr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jr=function(n){return typeof n}:jr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jr(e)}Object.defineProperty(q,"__esModule",{value:!0});q.create=qc;q.fromMat4=Ec;q.clone=Lc;q.copy=Ic;q.fromValues=Nc;q.set=Cc;q.identity=Wc;q.transpose=Dc;q.invert=Fc;q.adjoint=Bc;q.determinant=zc;q.multiply=ba;q.translate=Vc;q.rotate=Yc;q.scale=Uc;q.fromTranslation=Xc;q.fromRotation=Gc;q.fromScaling=Zc;q.fromMat2d=Qc;q.fromQuat=$c;q.normalFromMat4=Hc;q.projection=Kc;q.str=Jc;q.frob=jc;q.add=el;q.subtract=xa;q.multiplyScalar=rl;q.multiplyScalarAndAdd=tl;q.exactEquals=nl;q.equals=al;q.sub=q.mul=void 0;var ee=Sc(Be());function Ma(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Ma=function(t){return t?n:r})(e)}function Sc(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||jr(e)!=="object"&&typeof e!="function")return{default:e};var n=Ma(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function qc(){var e=new ee.ARRAY_TYPE(9);return ee.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ec(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[4],e[4]=r[5],e[5]=r[6],e[6]=r[8],e[7]=r[9],e[8]=r[10],e}function Lc(e){var r=new ee.ARRAY_TYPE(9);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Ic(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Nc(e,r,n,a,t,i,s,o,c){var u=new ee.ARRAY_TYPE(9);return u[0]=e,u[1]=r,u[2]=n,u[3]=a,u[4]=t,u[5]=i,u[6]=s,u[7]=o,u[8]=c,u}function Cc(e,r,n,a,t,i,s,o,c,u){return e[0]=r,e[1]=n,e[2]=a,e[3]=t,e[4]=i,e[5]=s,e[6]=o,e[7]=c,e[8]=u,e}function Wc(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Dc(e,r){if(e===r){var n=r[1],a=r[2],t=r[5];e[1]=r[3],e[2]=r[6],e[3]=n,e[5]=r[7],e[6]=a,e[7]=t}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e}function Fc(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=r[4],o=r[5],c=r[6],u=r[7],l=r[8],h=l*s-o*u,f=-l*i+o*c,d=u*i-s*c,v=n*h+a*f+t*d;return v?(v=1/v,e[0]=h*v,e[1]=(-l*a+t*u)*v,e[2]=(o*a-t*s)*v,e[3]=f*v,e[4]=(l*n-t*c)*v,e[5]=(-o*n+t*i)*v,e[6]=d*v,e[7]=(-u*n+a*c)*v,e[8]=(s*n-a*i)*v,e):null}function Bc(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=r[4],o=r[5],c=r[6],u=r[7],l=r[8];return e[0]=s*l-o*u,e[1]=t*u-a*l,e[2]=a*o-t*s,e[3]=o*c-i*l,e[4]=n*l-t*c,e[5]=t*i-n*o,e[6]=i*u-s*c,e[7]=a*c-n*u,e[8]=n*s-a*i,e}function zc(e){var r=e[0],n=e[1],a=e[2],t=e[3],i=e[4],s=e[5],o=e[6],c=e[7],u=e[8];return r*(u*i-s*c)+n*(-u*t+s*o)+a*(c*t-i*o)}function ba(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3],o=r[4],c=r[5],u=r[6],l=r[7],h=r[8],f=n[0],d=n[1],v=n[2],m=n[3],p=n[4],y=n[5],b=n[6],g=n[7],M=n[8];return e[0]=f*a+d*s+v*u,e[1]=f*t+d*o+v*l,e[2]=f*i+d*c+v*h,e[3]=m*a+p*s+y*u,e[4]=m*t+p*o+y*l,e[5]=m*i+p*c+y*h,e[6]=b*a+g*s+M*u,e[7]=b*t+g*o+M*l,e[8]=b*i+g*c+M*h,e}function Vc(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3],o=r[4],c=r[5],u=r[6],l=r[7],h=r[8],f=n[0],d=n[1];return e[0]=a,e[1]=t,e[2]=i,e[3]=s,e[4]=o,e[5]=c,e[6]=f*a+d*s+u,e[7]=f*t+d*o+l,e[8]=f*i+d*c+h,e}function Yc(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3],o=r[4],c=r[5],u=r[6],l=r[7],h=r[8],f=Math.sin(n),d=Math.cos(n);return e[0]=d*a+f*s,e[1]=d*t+f*o,e[2]=d*i+f*c,e[3]=d*s-f*a,e[4]=d*o-f*t,e[5]=d*c-f*i,e[6]=u,e[7]=l,e[8]=h,e}function Uc(e,r,n){var a=n[0],t=n[1];return e[0]=a*r[0],e[1]=a*r[1],e[2]=a*r[2],e[3]=t*r[3],e[4]=t*r[4],e[5]=t*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Xc(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=r[0],e[7]=r[1],e[8]=1,e}function Gc(e,r){var n=Math.sin(r),a=Math.cos(r);return e[0]=a,e[1]=n,e[2]=0,e[3]=-n,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Zc(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=r[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Qc(e,r){return e[0]=r[0],e[1]=r[1],e[2]=0,e[3]=r[2],e[4]=r[3],e[5]=0,e[6]=r[4],e[7]=r[5],e[8]=1,e}function $c(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=n+n,o=a+a,c=t+t,u=n*s,l=a*s,h=a*o,f=t*s,d=t*o,v=t*c,m=i*s,p=i*o,y=i*c;return e[0]=1-h-v,e[3]=l-y,e[6]=f+p,e[1]=l+y,e[4]=1-u-v,e[7]=d-m,e[2]=f-p,e[5]=d+m,e[8]=1-u-h,e}function Hc(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=r[4],o=r[5],c=r[6],u=r[7],l=r[8],h=r[9],f=r[10],d=r[11],v=r[12],m=r[13],p=r[14],y=r[15],b=n*o-a*s,g=n*c-t*s,M=n*u-i*s,k=a*c-t*o,_=a*u-i*o,C=t*u-i*c,L=l*m-h*v,I=l*p-f*v,S=l*y-d*v,W=h*p-f*m,N=h*y-d*m,D=f*y-d*p,w=b*D-g*N+M*W+k*S-_*I+C*L;return w?(w=1/w,e[0]=(o*D-c*N+u*W)*w,e[1]=(c*S-s*D-u*I)*w,e[2]=(s*N-o*S+u*L)*w,e[3]=(t*N-a*D-i*W)*w,e[4]=(n*D-t*S+i*I)*w,e[5]=(a*S-n*N-i*L)*w,e[6]=(m*C-p*_+y*k)*w,e[7]=(p*M-v*C-y*g)*w,e[8]=(v*_-m*M+y*b)*w,e):null}function Kc(e,r,n){return e[0]=2/r,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Jc(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function jc(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function el(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e[4]=r[4]+n[4],e[5]=r[5]+n[5],e[6]=r[6]+n[6],e[7]=r[7]+n[7],e[8]=r[8]+n[8],e}function xa(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e[4]=r[4]-n[4],e[5]=r[5]-n[5],e[6]=r[6]-n[6],e[7]=r[7]-n[7],e[8]=r[8]-n[8],e}function rl(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*n,e}function tl(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e[3]=r[3]+n[3]*a,e[4]=r[4]+n[4]*a,e[5]=r[5]+n[5]*a,e[6]=r[6]+n[6]*a,e[7]=r[7]+n[7]*a,e[8]=r[8]+n[8]*a,e}function nl(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]}function al(e,r){var n=e[0],a=e[1],t=e[2],i=e[3],s=e[4],o=e[5],c=e[6],u=e[7],l=e[8],h=r[0],f=r[1],d=r[2],v=r[3],m=r[4],p=r[5],y=r[6],b=r[7],g=r[8];return Math.abs(n-h)<=ee.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-f)<=ee.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(t-d)<=ee.EPSILON*Math.max(1,Math.abs(t),Math.abs(d))&&Math.abs(i-v)<=ee.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-m)<=ee.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-p)<=ee.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(c-y)<=ee.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-b)<=ee.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(l-g)<=ee.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))}var il=ba;q.mul=il;var sl=xa;q.sub=sl});var ka=A(tt=>{"use strict";var er=X(),ol=j();Object.defineProperty(tt,"__esModule",{value:!0});tt.default=void 0;var ul=er($()),cl=er(H()),ll=er(se()),fl=er(oe()),_a=er(ue()),hl=er(zt()),dl=ve(),vl=$e(),me=Yt(Vt()),pl=Yt(Vr()),ml=Yt(Pe());function Oa(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Oa=function(t){return t?n:r})(e)}function Yt(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||ol(e)!=="object"&&typeof e!="function")return{default:e};var n=Oa(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function yl(e){var r=gl();return function(){var a=(0,_a.default)(e),t;if(r){var i=(0,_a.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,fl.default)(this,t)}}function gl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ut;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(Ut||(Ut={}));var Ml=Object.freeze([1,0,0,0,1,0,0,0,1]),Xt=function(e){(0,ll.default)(n,e);var r=yl(n);function n(a){for(var t,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return(0,ul.default)(this,n),t=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(a)?t.copy(a):s.length>0?t.copy([a].concat(s)):t.identity(),t}return(0,cl.default)(n,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return Ut}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"identity",value:function(){return this.copy(Ml)}},{key:"fromObject",value:function(t){return this.check()}},{key:"fromQuaternion",value:function(t){return me.fromQuat(this,t),this.check()}},{key:"set",value:function(t,i,s,o,c,u,l,h,f){return this[0]=t,this[1]=i,this[2]=s,this[3]=o,this[4]=c,this[5]=u,this[6]=l,this[7]=h,this[8]=f,this.check()}},{key:"setRowMajor",value:function(t,i,s,o,c,u,l,h,f){return this[0]=t,this[1]=o,this[2]=l,this[3]=i,this[4]=c,this[5]=h,this[6]=s,this[7]=u,this[8]=f,this.check()}},{key:"determinant",value:function(){return me.determinant(this)}},{key:"transpose",value:function(){return me.transpose(this,this),this.check()}},{key:"invert",value:function(){return me.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return me.multiply(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return me.multiply(this,this,t),this.check()}},{key:"rotate",value:function(t){return me.rotate(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?me.scale(this,this,t):me.scale(this,this,[t,t]),this.check()}},{key:"translate",value:function(t){return me.translate(this,this,t),this.check()}},{key:"transform",value:function(t,i){var s;switch(t.length){case 2:s=pl.transformMat3(i||[-0,-0],t,this);break;case 3:s=ml.transformMat3(i||[-0,-0,-0],t,this);break;case 4:s=(0,vl.vec4_transformMat3)(i||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,dl.checkVector)(s,t.length),s}},{key:"transformVector",value:function(t,i){return this.transform(t,i)}},{key:"transformVector2",value:function(t,i){return this.transform(t,i)}},{key:"transformVector3",value:function(t,i){return this.transform(t,i)}}],[{key:"IDENTITY",get:function(){return xl()}},{key:"ZERO",get:function(){return bl()}}]),n}(hl.default);tt.default=Xt;var et,rt;function bl(){return et||(et=new Xt([0,0,0,0,0,0,0,0,0]),Object.freeze(et)),et}function xl(){return rt||(rt=new Xt,Object.freeze(rt)),rt}});var La=A(T=>{"use strict";function nt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nt=function(n){return typeof n}:nt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nt(e)}Object.defineProperty(T,"__esModule",{value:!0});T.create=Ol;T.clone=kl;T.copy=Tl;T.fromValues=Rl;T.set=Al;T.identity=Ra;T.transpose=Pl;T.invert=wl;T.adjoint=Sl;T.determinant=ql;T.multiply=Aa;T.translate=El;T.scale=Ll;T.rotate=Il;T.rotateX=Nl;T.rotateY=Cl;T.rotateZ=Wl;T.fromTranslation=Dl;T.fromScaling=Fl;T.fromRotation=Bl;T.fromXRotation=zl;T.fromYRotation=Vl;T.fromZRotation=Yl;T.fromRotationTranslation=Pa;T.fromQuat2=Ul;T.getTranslation=Xl;T.getScaling=wa;T.getRotation=Gl;T.fromRotationTranslationScale=Zl;T.fromRotationTranslationScaleOrigin=Ql;T.fromQuat=$l;T.frustum=Hl;T.perspectiveNO=Sa;T.perspectiveZO=Jl;T.perspectiveFromFieldOfView=jl;T.orthoNO=qa;T.orthoZO=rf;T.lookAt=tf;T.targetTo=nf;T.str=af;T.frob=sf;T.add=of;T.subtract=Ea;T.multiplyScalar=uf;T.multiplyScalarAndAdd=cf;T.exactEquals=lf;T.equals=ff;T.sub=T.mul=T.ortho=T.perspective=void 0;var F=_l(Be());function Ta(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Ta=function(t){return t?n:r})(e)}function _l(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||nt(e)!=="object"&&typeof e!="function")return{default:e};var n=Ta(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function Ol(){var e=new F.ARRAY_TYPE(16);return F.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function kl(e){var r=new F.ARRAY_TYPE(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Tl(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Rl(e,r,n,a,t,i,s,o,c,u,l,h,f,d,v,m){var p=new F.ARRAY_TYPE(16);return p[0]=e,p[1]=r,p[2]=n,p[3]=a,p[4]=t,p[5]=i,p[6]=s,p[7]=o,p[8]=c,p[9]=u,p[10]=l,p[11]=h,p[12]=f,p[13]=d,p[14]=v,p[15]=m,p}function Al(e,r,n,a,t,i,s,o,c,u,l,h,f,d,v,m,p){return e[0]=r,e[1]=n,e[2]=a,e[3]=t,e[4]=i,e[5]=s,e[6]=o,e[7]=c,e[8]=u,e[9]=l,e[10]=h,e[11]=f,e[12]=d,e[13]=v,e[14]=m,e[15]=p,e}function Ra(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pl(e,r){if(e===r){var n=r[1],a=r[2],t=r[3],i=r[6],s=r[7],o=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=n,e[6]=r[9],e[7]=r[13],e[8]=a,e[9]=i,e[11]=r[14],e[12]=t,e[13]=s,e[14]=o}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function wl(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=r[4],o=r[5],c=r[6],u=r[7],l=r[8],h=r[9],f=r[10],d=r[11],v=r[12],m=r[13],p=r[14],y=r[15],b=n*o-a*s,g=n*c-t*s,M=n*u-i*s,k=a*c-t*o,_=a*u-i*o,C=t*u-i*c,L=l*m-h*v,I=l*p-f*v,S=l*y-d*v,W=h*p-f*m,N=h*y-d*m,D=f*y-d*p,w=b*D-g*N+M*W+k*S-_*I+C*L;return w?(w=1/w,e[0]=(o*D-c*N+u*W)*w,e[1]=(t*N-a*D-i*W)*w,e[2]=(m*C-p*_+y*k)*w,e[3]=(f*_-h*C-d*k)*w,e[4]=(c*S-s*D-u*I)*w,e[5]=(n*D-t*S+i*I)*w,e[6]=(p*M-v*C-y*g)*w,e[7]=(l*C-f*M+d*g)*w,e[8]=(s*N-o*S+u*L)*w,e[9]=(a*S-n*N-i*L)*w,e[10]=(v*_-m*M+y*b)*w,e[11]=(h*M-l*_-d*b)*w,e[12]=(o*I-s*W-c*L)*w,e[13]=(n*W-a*I+t*L)*w,e[14]=(m*g-v*k-p*b)*w,e[15]=(l*k-h*g+f*b)*w,e):null}function Sl(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=r[4],o=r[5],c=r[6],u=r[7],l=r[8],h=r[9],f=r[10],d=r[11],v=r[12],m=r[13],p=r[14],y=r[15];return e[0]=o*(f*y-d*p)-h*(c*y-u*p)+m*(c*d-u*f),e[1]=-(a*(f*y-d*p)-h*(t*y-i*p)+m*(t*d-i*f)),e[2]=a*(c*y-u*p)-o*(t*y-i*p)+m*(t*u-i*c),e[3]=-(a*(c*d-u*f)-o*(t*d-i*f)+h*(t*u-i*c)),e[4]=-(s*(f*y-d*p)-l*(c*y-u*p)+v*(c*d-u*f)),e[5]=n*(f*y-d*p)-l*(t*y-i*p)+v*(t*d-i*f),e[6]=-(n*(c*y-u*p)-s*(t*y-i*p)+v*(t*u-i*c)),e[7]=n*(c*d-u*f)-s*(t*d-i*f)+l*(t*u-i*c),e[8]=s*(h*y-d*m)-l*(o*y-u*m)+v*(o*d-u*h),e[9]=-(n*(h*y-d*m)-l*(a*y-i*m)+v*(a*d-i*h)),e[10]=n*(o*y-u*m)-s*(a*y-i*m)+v*(a*u-i*o),e[11]=-(n*(o*d-u*h)-s*(a*d-i*h)+l*(a*u-i*o)),e[12]=-(s*(h*p-f*m)-l*(o*p-c*m)+v*(o*f-c*h)),e[13]=n*(h*p-f*m)-l*(a*p-t*m)+v*(a*f-t*h),e[14]=-(n*(o*p-c*m)-s*(a*p-t*m)+v*(a*c-t*o)),e[15]=n*(o*f-c*h)-s*(a*f-t*h)+l*(a*c-t*o),e}function ql(e){var r=e[0],n=e[1],a=e[2],t=e[3],i=e[4],s=e[5],o=e[6],c=e[7],u=e[8],l=e[9],h=e[10],f=e[11],d=e[12],v=e[13],m=e[14],p=e[15],y=r*s-n*i,b=r*o-a*i,g=r*c-t*i,M=n*o-a*s,k=n*c-t*s,_=a*c-t*o,C=u*v-l*d,L=u*m-h*d,I=u*p-f*d,S=l*m-h*v,W=l*p-f*v,N=h*p-f*m;return y*N-b*W+g*S+M*I-k*L+_*C}function Aa(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3],o=r[4],c=r[5],u=r[6],l=r[7],h=r[8],f=r[9],d=r[10],v=r[11],m=r[12],p=r[13],y=r[14],b=r[15],g=n[0],M=n[1],k=n[2],_=n[3];return e[0]=g*a+M*o+k*h+_*m,e[1]=g*t+M*c+k*f+_*p,e[2]=g*i+M*u+k*d+_*y,e[3]=g*s+M*l+k*v+_*b,g=n[4],M=n[5],k=n[6],_=n[7],e[4]=g*a+M*o+k*h+_*m,e[5]=g*t+M*c+k*f+_*p,e[6]=g*i+M*u+k*d+_*y,e[7]=g*s+M*l+k*v+_*b,g=n[8],M=n[9],k=n[10],_=n[11],e[8]=g*a+M*o+k*h+_*m,e[9]=g*t+M*c+k*f+_*p,e[10]=g*i+M*u+k*d+_*y,e[11]=g*s+M*l+k*v+_*b,g=n[12],M=n[13],k=n[14],_=n[15],e[12]=g*a+M*o+k*h+_*m,e[13]=g*t+M*c+k*f+_*p,e[14]=g*i+M*u+k*d+_*y,e[15]=g*s+M*l+k*v+_*b,e}function El(e,r,n){var a=n[0],t=n[1],i=n[2],s,o,c,u,l,h,f,d,v,m,p,y;return r===e?(e[12]=r[0]*a+r[4]*t+r[8]*i+r[12],e[13]=r[1]*a+r[5]*t+r[9]*i+r[13],e[14]=r[2]*a+r[6]*t+r[10]*i+r[14],e[15]=r[3]*a+r[7]*t+r[11]*i+r[15]):(s=r[0],o=r[1],c=r[2],u=r[3],l=r[4],h=r[5],f=r[6],d=r[7],v=r[8],m=r[9],p=r[10],y=r[11],e[0]=s,e[1]=o,e[2]=c,e[3]=u,e[4]=l,e[5]=h,e[6]=f,e[7]=d,e[8]=v,e[9]=m,e[10]=p,e[11]=y,e[12]=s*a+l*t+v*i+r[12],e[13]=o*a+h*t+m*i+r[13],e[14]=c*a+f*t+p*i+r[14],e[15]=u*a+d*t+y*i+r[15]),e}function Ll(e,r,n){var a=n[0],t=n[1],i=n[2];return e[0]=r[0]*a,e[1]=r[1]*a,e[2]=r[2]*a,e[3]=r[3]*a,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*i,e[9]=r[9]*i,e[10]=r[10]*i,e[11]=r[11]*i,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Il(e,r,n,a){var t=a[0],i=a[1],s=a[2],o=Math.hypot(t,i,s),c,u,l,h,f,d,v,m,p,y,b,g,M,k,_,C,L,I,S,W,N,D,w,G;return o<F.EPSILON?null:(o=1/o,t*=o,i*=o,s*=o,c=Math.sin(n),u=Math.cos(n),l=1-u,h=r[0],f=r[1],d=r[2],v=r[3],m=r[4],p=r[5],y=r[6],b=r[7],g=r[8],M=r[9],k=r[10],_=r[11],C=t*t*l+u,L=i*t*l+s*c,I=s*t*l-i*c,S=t*i*l-s*c,W=i*i*l+u,N=s*i*l+t*c,D=t*s*l+i*c,w=i*s*l-t*c,G=s*s*l+u,e[0]=h*C+m*L+g*I,e[1]=f*C+p*L+M*I,e[2]=d*C+y*L+k*I,e[3]=v*C+b*L+_*I,e[4]=h*S+m*W+g*N,e[5]=f*S+p*W+M*N,e[6]=d*S+y*W+k*N,e[7]=v*S+b*W+_*N,e[8]=h*D+m*w+g*G,e[9]=f*D+p*w+M*G,e[10]=d*D+y*w+k*G,e[11]=v*D+b*w+_*G,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function Nl(e,r,n){var a=Math.sin(n),t=Math.cos(n),i=r[4],s=r[5],o=r[6],c=r[7],u=r[8],l=r[9],h=r[10],f=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=i*t+u*a,e[5]=s*t+l*a,e[6]=o*t+h*a,e[7]=c*t+f*a,e[8]=u*t-i*a,e[9]=l*t-s*a,e[10]=h*t-o*a,e[11]=f*t-c*a,e}function Cl(e,r,n){var a=Math.sin(n),t=Math.cos(n),i=r[0],s=r[1],o=r[2],c=r[3],u=r[8],l=r[9],h=r[10],f=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=i*t-u*a,e[1]=s*t-l*a,e[2]=o*t-h*a,e[3]=c*t-f*a,e[8]=i*a+u*t,e[9]=s*a+l*t,e[10]=o*a+h*t,e[11]=c*a+f*t,e}function Wl(e,r,n){var a=Math.sin(n),t=Math.cos(n),i=r[0],s=r[1],o=r[2],c=r[3],u=r[4],l=r[5],h=r[6],f=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=i*t+u*a,e[1]=s*t+l*a,e[2]=o*t+h*a,e[3]=c*t+f*a,e[4]=u*t-i*a,e[5]=l*t-s*a,e[6]=h*t-o*a,e[7]=f*t-c*a,e}function Dl(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Fl(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bl(e,r,n){var a=n[0],t=n[1],i=n[2],s=Math.hypot(a,t,i),o,c,u;return s<F.EPSILON?null:(s=1/s,a*=s,t*=s,i*=s,o=Math.sin(r),c=Math.cos(r),u=1-c,e[0]=a*a*u+c,e[1]=t*a*u+i*o,e[2]=i*a*u-t*o,e[3]=0,e[4]=a*t*u-i*o,e[5]=t*t*u+c,e[6]=i*t*u+a*o,e[7]=0,e[8]=a*i*u+t*o,e[9]=t*i*u-a*o,e[10]=i*i*u+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function zl(e,r){var n=Math.sin(r),a=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vl(e,r){var n=Math.sin(r),a=Math.cos(r);return e[0]=a,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Yl(e,r){var n=Math.sin(r),a=Math.cos(r);return e[0]=a,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pa(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3],o=a+a,c=t+t,u=i+i,l=a*o,h=a*c,f=a*u,d=t*c,v=t*u,m=i*u,p=s*o,y=s*c,b=s*u;return e[0]=1-(d+m),e[1]=h+b,e[2]=f-y,e[3]=0,e[4]=h-b,e[5]=1-(l+m),e[6]=v+p,e[7]=0,e[8]=f+y,e[9]=v-p,e[10]=1-(l+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ul(e,r){var n=new F.ARRAY_TYPE(3),a=-r[0],t=-r[1],i=-r[2],s=r[3],o=r[4],c=r[5],u=r[6],l=r[7],h=a*a+t*t+i*i+s*s;return h>0?(n[0]=(o*s+l*a+c*i-u*t)*2/h,n[1]=(c*s+l*t+u*a-o*i)*2/h,n[2]=(u*s+l*i+o*t-c*a)*2/h):(n[0]=(o*s+l*a+c*i-u*t)*2,n[1]=(c*s+l*t+u*a-o*i)*2,n[2]=(u*s+l*i+o*t-c*a)*2),Pa(e,r,n),e}function Xl(e,r){return e[0]=r[12],e[1]=r[13],e[2]=r[14],e}function wa(e,r){var n=r[0],a=r[1],t=r[2],i=r[4],s=r[5],o=r[6],c=r[8],u=r[9],l=r[10];return e[0]=Math.hypot(n,a,t),e[1]=Math.hypot(i,s,o),e[2]=Math.hypot(c,u,l),e}function Gl(e,r){var n=new F.ARRAY_TYPE(3);wa(n,r);var a=1/n[0],t=1/n[1],i=1/n[2],s=r[0]*a,o=r[1]*t,c=r[2]*i,u=r[4]*a,l=r[5]*t,h=r[6]*i,f=r[8]*a,d=r[9]*t,v=r[10]*i,m=s+l+v,p=0;return m>0?(p=Math.sqrt(m+1)*2,e[3]=.25*p,e[0]=(h-d)/p,e[1]=(f-c)/p,e[2]=(o-u)/p):s>l&&s>v?(p=Math.sqrt(1+s-l-v)*2,e[3]=(h-d)/p,e[0]=.25*p,e[1]=(o+u)/p,e[2]=(f+c)/p):l>v?(p=Math.sqrt(1+l-s-v)*2,e[3]=(f-c)/p,e[0]=(o+u)/p,e[1]=.25*p,e[2]=(h+d)/p):(p=Math.sqrt(1+v-s-l)*2,e[3]=(o-u)/p,e[0]=(f+c)/p,e[1]=(h+d)/p,e[2]=.25*p),e}function Zl(e,r,n,a){var t=r[0],i=r[1],s=r[2],o=r[3],c=t+t,u=i+i,l=s+s,h=t*c,f=t*u,d=t*l,v=i*u,m=i*l,p=s*l,y=o*c,b=o*u,g=o*l,M=a[0],k=a[1],_=a[2];return e[0]=(1-(v+p))*M,e[1]=(f+g)*M,e[2]=(d-b)*M,e[3]=0,e[4]=(f-g)*k,e[5]=(1-(h+p))*k,e[6]=(m+y)*k,e[7]=0,e[8]=(d+b)*_,e[9]=(m-y)*_,e[10]=(1-(h+v))*_,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ql(e,r,n,a,t){var i=r[0],s=r[1],o=r[2],c=r[3],u=i+i,l=s+s,h=o+o,f=i*u,d=i*l,v=i*h,m=s*l,p=s*h,y=o*h,b=c*u,g=c*l,M=c*h,k=a[0],_=a[1],C=a[2],L=t[0],I=t[1],S=t[2],W=(1-(m+y))*k,N=(d+M)*k,D=(v-g)*k,w=(d-M)*_,G=(1-(f+y))*_,fe=(p+b)*_,he=(v+g)*C,Ne=(p-b)*C,Ce=(1-(f+m))*C;return e[0]=W,e[1]=N,e[2]=D,e[3]=0,e[4]=w,e[5]=G,e[6]=fe,e[7]=0,e[8]=he,e[9]=Ne,e[10]=Ce,e[11]=0,e[12]=n[0]+L-(W*L+w*I+he*S),e[13]=n[1]+I-(N*L+G*I+Ne*S),e[14]=n[2]+S-(D*L+fe*I+Ce*S),e[15]=1,e}function $l(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=n+n,o=a+a,c=t+t,u=n*s,l=a*s,h=a*o,f=t*s,d=t*o,v=t*c,m=i*s,p=i*o,y=i*c;return e[0]=1-h-v,e[1]=l+y,e[2]=f-p,e[3]=0,e[4]=l-y,e[5]=1-u-v,e[6]=d+m,e[7]=0,e[8]=f+p,e[9]=d-m,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Hl(e,r,n,a,t,i,s){var o=1/(n-r),c=1/(t-a),u=1/(i-s);return e[0]=i*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i*2*c,e[6]=0,e[7]=0,e[8]=(n+r)*o,e[9]=(t+a)*c,e[10]=(s+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i*2*u,e[15]=0,e}function Sa(e,r,n,a,t){var i=1/Math.tan(r/2),s;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,t!=null&&t!==1/0?(s=1/(a-t),e[10]=(t+a)*s,e[14]=2*t*a*s):(e[10]=-1,e[14]=-2*a),e}var Kl=Sa;T.perspective=Kl;function Jl(e,r,n,a,t){var i=1/Math.tan(r/2),s;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,t!=null&&t!==1/0?(s=1/(a-t),e[10]=t*s,e[14]=t*a*s):(e[10]=-1,e[14]=-a),e}function jl(e,r,n,a){var t=Math.tan(r.upDegrees*Math.PI/180),i=Math.tan(r.downDegrees*Math.PI/180),s=Math.tan(r.leftDegrees*Math.PI/180),o=Math.tan(r.rightDegrees*Math.PI/180),c=2/(s+o),u=2/(t+i);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((s-o)*c*.5),e[9]=(t-i)*u*.5,e[10]=a/(n-a),e[11]=-1,e[12]=0,e[13]=0,e[14]=a*n/(n-a),e[15]=0,e}function qa(e,r,n,a,t,i,s){var o=1/(r-n),c=1/(a-t),u=1/(i-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(r+n)*o,e[13]=(t+a)*c,e[14]=(s+i)*u,e[15]=1,e}var ef=qa;T.ortho=ef;function rf(e,r,n,a,t,i,s){var o=1/(r-n),c=1/(a-t),u=1/(i-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(r+n)*o,e[13]=(t+a)*c,e[14]=i*u,e[15]=1,e}function tf(e,r,n,a){var t,i,s,o,c,u,l,h,f,d,v=r[0],m=r[1],p=r[2],y=a[0],b=a[1],g=a[2],M=n[0],k=n[1],_=n[2];return Math.abs(v-M)<F.EPSILON&&Math.abs(m-k)<F.EPSILON&&Math.abs(p-_)<F.EPSILON?Ra(e):(l=v-M,h=m-k,f=p-_,d=1/Math.hypot(l,h,f),l*=d,h*=d,f*=d,t=b*f-g*h,i=g*l-y*f,s=y*h-b*l,d=Math.hypot(t,i,s),d?(d=1/d,t*=d,i*=d,s*=d):(t=0,i=0,s=0),o=h*s-f*i,c=f*t-l*s,u=l*i-h*t,d=Math.hypot(o,c,u),d?(d=1/d,o*=d,c*=d,u*=d):(o=0,c=0,u=0),e[0]=t,e[1]=o,e[2]=l,e[3]=0,e[4]=i,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=u,e[10]=f,e[11]=0,e[12]=-(t*v+i*m+s*p),e[13]=-(o*v+c*m+u*p),e[14]=-(l*v+h*m+f*p),e[15]=1,e)}function nf(e,r,n,a){var t=r[0],i=r[1],s=r[2],o=a[0],c=a[1],u=a[2],l=t-n[0],h=i-n[1],f=s-n[2],d=l*l+h*h+f*f;d>0&&(d=1/Math.sqrt(d),l*=d,h*=d,f*=d);var v=c*f-u*h,m=u*l-o*f,p=o*h-c*l;return d=v*v+m*m+p*p,d>0&&(d=1/Math.sqrt(d),v*=d,m*=d,p*=d),e[0]=v,e[1]=m,e[2]=p,e[3]=0,e[4]=h*p-f*m,e[5]=f*v-l*p,e[6]=l*m-h*v,e[7]=0,e[8]=l,e[9]=h,e[10]=f,e[11]=0,e[12]=t,e[13]=i,e[14]=s,e[15]=1,e}function af(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function sf(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function of(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e[4]=r[4]+n[4],e[5]=r[5]+n[5],e[6]=r[6]+n[6],e[7]=r[7]+n[7],e[8]=r[8]+n[8],e[9]=r[9]+n[9],e[10]=r[10]+n[10],e[11]=r[11]+n[11],e[12]=r[12]+n[12],e[13]=r[13]+n[13],e[14]=r[14]+n[14],e[15]=r[15]+n[15],e}function Ea(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e[4]=r[4]-n[4],e[5]=r[5]-n[5],e[6]=r[6]-n[6],e[7]=r[7]-n[7],e[8]=r[8]-n[8],e[9]=r[9]-n[9],e[10]=r[10]-n[10],e[11]=r[11]-n[11],e[12]=r[12]-n[12],e[13]=r[13]-n[13],e[14]=r[14]-n[14],e[15]=r[15]-n[15],e}function uf(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*n,e[9]=r[9]*n,e[10]=r[10]*n,e[11]=r[11]*n,e[12]=r[12]*n,e[13]=r[13]*n,e[14]=r[14]*n,e[15]=r[15]*n,e}function cf(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e[3]=r[3]+n[3]*a,e[4]=r[4]+n[4]*a,e[5]=r[5]+n[5]*a,e[6]=r[6]+n[6]*a,e[7]=r[7]+n[7]*a,e[8]=r[8]+n[8]*a,e[9]=r[9]+n[9]*a,e[10]=r[10]+n[10]*a,e[11]=r[11]+n[11]*a,e[12]=r[12]+n[12]*a,e[13]=r[13]+n[13]*a,e[14]=r[14]+n[14]*a,e[15]=r[15]+n[15]*a,e}function lf(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}function ff(e,r){var n=e[0],a=e[1],t=e[2],i=e[3],s=e[4],o=e[5],c=e[6],u=e[7],l=e[8],h=e[9],f=e[10],d=e[11],v=e[12],m=e[13],p=e[14],y=e[15],b=r[0],g=r[1],M=r[2],k=r[3],_=r[4],C=r[5],L=r[6],I=r[7],S=r[8],W=r[9],N=r[10],D=r[11],w=r[12],G=r[13],fe=r[14],he=r[15];return Math.abs(n-b)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(a-g)<=F.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(t-M)<=F.EPSILON*Math.max(1,Math.abs(t),Math.abs(M))&&Math.abs(i-k)<=F.EPSILON*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(s-_)<=F.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(o-C)<=F.EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(c-L)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(u-I)<=F.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(l-S)<=F.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-W)<=F.EPSILON*Math.max(1,Math.abs(h),Math.abs(W))&&Math.abs(f-N)<=F.EPSILON*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(d-D)<=F.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(v-w)<=F.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-G)<=F.EPSILON*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(p-fe)<=F.EPSILON*Math.max(1,Math.abs(p),Math.abs(fe))&&Math.abs(y-he)<=F.EPSILON*Math.max(1,Math.abs(y),Math.abs(he))}var hf=Aa;T.mul=hf;var df=Ea;T.sub=df});var it=A(P=>{"use strict";function at(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(n){return typeof n}:at=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},at(e)}Object.defineProperty(P,"__esModule",{value:!0});P.create=Na;P.clone=pf;P.fromValues=mf;P.copy=yf;P.set=gf;P.add=Mf;P.subtract=Ca;P.multiply=Wa;P.divide=Da;P.ceil=bf;P.floor=xf;P.min=_f;P.max=Of;P.round=kf;P.scale=Tf;P.scaleAndAdd=Rf;P.distance=Fa;P.squaredDistance=Ba;P.length=za;P.squaredLength=Va;P.negate=Af;P.inverse=Pf;P.normalize=wf;P.dot=Sf;P.cross=qf;P.lerp=Ef;P.random=Lf;P.transformMat4=If;P.transformQuat=Nf;P.zero=Cf;P.str=Wf;P.exactEquals=Df;P.equals=Ff;P.forEach=P.sqrLen=P.len=P.sqrDist=P.dist=P.div=P.mul=P.sub=void 0;var ae=vf(Be());function Ia(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Ia=function(t){return t?n:r})(e)}function vf(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||at(e)!=="object"&&typeof e!="function")return{default:e};var n=Ia(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function Na(){var e=new ae.ARRAY_TYPE(4);return ae.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function pf(e){var r=new ae.ARRAY_TYPE(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function mf(e,r,n,a){var t=new ae.ARRAY_TYPE(4);return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function yf(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function gf(e,r,n,a,t){return e[0]=r,e[1]=n,e[2]=a,e[3]=t,e}function Mf(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e}function Ca(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e}function Wa(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e[3]=r[3]*n[3],e}function Da(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e[3]=r[3]/n[3],e}function bf(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e[3]=Math.ceil(r[3]),e}function xf(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e[3]=Math.floor(r[3]),e}function _f(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e[3]=Math.min(r[3],n[3]),e}function Of(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e[3]=Math.max(r[3],n[3]),e}function kf(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e[3]=Math.round(r[3]),e}function Tf(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e}function Rf(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e[3]=r[3]+n[3]*a,e}function Fa(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2],i=r[3]-e[3];return Math.hypot(n,a,t,i)}function Ba(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2],i=r[3]-e[3];return n*n+a*a+t*t+i*i}function za(e){var r=e[0],n=e[1],a=e[2],t=e[3];return Math.hypot(r,n,a,t)}function Va(e){var r=e[0],n=e[1],a=e[2],t=e[3];return r*r+n*n+a*a+t*t}function Af(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}function Pf(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}function wf(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=n*n+a*a+t*t+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=a*s,e[2]=t*s,e[3]=i*s,e}function Sf(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}function qf(e,r,n,a){var t=n[0]*a[1]-n[1]*a[0],i=n[0]*a[2]-n[2]*a[0],s=n[0]*a[3]-n[3]*a[0],o=n[1]*a[2]-n[2]*a[1],c=n[1]*a[3]-n[3]*a[1],u=n[2]*a[3]-n[3]*a[2],l=r[0],h=r[1],f=r[2],d=r[3];return e[0]=h*u-f*c+d*o,e[1]=-(l*u)+f*s-d*i,e[2]=l*c-h*s+d*t,e[3]=-(l*o)+h*i-f*t,e}function Ef(e,r,n,a){var t=r[0],i=r[1],s=r[2],o=r[3];return e[0]=t+a*(n[0]-t),e[1]=i+a*(n[1]-i),e[2]=s+a*(n[2]-s),e[3]=o+a*(n[3]-o),e}function Lf(e,r){r=r||1;var n,a,t,i,s,o;do n=ae.RANDOM()*2-1,a=ae.RANDOM()*2-1,s=n*n+a*a;while(s>=1);do t=ae.RANDOM()*2-1,i=ae.RANDOM()*2-1,o=t*t+i*i;while(o>=1);var c=Math.sqrt((1-s)/o);return e[0]=r*n,e[1]=r*a,e[2]=r*t*c,e[3]=r*i*c,e}function If(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3];return e[0]=n[0]*a+n[4]*t+n[8]*i+n[12]*s,e[1]=n[1]*a+n[5]*t+n[9]*i+n[13]*s,e[2]=n[2]*a+n[6]*t+n[10]*i+n[14]*s,e[3]=n[3]*a+n[7]*t+n[11]*i+n[15]*s,e}function Nf(e,r,n){var a=r[0],t=r[1],i=r[2],s=n[0],o=n[1],c=n[2],u=n[3],l=u*a+o*i-c*t,h=u*t+c*a-s*i,f=u*i+s*t-o*a,d=-s*a-o*t-c*i;return e[0]=l*u+d*-s+h*-c-f*-o,e[1]=h*u+d*-o+f*-s-l*-c,e[2]=f*u+d*-c+l*-o-h*-s,e[3]=r[3],e}function Cf(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Wf(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Df(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]}function Ff(e,r){var n=e[0],a=e[1],t=e[2],i=e[3],s=r[0],o=r[1],c=r[2],u=r[3];return Math.abs(n-s)<=ae.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-o)<=ae.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(t-c)<=ae.EPSILON*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(i-u)<=ae.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))}var Bf=Ca;P.sub=Bf;var zf=Wa;P.mul=zf;var Vf=Da;P.div=Vf;var Yf=Fa;P.dist=Yf;var Uf=Ba;P.sqrDist=Uf;var Xf=za;P.len=Xf;var Gf=Va;P.sqrLen=Gf;var Zf=function(){var e=Na();return function(r,n,a,t,i,s){var o,c;for(n||(n=4),a||(a=0),t?c=Math.min(t*n+a,r.length):c=r.length,o=a;o<c;o+=n)e[0]=r[o],e[1]=r[o+1],e[2]=r[o+2],e[3]=r[o+3],i(e,e,s),r[o]=e[0],r[o+1]=e[1],r[o+2]=e[2],r[o+3]=e[3];return r}}();P.forEach=Zf});var Kt=A(ct=>{"use strict";var rr=X(),Qf=j();Object.defineProperty(ct,"__esModule",{value:!0});ct.default=void 0;var $f=rr($()),Hf=rr(H()),Kf=rr(se()),Jf=rr(oe()),Ya=rr(ue()),jf=rr(zt()),Gt=ve(),Ua=$e(),Z=st(La()),eh=st(Vr()),rh=st(Pe()),th=st(it());function Xa(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Xa=function(t){return t?n:r})(e)}function st(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||Qf(e)!=="object"&&typeof e!="function")return{default:e};var n=Xa(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function nh(e){var r=ah();return function(){var a=(0,Ya.default)(e),t;if(r){var i=(0,Ya.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,Jf.default)(this,t)}}function ah(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Zt;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(Zt||(Zt={}));var ih=45*Math.PI/180,sh=1,Qt=.1,$t=500,oh=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Ht=function(e){(0,Kf.default)(n,e);var r=nh(n);function n(a){var t;return(0,$f.default)(this,n),t=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(a)?t.copy(a):t.identity(),t}return(0,Hf.default)(n,[{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"INDICES",get:function(){return Zt}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:"set",value:function(t,i,s,o,c,u,l,h,f,d,v,m,p,y,b,g){return this[0]=t,this[1]=i,this[2]=s,this[3]=o,this[4]=c,this[5]=u,this[6]=l,this[7]=h,this[8]=f,this[9]=d,this[10]=v,this[11]=m,this[12]=p,this[13]=y,this[14]=b,this[15]=g,this.check()}},{key:"setRowMajor",value:function(t,i,s,o,c,u,l,h,f,d,v,m,p,y,b,g){return this[0]=t,this[1]=c,this[2]=f,this[3]=p,this[4]=i,this[5]=u,this[6]=d,this[7]=y,this[8]=s,this[9]=l,this[10]=v,this[11]=b,this[12]=o,this[13]=h,this[14]=m,this[15]=g,this.check()}},{key:"toRowMajor",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:"identity",value:function(){return this.copy(oh)}},{key:"fromObject",value:function(t){return this.check()}},{key:"fromQuaternion",value:function(t){return Z.fromQuat(this,t),this.check()}},{key:"frustum",value:function(t){var i=t.left,s=t.right,o=t.bottom,c=t.top,u=t.near,l=u===void 0?Qt:u,h=t.far,f=h===void 0?$t:h;return f===1/0?lh(this,i,s,o,c,l):Z.frustum(this,i,s,o,c,l,f),this.check()}},{key:"lookAt",value:function(t){var i=t.eye,s=t.center,o=s===void 0?[0,0,0]:s,c=t.up,u=c===void 0?[0,1,0]:c;return Z.lookAt(this,i,o,u),this.check()}},{key:"ortho",value:function(t){var i=t.left,s=t.right,o=t.bottom,c=t.top,u=t.near,l=u===void 0?Qt:u,h=t.far,f=h===void 0?$t:h;return Z.ortho(this,i,s,o,c,l,f),this.check()}},{key:"orthographic",value:function(t){var i=t.fovy,s=i===void 0?ih:i,o=t.aspect,c=o===void 0?sh:o,u=t.focalDistance,l=u===void 0?1:u,h=t.near,f=h===void 0?Qt:h,d=t.far,v=d===void 0?$t:d;Ga(s);var m=s/2,p=l*Math.tan(m),y=p*c;return this.ortho({left:-y,right:y,bottom:-p,top:p,near:f,far:v})}},{key:"perspective",value:function(t){var i=t.fovy,s=i===void 0?45*Math.PI/180:i,o=t.aspect,c=o===void 0?1:o,u=t.near,l=u===void 0?.1:u,h=t.far,f=h===void 0?500:h;return Ga(s),Z.perspective(this,s,c,l,f),this.check()}},{key:"determinant",value:function(){return Z.determinant(this)}},{key:"getScale",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:"getTranslation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:"getRotation",value:function(t,i){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var s=this.getScale(i),o=1/s[0],c=1/s[1],u=1/s[2];return t[0]=this[0]*o,t[1]=this[1]*c,t[2]=this[2]*u,t[3]=0,t[4]=this[4]*o,t[5]=this[5]*c,t[6]=this[6]*u,t[7]=0,t[8]=this[8]*o,t[9]=this[9]*c,t[10]=this[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"getRotationMatrix3",value:function(t,i){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];var s=this.getScale(i),o=1/s[0],c=1/s[1],u=1/s[2];return t[0]=this[0]*o,t[1]=this[1]*c,t[2]=this[2]*u,t[3]=this[4]*o,t[4]=this[5]*c,t[5]=this[6]*u,t[6]=this[8]*o,t[7]=this[9]*c,t[8]=this[10]*u,t}},{key:"transpose",value:function(){return Z.transpose(this,this),this.check()}},{key:"invert",value:function(){return Z.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return Z.multiply(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return Z.multiply(this,this,t),this.check()}},{key:"rotateX",value:function(t){return Z.rotateX(this,this,t),this.check()}},{key:"rotateY",value:function(t){return Z.rotateY(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return Z.rotateZ(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}},{key:"rotateAxis",value:function(t,i){return Z.rotate(this,this,t,i),this.check()}},{key:"scale",value:function(t){return Z.scale(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}},{key:"translate",value:function(t){return Z.translate(this,this,t),this.check()}},{key:"transform",value:function(t,i){return t.length===4?(i=th.transformMat4(i||[-0,-0,-0,-0],t,this),(0,Gt.checkVector)(i,4),i):this.transformAsPoint(t,i)}},{key:"transformAsPoint",value:function(t,i){var s=t.length,o;switch(s){case 2:o=eh.transformMat4(i||[-0,-0],t,this);break;case 3:o=rh.transformMat4(i||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,Gt.checkVector)(o,t.length),o}},{key:"transformAsVector",value:function(t,i){var s;switch(t.length){case 2:s=(0,Ua.vec2_transformMat4AsVector)(i||[-0,-0],t,this);break;case 3:s=(0,Ua.vec3_transformMat4AsVector)(i||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,Gt.checkVector)(s,t.length),s}},{key:"transformPoint",value:function(t,i){return this.transformAsPoint(t,i)}},{key:"transformVector",value:function(t,i){return this.transformAsPoint(t,i)}},{key:"transformDirection",value:function(t,i){return this.transformAsVector(t,i)}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,i,s){return this.identity().translate([t,i,s])}}],[{key:"IDENTITY",get:function(){return ch()}},{key:"ZERO",get:function(){return uh()}}]),n}(jf.default);ct.default=Ht;var ot,ut;function uh(){return ot||(ot=new Ht([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ot)),ot}function ch(){return ut||(ut=new Ht,Object.freeze(ut)),ut}function Ga(e){if(e>Math.PI*2)throw Error("expected radians")}function lh(e,r,n,a,t,i){var s=2*i/(n-r),o=2*i/(t-a),c=(n+r)/(n-r),u=(t+a)/(t-a),l=-1,h=-1,f=-2*i;return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=c,e[9]=u,e[10]=l,e[11]=h,e[12]=0,e[13]=0,e[14]=f,e[15]=0,e}});var ni=A(x=>{"use strict";function lt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lt=function(n){return typeof n}:lt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lt(e)}Object.defineProperty(x,"__esModule",{value:!0});x.create=Jt;x.identity=hh;x.setAxisAngle=Qa;x.getAxisAngle=dh;x.getAngle=vh;x.multiply=$a;x.rotateX=ph;x.rotateY=mh;x.rotateZ=yh;x.calculateW=gh;x.exp=Ha;x.ln=Ka;x.pow=Mh;x.slerp=ht;x.random=bh;x.invert=xh;x.conjugate=_h;x.fromMat3=Ja;x.fromEuler=Oh;x.str=kh;x.setAxes=x.sqlerp=x.rotationTo=x.equals=x.exactEquals=x.normalize=x.sqrLen=x.squaredLength=x.len=x.length=x.lerp=x.dot=x.scale=x.mul=x.add=x.set=x.copy=x.fromValues=x.clone=void 0;var Ue=ft(Be()),fh=ft(Vt()),ke=ft(Pe()),re=ft(it());function Za(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Za=function(t){return t?n:r})(e)}function ft(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||lt(e)!=="object"&&typeof e!="function")return{default:e};var n=Za(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function Jt(){var e=new Ue.ARRAY_TYPE(4);return Ue.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function hh(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Qa(e,r,n){n=n*.5;var a=Math.sin(n);return e[0]=a*r[0],e[1]=a*r[1],e[2]=a*r[2],e[3]=Math.cos(n),e}function dh(e,r){var n=Math.acos(r[3])*2,a=Math.sin(n/2);return a>Ue.EPSILON?(e[0]=r[0]/a,e[1]=r[1]/a,e[2]=r[2]/a):(e[0]=1,e[1]=0,e[2]=0),n}function vh(e,r){var n=ei(e,r);return Math.acos(2*n*n-1)}function $a(e,r,n){var a=r[0],t=r[1],i=r[2],s=r[3],o=n[0],c=n[1],u=n[2],l=n[3];return e[0]=a*l+s*o+t*u-i*c,e[1]=t*l+s*c+i*o-a*u,e[2]=i*l+s*u+a*c-t*o,e[3]=s*l-a*o-t*c-i*u,e}function ph(e,r,n){n*=.5;var a=r[0],t=r[1],i=r[2],s=r[3],o=Math.sin(n),c=Math.cos(n);return e[0]=a*c+s*o,e[1]=t*c+i*o,e[2]=i*c-t*o,e[3]=s*c-a*o,e}function mh(e,r,n){n*=.5;var a=r[0],t=r[1],i=r[2],s=r[3],o=Math.sin(n),c=Math.cos(n);return e[0]=a*c-i*o,e[1]=t*c+s*o,e[2]=i*c+a*o,e[3]=s*c-t*o,e}function yh(e,r,n){n*=.5;var a=r[0],t=r[1],i=r[2],s=r[3],o=Math.sin(n),c=Math.cos(n);return e[0]=a*c+t*o,e[1]=t*c-a*o,e[2]=i*c+s*o,e[3]=s*c-i*o,e}function gh(e,r){var n=r[0],a=r[1],t=r[2];return e[0]=n,e[1]=a,e[2]=t,e[3]=Math.sqrt(Math.abs(1-n*n-a*a-t*t)),e}function Ha(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=Math.sqrt(n*n+a*a+t*t),o=Math.exp(i),c=s>0?o*Math.sin(s)/s:0;return e[0]=n*c,e[1]=a*c,e[2]=t*c,e[3]=o*Math.cos(s),e}function Ka(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=Math.sqrt(n*n+a*a+t*t),o=s>0?Math.atan2(s,i)/s:0;return e[0]=n*o,e[1]=a*o,e[2]=t*o,e[3]=.5*Math.log(n*n+a*a+t*t+i*i),e}function Mh(e,r,n){return Ka(e,r),ja(e,e,n),Ha(e,e),e}function ht(e,r,n,a){var t=r[0],i=r[1],s=r[2],o=r[3],c=n[0],u=n[1],l=n[2],h=n[3],f,d,v,m,p;return d=t*c+i*u+s*l+o*h,d<0&&(d=-d,c=-c,u=-u,l=-l,h=-h),1-d>Ue.EPSILON?(f=Math.acos(d),v=Math.sin(f),m=Math.sin((1-a)*f)/v,p=Math.sin(a*f)/v):(m=1-a,p=a),e[0]=m*t+p*c,e[1]=m*i+p*u,e[2]=m*s+p*l,e[3]=m*o+p*h,e}function bh(e){var r=Ue.RANDOM(),n=Ue.RANDOM(),a=Ue.RANDOM(),t=Math.sqrt(1-r),i=Math.sqrt(r);return e[0]=t*Math.sin(2*Math.PI*n),e[1]=t*Math.cos(2*Math.PI*n),e[2]=i*Math.sin(2*Math.PI*a),e[3]=i*Math.cos(2*Math.PI*a),e}function xh(e,r){var n=r[0],a=r[1],t=r[2],i=r[3],s=n*n+a*a+t*t+i*i,o=s?1/s:0;return e[0]=-n*o,e[1]=-a*o,e[2]=-t*o,e[3]=i*o,e}function _h(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=r[3],e}function Ja(e,r){var n=r[0]+r[4]+r[8],a;if(n>0)a=Math.sqrt(n+1),e[3]=.5*a,a=.5/a,e[0]=(r[5]-r[7])*a,e[1]=(r[6]-r[2])*a,e[2]=(r[1]-r[3])*a;else{var t=0;r[4]>r[0]&&(t=1),r[8]>r[t*3+t]&&(t=2);var i=(t+1)%3,s=(t+2)%3;a=Math.sqrt(r[t*3+t]-r[i*3+i]-r[s*3+s]+1),e[t]=.5*a,a=.5/a,e[3]=(r[i*3+s]-r[s*3+i])*a,e[i]=(r[i*3+t]+r[t*3+i])*a,e[s]=(r[s*3+t]+r[t*3+s])*a}return e}function Oh(e,r,n,a){var t=.5*Math.PI/180;r*=t,n*=t,a*=t;var i=Math.sin(r),s=Math.cos(r),o=Math.sin(n),c=Math.cos(n),u=Math.sin(a),l=Math.cos(a);return e[0]=i*c*l-s*o*u,e[1]=s*o*l+i*c*u,e[2]=s*c*u-i*o*l,e[3]=s*c*l+i*o*u,e}function kh(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Th=re.clone;x.clone=Th;var Rh=re.fromValues;x.fromValues=Rh;var Ah=re.copy;x.copy=Ah;var Ph=re.set;x.set=Ph;var wh=re.add;x.add=wh;var Sh=$a;x.mul=Sh;var ja=re.scale;x.scale=ja;var ei=re.dot;x.dot=ei;var qh=re.lerp;x.lerp=qh;var ri=re.length;x.length=ri;var Eh=ri;x.len=Eh;var ti=re.squaredLength;x.squaredLength=ti;var Lh=ti;x.sqrLen=Lh;var jt=re.normalize;x.normalize=jt;var Ih=re.exactEquals;x.exactEquals=Ih;var Nh=re.equals;x.equals=Nh;var Ch=function(){var e=ke.create(),r=ke.fromValues(1,0,0),n=ke.fromValues(0,1,0);return function(a,t,i){var s=ke.dot(t,i);return s<-.999999?(ke.cross(e,r,t),ke.len(e)<1e-6&&ke.cross(e,n,t),ke.normalize(e,e),Qa(a,e,Math.PI),a):s>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(ke.cross(e,t,i),a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=1+s,jt(a,a))}}();x.rotationTo=Ch;var Wh=function(){var e=Jt(),r=Jt();return function(n,a,t,i,s,o){return ht(e,a,s,o),ht(r,t,i,o),ht(n,e,r,2*o*(1-o)),n}}();x.sqlerp=Wh;var Dh=function(){var e=fh.create();return function(r,n,a,t){return e[0]=a[0],e[3]=a[1],e[6]=a[2],e[1]=t[0],e[4]=t[1],e[7]=t[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],jt(r,Ja(r,e))}}();x.setAxes=Dh});var en=A(dt=>{"use strict";var Xe=X(),Fh=j();Object.defineProperty(dt,"__esModule",{value:!0});dt.default=void 0;var Bh=Xe($()),zh=Xe(H()),Vh=Xe(se()),Yh=Xe(oe()),ai=Xe(ue()),Uh=Xe(Mr()),xr=ve(),Xh=Xe(Bt()),Y=si(ni()),Gh=si(it());function ii(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(ii=function(t){return t?n:r})(e)}function si(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||Fh(e)!=="object"&&typeof e!="function")return{default:e};var n=ii(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function Zh(e){var r=Qh();return function(){var a=(0,ai.default)(e),t;if(r){var i=(0,ai.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,Yh.default)(this,t)}}function Qh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $h=[0,0,0,1],Hh=function(e){(0,Vh.default)(n,e);var r=Zh(n);function n(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return(0,Bh.default)(this,n),a=r.call(this,-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?a.copy(t):a.set(t,i,s,o),a}return(0,zh.default)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,i,s,o){return this[0]=t,this[1]=i,this[2]=s,this[3]=o,this.check()}},{key:"fromObject",value:function(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}},{key:"fromMatrix3",value:function(t){return Y.fromMat3(this,t),this.check()}},{key:"fromAxisRotation",value:function(t,i){return Y.setAxisAngle(this,t,i),this.check()}},{key:"identity",value:function(){return Y.identity(this),this.check()}},{key:"setAxisAngle",value:function(t,i){return this.fromAxisRotation(t,i)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=(0,xr.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=(0,xr.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=(0,xr.checkNumber)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=(0,xr.checkNumber)(t)}},{key:"len",value:function(){return Y.length(this)}},{key:"lengthSquared",value:function(){return Y.squaredLength(this)}},{key:"dot",value:function(t){return Y.dot(this,t)}},{key:"rotationTo",value:function(t,i){return Y.rotationTo(this,t,i),this.check()}},{key:"add",value:function(t){return Y.add(this,this,t),this.check()}},{key:"calculateW",value:function(){return Y.calculateW(this,this),this.check()}},{key:"conjugate",value:function(){return Y.conjugate(this,this),this.check()}},{key:"invert",value:function(){return Y.invert(this,this),this.check()}},{key:"lerp",value:function(t,i,s){return s===void 0?this.lerp(this,t,i):(Y.lerp(this,t,i,s),this.check())}},{key:"multiplyRight",value:function(t){return Y.multiply(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t){return Y.multiply(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),i=t>0?1/t:0;return this[0]=this[0]*i,this[1]=this[1]*i,this[2]=this[2]*i,this[3]=this[3]*i,t===0&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return Y.rotateX(this,this,t),this.check()}},{key:"rotateY",value:function(t){return Y.rotateY(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return Y.rotateZ(this,this,t),this.check()}},{key:"scale",value:function(t){return Y.scale(this,this,t),this.check()}},{key:"slerp",value:function(t,i,s){var o,c,u;switch(arguments.length){case 1:var l=t,h=l.start;o=h===void 0?$h:h,c=l.target,u=l.ratio;break;case 2:o=this,c=t,u=i;break;default:o=t,c=i,u=s}return Y.slerp(this,o,c,u),this.check()}},{key:"transformVector4",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Xh.default;return Gh.transformQuat(i,t,this),(0,xr.checkVector)(i,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,i){return this.setAxisAngle(t,i)}},{key:"premultiply",value:function(t){return this.multiplyLeft(t)}},{key:"multiply",value:function(t){return this.multiplyRight(t)}}]),n}(Uh.default);dt.default=Hh});var oi=A((_d,_r)=>{function Kh(e){if(Array.isArray(e))return e}_r.exports=Kh,_r.exports.__esModule=!0,_r.exports.default=_r.exports});var ui=A((Od,Or)=>{function Jh(e,r){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,t,i,s,o=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,r===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(o.push(a.value),o.length!==r);c=!0);}catch(l){u=!0,t=l}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw t}}return o}}Or.exports=Jh,Or.exports.__esModule=!0,Or.exports.default=Or.exports});var ci=A((kd,kr)=>{function jh(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}kr.exports=jh,kr.exports.__esModule=!0,kr.exports.default=kr.exports});var fi=A((Td,Tr)=>{var li=ci();function e0(e,r){if(!!e){if(typeof e=="string")return li(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return li(e,r)}}Tr.exports=e0,Tr.exports.__esModule=!0,Tr.exports.default=Tr.exports});var hi=A((Rd,Rr)=>{function r0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Rr.exports=r0,Rr.exports.__esModule=!0,Rr.exports.default=Rr.exports});var vt=A((Ad,Ar)=>{var t0=oi(),n0=ui(),a0=fi(),i0=hi();function s0(e,r){return t0(e)||n0(e,r)||a0(e,r)||i0()}Ar.exports=s0,Ar.exports.__esModule=!0,Ar.exports.default=Ar.exports});var pt=A((Pd,Pr)=>{var o0=Et();function u0(e,r,n){return r=o0(r),r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}Pr.exports=u0,Pr.exports.__esModule=!0,Pr.exports.default=Pr.exports});var pi=A(yt=>{"use strict";var wr=X(),c0=j();Object.defineProperty(yt,"__esModule",{value:!0});yt.default=void 0;var l0=wr(vt()),f0=wr($()),h0=wr(H()),mt=wr(pt()),d0=wr($r()),Q=de(),v0=p0(Pe());function di(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(di=function(t){return t?n:r})(e)}function p0(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||c0(e)!=="object"&&typeof e!="function")return{default:e};var n=di(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}var vi=1e-6,m0=6371e3,y0=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.phi,a=n===void 0?0:n,t=r.theta,i=t===void 0?0:t,s=r.radius,o=s===void 0?1:s,c=r.bearing,u=r.pitch,l=r.altitude,h=r.radiusScale,f=h===void 0?m0:h;(0,f0.default)(this,e),(0,mt.default)(this,"phi",void 0),(0,mt.default)(this,"theta",void 0),(0,mt.default)(this,"radius",void 0),(0,mt.default)(this,"radiusScale",void 0),this.phi=a,this.theta=i,this.radius=o||l||1,this.radiusScale=f||1,c!==void 0&&(this.bearing=c),u!==void 0&&(this.pitch=u),this.check()}return(0,h0.default)(e,[{key:"toString",value:function(){return this.formatString(Q.config)}},{key:"formatString",value:function(n){var a=n.printTypes,t=a===void 0?!1:a,i=Q.formatValue;return"".concat(t?"Spherical":"","[rho:").concat(i(this.radius),",theta:").concat(i(this.theta),",phi:").concat(i(this.phi),"]")}},{key:"equals",value:function(n){return(0,Q.equals)(this.radius,n.radius)&&(0,Q.equals)(this.theta,n.theta)&&(0,Q.equals)(this.phi,n.phi)}},{key:"exactEquals",value:function(n){return this.radius===n.radius&&this.theta===n.theta&&this.phi===n.phi}},{key:"bearing",get:function(){return 180-(0,Q.degrees)(this.phi)},set:function(n){this.phi=Math.PI-(0,Q.radians)(n)}},{key:"pitch",get:function(){return(0,Q.degrees)(this.theta)},set:function(n){this.theta=(0,Q.radians)(n)}},{key:"longitude",get:function(){return(0,Q.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,Q.degrees)(this.theta)}},{key:"lng",get:function(){return(0,Q.degrees)(this.phi)}},{key:"lat",get:function(){return(0,Q.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}},{key:"set",value:function(n,a,t){return this.radius=n,this.phi=a,this.theta=t,this.check()}},{key:"clone",value:function(){return new e().copy(this)}},{key:"copy",value:function(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this.check()}},{key:"fromLngLatZ",value:function(n){var a=(0,l0.default)(n,3),t=a[0],i=a[1],s=a[2];return this.radius=1+s/this.radiusScale,this.phi=(0,Q.radians)(i),this.theta=(0,Q.radians)(t),this.check()}},{key:"fromVector3",value:function(n){return this.radius=v0.length(n),this.radius>0&&(this.theta=Math.atan2(n[0],n[1]),this.phi=Math.acos((0,Q.clamp)(n[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new d0.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){return this.phi=Math.max(vi,Math.min(Math.PI-vi,this.phi)),this}},{key:"check",value:function(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}]),e}();yt.default=y0});var rn=A(Mt=>{"use strict";var Se=X();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.default=void 0;var g0=Se(vt()),M0=Se($()),b0=Se(H()),x0=Se(se()),_0=Se(oe()),mi=Se(ue()),O0=Se(Mr()),yi=Se(en()),tr=de(),ie=ve();function k0(e){var r=T0();return function(){var a=(0,mi.default)(e),t;if(r){var i=(0,mi.default)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,_0.default)(this,t)}}function T0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var gt="Unknown Euler angle order",nr=.99999,U;(function(e){e[e.ZYX=0]="ZYX",e[e.YXZ=1]="YXZ",e[e.XZY=2]="XZY",e[e.ZXY=3]="ZXY",e[e.YZX=4]="YZX",e[e.XYZ=5]="XYZ"})(U||(U={}));var R0=function(e){(0,x0.default)(n,e);var r=k0(n);function n(){var a,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n.DefaultOrder;if((0,M0.default)(this,n),a=r.call(this,-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])){var c;(c=a).fromVector3.apply(c,arguments)}else a.set(t,i,s,o);return a}return(0,b0.default)(n,[{key:"ELEMENTS",get:function(){return 4}},{key:"fromQuaternion",value:function(t){var i=(0,g0.default)(t,4),s=i[0],o=i[1],c=i[2],u=i[3],l=o*o,h=-2*(l+c*c)+1,f=2*(s*o+u*c),d=-2*(s*c-u*o),v=2*(o*c+u*s),m=-2*(s*s+l)+1;d=d>1?1:d,d=d<-1?-1:d;var p=Math.atan2(v,m),y=Math.asin(d),b=Math.atan2(f,h);return this.set(p,y,b,n.RollPitchYaw)}},{key:"fromObject",value:function(t){throw new Error("not implemented")}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=i,this[2]=s,this[3]=Number.isFinite(o)?o:this[3],this.check()}},{key:"validate",value:function(){return A0(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t[i]=this[0],t[i+1]=this[1],t[i+2]=this[2],t[i+3]=this[3],t}},{key:"toVector3",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=(0,ie.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=(0,ie.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=(0,ie.checkNumber)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){this[0]=(0,ie.checkNumber)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){this[1]=(0,ie.checkNumber)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){this[2]=(0,ie.checkNumber)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){this[0]=(0,ie.checkNumber)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){this[1]=(0,ie.checkNumber)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){this[2]=(0,ie.checkNumber)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){this[0]=(0,ie.checkNumber)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){this[1]=(0,ie.checkNumber)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){this[2]=(0,ie.checkNumber)(t)}},{key:"order",get:function(){return this[3]},set:function(t){this[3]=P0(t)}},{key:"fromVector3",value:function(t,i){return this.set(t[0],t[1],t[2],Number.isFinite(i)?i:this[3])}},{key:"fromArray",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this[0]=t[0+i],this[1]=t[1+i],this[2]=t[2+i],t[3]!==void 0&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,i,s){return this.set(t,i,s,U.ZYX)}},{key:"fromRotationMatrix",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.DefaultOrder;return this._fromRotationMatrix(t,i),this.check()}},{key:"getRotationMatrix",value:function(t){return this._getRotationMatrix(t)}},{key:"getQuaternion",value:function(){var t=new yi.default;switch(this[4]){case U.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case U.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case U.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case U.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case U.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case U.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(gt)}}},{key:"_fromRotationMatrix",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.DefaultOrder,s=t[0],o=t[4],c=t[8],u=t[1],l=t[5],h=t[9],f=t[2],d=t[6],v=t[10];switch(i=i||this[3],i){case n.XYZ:this[1]=Math.asin((0,tr.clamp)(c,-1,1)),Math.abs(c)<nr?(this[0]=Math.atan2(-h,v),this[2]=Math.atan2(-o,s)):(this[0]=Math.atan2(d,l),this[2]=0);break;case n.YXZ:this[0]=Math.asin(-(0,tr.clamp)(h,-1,1)),Math.abs(h)<nr?(this[1]=Math.atan2(c,v),this[2]=Math.atan2(u,l)):(this[1]=Math.atan2(-f,s),this[2]=0);break;case n.ZXY:this[0]=Math.asin((0,tr.clamp)(d,-1,1)),Math.abs(d)<nr?(this[1]=Math.atan2(-f,v),this[2]=Math.atan2(-o,l)):(this[1]=0,this[2]=Math.atan2(u,s));break;case n.ZYX:this[1]=Math.asin(-(0,tr.clamp)(f,-1,1)),Math.abs(f)<nr?(this[0]=Math.atan2(d,v),this[2]=Math.atan2(u,s)):(this[0]=0,this[2]=Math.atan2(-o,l));break;case n.YZX:this[2]=Math.asin((0,tr.clamp)(u,-1,1)),Math.abs(u)<nr?(this[0]=Math.atan2(-h,l),this[1]=Math.atan2(-f,s)):(this[0]=0,this[1]=Math.atan2(c,v));break;case n.XZY:this[2]=Math.asin(-(0,tr.clamp)(o,-1,1)),Math.abs(o)<nr?(this[0]=Math.atan2(d,l),this[1]=Math.atan2(c,s)):(this[0]=Math.atan2(-h,v),this[1]=0);break;default:throw new Error(gt)}return this[3]=i,this}},{key:"_getRotationMatrix",value:function(t){var i=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],s=this.x,o=this.y,c=this.z,u=Math.cos(s),l=Math.cos(o),h=Math.cos(c),f=Math.sin(s),d=Math.sin(o),v=Math.sin(c);switch(this[3]){case n.XYZ:{var m=u*h,p=u*v,y=f*h,b=f*v;i[0]=l*h,i[4]=-l*v,i[8]=d,i[1]=p+y*d,i[5]=m-b*d,i[9]=-f*l,i[2]=b-m*d,i[6]=y+p*d,i[10]=u*l;break}case n.YXZ:{var g=l*h,M=l*v,k=d*h,_=d*v;i[0]=g+_*f,i[4]=k*f-M,i[8]=u*d,i[1]=u*v,i[5]=u*h,i[9]=-f,i[2]=M*f-k,i[6]=_+g*f,i[10]=u*l;break}case n.ZXY:{var C=l*h,L=l*v,I=d*h,S=d*v;i[0]=C-S*f,i[4]=-u*v,i[8]=I+L*f,i[1]=L+I*f,i[5]=u*h,i[9]=S-C*f,i[2]=-u*d,i[6]=f,i[10]=u*l;break}case n.ZYX:{var W=u*h,N=u*v,D=f*h,w=f*v;i[0]=l*h,i[4]=D*d-N,i[8]=W*d+w,i[1]=l*v,i[5]=w*d+W,i[9]=N*d-D,i[2]=-d,i[6]=f*l,i[10]=u*l;break}case n.YZX:{var G=u*l,fe=u*d,he=f*l,Ne=f*d;i[0]=l*h,i[4]=Ne-G*v,i[8]=he*v+fe,i[1]=v,i[5]=u*h,i[9]=-f*h,i[2]=-d*h,i[6]=fe*v+he,i[10]=G-Ne*v;break}case n.XZY:{var Ce=u*l,mn=u*d,yn=f*l,gn=f*d;i[0]=l*h,i[4]=-v,i[8]=d*h,i[1]=Ce*v+gn,i[5]=u*h,i[9]=mn*v-yn,i[2]=yn*v-mn,i[6]=f*h,i[10]=gn*v+Ce;break}default:throw new Error(gt)}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{key:"toQuaternion",value:function(){var t=Math.cos(this.yaw*.5),i=Math.sin(this.yaw*.5),s=Math.cos(this.roll*.5),o=Math.sin(this.roll*.5),c=Math.cos(this.pitch*.5),u=Math.sin(this.pitch*.5),l=t*s*c+i*o*u,h=t*o*c-i*s*u,f=t*s*u+i*o*c,d=i*s*c-t*o*u;return new yi.default(h,f,d,l)}}],[{key:"ZYX",get:function(){return U.ZYX}},{key:"YXZ",get:function(){return U.YXZ}},{key:"XZY",get:function(){return U.XZY}},{key:"ZXY",get:function(){return U.ZXY}},{key:"YZX",get:function(){return U.YZX}},{key:"XYZ",get:function(){return U.XYZ}},{key:"RollPitchYaw",get:function(){return U.ZYX}},{key:"DefaultOrder",get:function(){return U.ZYX}},{key:"RotationOrders",get:function(){return U}},{key:"rotationOrder",value:function(t){return U[t]}}]),n}(O0.default);Mt.default=R0;function A0(e){return e>=0&&e<6}function P0(e){if(e<0&&e>=6)throw new Error(gt);return e}});var bi=A(bt=>{"use strict";var ar=X();Object.defineProperty(bt,"__esModule",{value:!0});bt.default=void 0;var w0=ar($()),S0=ar(H()),gi=ar(pt()),tn=ar(Kt()),Mi=ar($r()),nn=ar(rn()),q0=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.x,a=n===void 0?0:n,t=r.y,i=t===void 0?0:t,s=r.z,o=s===void 0?0:s,c=r.roll,u=c===void 0?0:c,l=r.pitch,h=l===void 0?0:l,f=r.yaw,d=f===void 0?0:f,v=r.position,m=r.orientation;(0,w0.default)(this,e),(0,gi.default)(this,"position",void 0),(0,gi.default)(this,"orientation",void 0),Array.isArray(v)&&v.length===3?this.position=new Mi.default(v):this.position=new Mi.default(a,i,o),Array.isArray(m)&&m.length===4?this.orientation=new nn.default(m,m[3]):this.orientation=new nn.default(u,h,d,nn.default.RollPitchYaw)}return(0,S0.default)(e,[{key:"x",get:function(){return this.position.x},set:function(n){this.position.x=n}},{key:"y",get:function(){return this.position.y},set:function(n){this.position.y=n}},{key:"z",get:function(){return this.position.z},set:function(n){this.position.z=n}},{key:"roll",get:function(){return this.orientation.roll},set:function(n){this.orientation.roll=n}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(n){this.orientation.pitch=n}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(n){this.orientation.yaw=n}},{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(n){return n?this.position.equals(n.position)&&this.orientation.equals(n.orientation):!1}},{key:"exactEquals",value:function(n){return n?this.position.exactEquals(n.position)&&this.orientation.exactEquals(n.orientation):!1}},{key:"getTransformationMatrix",value:function(){var n=Math.sin(this.roll),a=Math.sin(this.pitch),t=Math.sin(this.yaw),i=Math.cos(this.roll),s=Math.cos(this.pitch),o=Math.cos(this.yaw);return new tn.default().setRowMajor(o*s,-t*i+o*a*n,t*n+o*a*i,this.x,t*s,o*i+t*a*n,-o*n+t*a*i,this.y,-a,s*n,s*i,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(n){return new tn.default().multiplyRight(this.getTransformationMatrix()).multiplyRight(n.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(n){return new tn.default().multiplyRight(n.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}]),e}();bt.default=q0});var xi=A(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.default=void 0;var E0={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2};xt.default=E0});var ir=A(E=>{"use strict";var ce=X();Object.defineProperty(E,"__esModule",{value:!0});Object.defineProperty(E,"Vector2",{enumerable:!0,get:function(){return L0.default}});Object.defineProperty(E,"Vector3",{enumerable:!0,get:function(){return I0.default}});Object.defineProperty(E,"Vector4",{enumerable:!0,get:function(){return N0.default}});Object.defineProperty(E,"Matrix3",{enumerable:!0,get:function(){return C0.default}});Object.defineProperty(E,"Matrix4",{enumerable:!0,get:function(){return W0.default}});Object.defineProperty(E,"Quaternion",{enumerable:!0,get:function(){return D0.default}});Object.defineProperty(E,"SphericalCoordinates",{enumerable:!0,get:function(){return _i.default}});Object.defineProperty(E,"_SphericalCoordinates",{enumerable:!0,get:function(){return _i.default}});Object.defineProperty(E,"Pose",{enumerable:!0,get:function(){return Oi.default}});Object.defineProperty(E,"_Pose",{enumerable:!0,get:function(){return Oi.default}});Object.defineProperty(E,"Euler",{enumerable:!0,get:function(){return ki.default}});Object.defineProperty(E,"_Euler",{enumerable:!0,get:function(){return ki.default}});Object.defineProperty(E,"_MathUtils",{enumerable:!0,get:function(){return F0.default}});Object.defineProperty(E,"assert",{enumerable:!0,get:function(){return B0.default}});Object.defineProperty(E,"config",{enumerable:!0,get:function(){return V.config}});Object.defineProperty(E,"configure",{enumerable:!0,get:function(){return V.configure}});Object.defineProperty(E,"formatValue",{enumerable:!0,get:function(){return V.formatValue}});Object.defineProperty(E,"isArray",{enumerable:!0,get:function(){return V.isArray}});Object.defineProperty(E,"clone",{enumerable:!0,get:function(){return V.clone}});Object.defineProperty(E,"equals",{enumerable:!0,get:function(){return V.equals}});Object.defineProperty(E,"exactEquals",{enumerable:!0,get:function(){return V.exactEquals}});Object.defineProperty(E,"toRadians",{enumerable:!0,get:function(){return V.toRadians}});Object.defineProperty(E,"toDegrees",{enumerable:!0,get:function(){return V.toDegrees}});Object.defineProperty(E,"radians",{enumerable:!0,get:function(){return V.radians}});Object.defineProperty(E,"degrees",{enumerable:!0,get:function(){return V.degrees}});Object.defineProperty(E,"sin",{enumerable:!0,get:function(){return V.sin}});Object.defineProperty(E,"cos",{enumerable:!0,get:function(){return V.cos}});Object.defineProperty(E,"tan",{enumerable:!0,get:function(){return V.tan}});Object.defineProperty(E,"asin",{enumerable:!0,get:function(){return V.asin}});Object.defineProperty(E,"acos",{enumerable:!0,get:function(){return V.acos}});Object.defineProperty(E,"atan",{enumerable:!0,get:function(){return V.atan}});Object.defineProperty(E,"clamp",{enumerable:!0,get:function(){return V.clamp}});Object.defineProperty(E,"lerp",{enumerable:!0,get:function(){return V.lerp}});Object.defineProperty(E,"withEpsilon",{enumerable:!0,get:function(){return V.withEpsilon}});var L0=ce(ea()),I0=ce($r()),N0=ce(Bt()),C0=ce(ka()),W0=ce(Kt()),D0=ce(en()),_i=ce(pi()),Oi=ce(bi()),ki=ce(rn()),F0=ce(xi()),B0=ce(Wr()),V=de()});var an=A(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.WGS84_CONSTANTS=ye.WGS84_RADIUS_Z=ye.WGS84_RADIUS_Y=ye.WGS84_RADIUS_X=void 0;var qe=6378137;ye.WGS84_RADIUS_X=qe;var Ee=6378137;ye.WGS84_RADIUS_Y=Ee;var Le=6356752314245179e-9;ye.WGS84_RADIUS_Z=Le;var z0={radii:[qe,Ee,Le],radiiSquared:[qe*qe,Ee*Ee,Le*Le],oneOverRadii:[1/qe,1/Ee,1/Le],oneOverRadiiSquared:[1/(qe*qe),1/(Ee*Ee),1/(Le*Le)],maximumRadius:Math.max(qe,Ee,Le),centerToleranceSquared:.1};ye.WGS84_CONSTANTS=z0});var un=A(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.fromCartographic=sn;Re.fromCartographicToRadians=Y0;Re.fromCartographicToDegrees=U0;Re.toCartographic=on;Re.toCartographicFromRadians=X0;Re.toCartographicFromDegrees=G0;Re.isWGS84=Z0;var Te=ir(),Ti=an();function sr(e){return e}var V0=new Te.Vector3;function sn(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sr;return"longitude"in e?(r[0]=n(e.longitude),r[1]=n(e.latitude),r[2]=e.height):"x"in e?(r[0]=n(e.x),r[1]=n(e.y),r[2]=e.z):(r[0]=n(e[0]),r[1]=n(e[1]),r[2]=e[2]),r}function Y0(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return sn(e,r,Te.config._cartographicRadians?sr:Te.toRadians)}function U0(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return sn(e,r,Te.config._cartographicRadians?Te.toDegrees:sr)}function on(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sr;return"longitude"in r?(r.longitude=n(e[0]),r.latitude=n(e[1]),r.height=e[2]):"x"in r?(r.x=n(e[0]),r.y=n(e[1]),r.z=e[2]):(r[0]=n(e[0]),r[1]=n(e[1]),r[2]=e[2]),r}function X0(e,r){return on(e,r,Te.config._cartographicRadians?sr:Te.toDegrees)}function G0(e,r){return on(e,r,Te.config._cartographicRadians?Te.toRadians:sr)}function Z0(e){if(!e)return!1;V0.from(e);var r=Ti.WGS84_CONSTANTS.oneOverRadiiSquared,n=Ti.WGS84_CONSTANTS.centerToleranceSquared,a=e[0]*e[0]*r[0],t=e[1]*e[1]*r[1],i=e[2]*e[2]*r[2];return Math.abs(a+t+i-1)<n}});var Ri=A(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.default=H0;var _t=ir(),or=new _t.Vector3,Q0=new _t.Vector3,$0=new _t.Vector3;function H0(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=r.oneOverRadii,t=r.oneOverRadiiSquared,i=r.centerToleranceSquared;or.from(e);var s=or.x,o=or.y,c=or.z,u=a.x,l=a.y,h=a.z,f=s*s*u*u,d=o*o*l*l,v=c*c*h*h,m=f+d+v,p=Math.sqrt(1/m);if(!!Number.isFinite(p)){var y=Q0;if(y.copy(e).scale(p),m<i)return y.to(n);var b=t.x,g=t.y,M=t.z,k=$0;k.set(y.x*b*2,y.y*g*2,y.z*M*2);var _=(1-p)*or.len()/(.5*k.len()),C=0,L,I,S,W;do{_-=C,L=1/(1+_*b),I=1/(1+_*g),S=1/(1+_*M);var N=L*L,D=I*I,w=S*S,G=N*L,fe=D*I,he=w*S;W=f*N+d*D+v*w-1;var Ne=f*G*b+d*fe*g+v*he*M,Ce=-2*Ne;C=W/Ce}while(Math.abs(W)>_t._MathUtils.EPSILON12);return or.scale([L,I,S]).to(n)}}});var wi=A(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.default=r1;var te=ir(),Ai=1e-14,K0=new te.Vector3,Pi={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},ln={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Ae={east:new te.Vector3,north:new te.Vector3,up:new te.Vector3,west:new te.Vector3,south:new te.Vector3,down:new te.Vector3},J0=new te.Vector3,j0=new te.Vector3,e1=new te.Vector3;function r1(e,r,n,a,t,i){var s=Pi[r]&&Pi[r][n];(0,te.assert)(s&&(!a||a===s));var o,c,u,l=K0.copy(t),h=(0,te.equals)(l.x,0,Ai)&&(0,te.equals)(l.y,0,Ai);if(h){var f=Math.sign(l.z);o=J0.fromArray(ln[r]),r!=="east"&&r!=="west"&&o.scale(f),c=j0.fromArray(ln[n]),n!=="east"&&n!=="west"&&c.scale(f),u=e1.fromArray(ln[a]),a!=="east"&&a!=="west"&&u.scale(f)}else{var d=Ae.up,v=Ae.east,m=Ae.north;v.set(-l.y,l.x,0).normalize(),e.geodeticSurfaceNormal(l,d),m.copy(d).cross(v);var p=Ae.down,y=Ae.west,b=Ae.south;p.copy(d).scale(-1),y.copy(v).scale(-1),b.copy(m).scale(-1),o=Ae[r],c=Ae[n],u=Ae[a]}return i[0]=o.x,i[1]=o.y,i[2]=o.z,i[3]=0,i[4]=c.x,i[5]=c.y,i[6]=c.z,i[7]=0,i[8]=u.x,i[9]=u.y,i[10]=u.z,i[11]=0,i[12]=l.x,i[13]=l.y,i[14]=l.z,i[15]=1,i}});var Ni=A(Tt=>{"use strict";var ur=X(),t1=j();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=void 0;var n1=ur(vt()),a1=ur($()),i1=ur(H()),ge=ur(pt()),z=ir(),Si=o1(Pe()),hn=an(),qi=un(),s1=ur(Ri()),Ei=ur(wi());function Li(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(Li=function(t){return t?n:r})(e)}function o1(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||t1(e)!=="object"&&typeof e!="function")return{default:e};var n=Li(r);if(n&&n.has(e))return n.get(e);var a={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var s=t?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}var Ot=new z.Vector3,Ii=new z.Vector3,u1=new z.Vector3,le=new z.Vector3,c1=new z.Vector3,kt=new z.Vector3,dn=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;(0,a1.default)(this,e),(0,ge.default)(this,"radii",void 0),(0,ge.default)(this,"radiiSquared",void 0),(0,ge.default)(this,"radiiToTheFourth",void 0),(0,ge.default)(this,"oneOverRadii",void 0),(0,ge.default)(this,"oneOverRadiiSquared",void 0),(0,ge.default)(this,"minimumRadius",void 0),(0,ge.default)(this,"maximumRadius",void 0),(0,ge.default)(this,"centerToleranceSquared",z._MathUtils.EPSILON1),(0,ge.default)(this,"squaredXOverSquaredZ",void 0),(0,z.assert)(r>=0),(0,z.assert)(n>=0),(0,z.assert)(a>=0),this.radii=new z.Vector3(r,n,a),this.radiiSquared=new z.Vector3(r*r,n*n,a*a),this.radiiToTheFourth=new z.Vector3(r*r*r*r,n*n*n*n,a*a*a*a),this.oneOverRadii=new z.Vector3(r===0?0:1/r,n===0?0:1/n,a===0?0:1/a),this.oneOverRadiiSquared=new z.Vector3(r===0?0:1/(r*r),n===0?0:1/(n*n),a===0?0:1/(a*a)),this.minimumRadius=Math.min(r,n,a),this.maximumRadius=Math.max(r,n,a),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return(0,i1.default)(e,[{key:"equals",value:function(n){return this===n||Boolean(n&&this.radii.equals(n.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],t=Ii,i=u1,s=(0,n1.default)(n,3),o=s[2];this.geodeticSurfaceNormalCartographic(n,t),i.copy(this.radiiSquared).scale(t);var c=Math.sqrt(t.dot(i));return i.scale(1/c),t.scale(o),i.add(t),i.to(a)}},{key:"cartesianToCartographic",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];kt.from(n);var t=this.scaleToGeodeticSurface(kt,le);if(!!t){var i=this.geodeticSurfaceNormal(t,Ii),s=c1;s.copy(kt).subtract(t);var o=Math.atan2(i.y,i.x),c=Math.asin(i.z),u=Math.sign(Si.dot(s,kt))*Si.length(s);return(0,qi.toCartographicFromRadians)([o,c,u],a)}}},{key:"eastNorthUpToFixedFrame",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new z.Matrix4;return(0,Ei.default)(this,"east","north","up",n,a)}},{key:"localFrameToFixedFrame",value:function(n,a,t,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new z.Matrix4;return(0,Ei.default)(this,n,a,t,i,s)}},{key:"geocentricSurfaceNormal",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Ot.from(n).normalize().to(a)}},{key:"geodeticSurfaceNormalCartographic",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],t=(0,qi.fromCartographicToRadians)(n),i=t[0],s=t[1],o=Math.cos(s);return Ot.set(o*Math.cos(i),o*Math.sin(i),Math.sin(s)).normalize(),Ot.to(a)}},{key:"geodeticSurfaceNormal",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Ot.from(n).scale(this.oneOverRadiiSquared).normalize().to(a)}},{key:"scaleToGeodeticSurface",value:function(n,a){return(0,s1.default)(n,this,a)}},{key:"scaleToGeocentricSurface",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];le.from(n);var t=le.x,i=le.y,s=le.z,o=this.oneOverRadiiSquared,c=1/Math.sqrt(t*t*o.x+i*i*o.y+s*s*o.z);return le.multiplyScalar(c).to(a)}},{key:"transformPositionToScaledSpace",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return le.from(n).scale(this.oneOverRadii).to(a)}},{key:"transformPositionFromScaledSpace",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return le.from(n).scale(this.radii).to(a)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];(0,z.assert)((0,z.equals)(this.radii.x,this.radii.y,z._MathUtils.EPSILON15)),(0,z.assert)(this.radii.z>0),le.from(n);var i=le.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-a))return le.set(0,0,i).to(t)}}]),e}();Tt.default=dn;(0,ge.default)(dn,"WGS84",new dn(hn.WGS84_RADIUS_X,hn.WGS84_RADIUS_Y,hn.WGS84_RADIUS_Z))});var Ci=A(Rt=>{"use strict";var l1=X();Object.defineProperty(Rt,"__esModule",{value:!0});Object.defineProperty(Rt,"Ellipsoid",{enumerable:!0,get:function(){return f1.default}});Object.defineProperty(Rt,"isWGS84",{enumerable:!0,get:function(){return h1.isWGS84}});var f1=l1(Ni()),h1=un()});var Di=A(($d,Wi)=>{(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(n,a){return n<<a|n>>>32-a},rotr:function(n,a){return n<<32-a|n>>>a},endian:function(n){if(n.constructor==Number)return r.rotl(n,8)&16711935|r.rotl(n,24)&4278255360;for(var a=0;a<n.length;a++)n[a]=r.endian(n[a]);return n},randomBytes:function(n){for(var a=[];n>0;n--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(n){for(var a=[],t=0,i=0;t<n.length;t++,i+=8)a[i>>>5]|=n[t]<<24-i%32;return a},wordsToBytes:function(n){for(var a=[],t=0;t<n.length*32;t+=8)a.push(n[t>>>5]>>>24-t%32&255);return a},bytesToHex:function(n){for(var a=[],t=0;t<n.length;t++)a.push((n[t]>>>4).toString(16)),a.push((n[t]&15).toString(16));return a.join("")},hexToBytes:function(n){for(var a=[],t=0;t<n.length;t+=2)a.push(parseInt(n.substr(t,2),16));return a},bytesToBase64:function(n){for(var a=[],t=0;t<n.length;t+=3)for(var i=n[t]<<16|n[t+1]<<8|n[t+2],s=0;s<4;s++)t*8+s*6<=n.length*8?a.push(e.charAt(i>>>6*(3-s)&63)):a.push("=");return a.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],t=0,i=0;t<n.length;i=++t%4)i!=0&&a.push((e.indexOf(n.charAt(t-1))&Math.pow(2,-2*i+8)-1)<<i*2|e.indexOf(n.charAt(t))>>>6-i*2);return a}};Wi.exports=r})()});var pn=A((Hd,Fi)=>{var vn={utf8:{stringToBytes:function(e){return vn.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(vn.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var r=[],n=0;n<e.length;n++)r.push(e.charCodeAt(n)&255);return r},bytesToString:function(e){for(var r=[],n=0;n<e.length;n++)r.push(String.fromCharCode(e[n]));return r.join("")}}};Fi.exports=vn});var Vi=A((Kd,zi)=>{zi.exports=function(e){return e!=null&&(Bi(e)||v1(e)||!!e._isBuffer)};function Bi(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function v1(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Bi(e.slice(0,0))}});var Ui=A((Jd,Yi)=>{(function(){var e=Di(),r=pn().utf8,n=Vi(),a=pn().bin,t=function(i,s){i.constructor==String?s&&s.encoding==="binary"?i=a.stringToBytes(i):i=r.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=e.bytesToWords(i),c=i.length*8,u=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<o.length;d++)o[d]=(o[d]<<8|o[d]>>>24)&16711935|(o[d]<<24|o[d]>>>8)&4278255360;o[c>>>5]|=128<<c%32,o[(c+64>>>9<<4)+14]=c;for(var v=t._ff,m=t._gg,p=t._hh,y=t._ii,d=0;d<o.length;d+=16){var b=u,g=l,M=h,k=f;u=v(u,l,h,f,o[d+0],7,-680876936),f=v(f,u,l,h,o[d+1],12,-389564586),h=v(h,f,u,l,o[d+2],17,606105819),l=v(l,h,f,u,o[d+3],22,-1044525330),u=v(u,l,h,f,o[d+4],7,-176418897),f=v(f,u,l,h,o[d+5],12,1200080426),h=v(h,f,u,l,o[d+6],17,-1473231341),l=v(l,h,f,u,o[d+7],22,-45705983),u=v(u,l,h,f,o[d+8],7,1770035416),f=v(f,u,l,h,o[d+9],12,-1958414417),h=v(h,f,u,l,o[d+10],17,-42063),l=v(l,h,f,u,o[d+11],22,-1990404162),u=v(u,l,h,f,o[d+12],7,1804603682),f=v(f,u,l,h,o[d+13],12,-40341101),h=v(h,f,u,l,o[d+14],17,-1502002290),l=v(l,h,f,u,o[d+15],22,1236535329),u=m(u,l,h,f,o[d+1],5,-165796510),f=m(f,u,l,h,o[d+6],9,-1069501632),h=m(h,f,u,l,o[d+11],14,643717713),l=m(l,h,f,u,o[d+0],20,-373897302),u=m(u,l,h,f,o[d+5],5,-701558691),f=m(f,u,l,h,o[d+10],9,38016083),h=m(h,f,u,l,o[d+15],14,-660478335),l=m(l,h,f,u,o[d+4],20,-405537848),u=m(u,l,h,f,o[d+9],5,568446438),f=m(f,u,l,h,o[d+14],9,-1019803690),h=m(h,f,u,l,o[d+3],14,-187363961),l=m(l,h,f,u,o[d+8],20,1163531501),u=m(u,l,h,f,o[d+13],5,-1444681467),f=m(f,u,l,h,o[d+2],9,-51403784),h=m(h,f,u,l,o[d+7],14,1735328473),l=m(l,h,f,u,o[d+12],20,-1926607734),u=p(u,l,h,f,o[d+5],4,-378558),f=p(f,u,l,h,o[d+8],11,-2022574463),h=p(h,f,u,l,o[d+11],16,1839030562),l=p(l,h,f,u,o[d+14],23,-35309556),u=p(u,l,h,f,o[d+1],4,-1530992060),f=p(f,u,l,h,o[d+4],11,1272893353),h=p(h,f,u,l,o[d+7],16,-155497632),l=p(l,h,f,u,o[d+10],23,-1094730640),u=p(u,l,h,f,o[d+13],4,681279174),f=p(f,u,l,h,o[d+0],11,-358537222),h=p(h,f,u,l,o[d+3],16,-722521979),l=p(l,h,f,u,o[d+6],23,76029189),u=p(u,l,h,f,o[d+9],4,-640364487),f=p(f,u,l,h,o[d+12],11,-421815835),h=p(h,f,u,l,o[d+15],16,530742520),l=p(l,h,f,u,o[d+2],23,-995338651),u=y(u,l,h,f,o[d+0],6,-198630844),f=y(f,u,l,h,o[d+7],10,1126891415),h=y(h,f,u,l,o[d+14],15,-1416354905),l=y(l,h,f,u,o[d+5],21,-57434055),u=y(u,l,h,f,o[d+12],6,1700485571),f=y(f,u,l,h,o[d+3],10,-1894986606),h=y(h,f,u,l,o[d+10],15,-1051523),l=y(l,h,f,u,o[d+1],21,-2054922799),u=y(u,l,h,f,o[d+8],6,1873313359),f=y(f,u,l,h,o[d+15],10,-30611744),h=y(h,f,u,l,o[d+6],15,-1560198380),l=y(l,h,f,u,o[d+13],21,1309151649),u=y(u,l,h,f,o[d+4],6,-145523070),f=y(f,u,l,h,o[d+11],10,-1120210379),h=y(h,f,u,l,o[d+2],15,718787259),l=y(l,h,f,u,o[d+9],21,-343485551),u=u+b>>>0,l=l+g>>>0,h=h+M>>>0,f=f+k>>>0}return e.endian([u,l,h,f])};t._ff=function(i,s,o,c,u,l,h){var f=i+(s&o|~s&c)+(u>>>0)+h;return(f<<l|f>>>32-l)+s},t._gg=function(i,s,o,c,u,l,h){var f=i+(s&c|o&~c)+(u>>>0)+h;return(f<<l|f>>>32-l)+s},t._hh=function(i,s,o,c,u,l,h){var f=i+(s^o^c)+(u>>>0)+h;return(f<<l|f>>>32-l)+s},t._ii=function(i,s,o,c,u,l,h){var f=i+(o^(s|~c))+(u>>>0)+h;return(f<<l|f>>>32-l)+s},t._blocksize=16,t._digestsize=16,Yi.exports=function(i,s){if(i==null)throw new Error("Illegal argument "+i);var o=e.wordsToBytes(t(i,s));return s&&s.asBytes?o:s&&s.asString?a.bytesToString(o):e.bytesToHex(o)}})()});function Pt(e,r=!0,n){let a=n||new Set;if(e){if(_n(e))a.add(e);else if(_n(e.buffer))a.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(r&&typeof e=="object")for(let t in e)Pt(e[t],r,a)}}return n===void 0?Array.from(a):[]}function _n(e){return e?e instanceof ArrayBuffer||typeof MessagePort!="undefined"&&e instanceof MessagePort||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas:!1}function We(){let parentPort;try{eval("globalThis.parentPort = require('worker_threads').parentPort"),parentPort=globalThis.parentPort}catch{}return parentPort}var wt=new Map,J=class{static inWorkerThread(){return typeof self!="undefined"||Boolean(We())}static set onmessage(r){function n(t){let i=We(),{type:s,payload:o}=i?t:t.data;r(s,o)}let a=We();a?(a.on("message",n),a.on("exit",()=>console.debug("Node worker closing"))):globalThis.onmessage=n}static addEventListener(r){let n=wt.get(r);n||(n=t=>{if(!ss(t))return;let i=We(),{type:s,payload:o}=i?t:t.data;r(s,o)}),We()?console.error("not implemented"):globalThis.addEventListener("message",n)}static removeEventListener(r){let n=wt.get(r);wt.delete(r),We()?console.error("not implemented"):globalThis.removeEventListener("message",n)}static postMessage(r,n){let a={source:"loaders.gl",type:r,payload:n},t=Pt(n),i=We();i?i.postMessage(a,t):globalThis.postMessage(a,t)}};function ss(e){let{type:r,data:n}=e;return r==="message"&&n&&typeof n.source=="string"&&n.source.startsWith("loaders.gl")}var Nr=class{constructor(){this._values=[],this._settlers=[],this._closed=!1}[Symbol.asyncIterator](){return this}push(r){return this.enqueue(r)}enqueue(r){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");let n=this._settlers.shift();r instanceof Error?n.reject(r):n.resolve({value:r})}else this._values.push(r)}close(){for(;this._settlers.length>0;)this._settlers.shift().resolve({done:!0});this._closed=!0}next(){if(this._values.length>0){let r=this._values.shift();return r instanceof Error?Promise.reject(r):Promise.resolve({done:!1,value:r})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((r,n)=>{this._settlers.push({resolve:r,reject:n})})}};var os=0,Cr,On;function St(e,r){if(!J.inWorkerThread())return;let n={process:us};J.onmessage=async(a,t)=>{try{switch(a){case"process":if(!e)throw new Error("Worker does not support atomic processing");let i=await e(t.input,t.options||{},n);J.postMessage("done",{result:i});break;case"process-in-batches":if(!r)throw new Error("Worker does not support batched processing");Cr=new Nr,On=t.options||{};let s=r(Cr,On,n);for await(let o of s)J.postMessage("output-batch",{result:o});J.postMessage("done",{});break;case"input-batch":Cr.push(t.input);break;case"input-done":Cr.close();break;default:}}catch(i){let s=i instanceof Error?i.message:"";J.postMessage("error",{error:s})}}}function us(e,r={}){return new Promise((n,a)=>{let t=os++,i=(o,c)=>{if(c.id===t)switch(o){case"done":J.removeEventListener(i),n(c.result);break;case"error":J.removeEventListener(i),a(c.error);break;default:}};J.addEventListener(i);let s={id:t,input:e,options:r};J.postMessage("process",s)})}var Ie=At(ir()),Qi=At(Ci());function Sr(e,r){if(!e)throw new Error(r||"loader assertion failed.")}function Ge(...e){let r=e,n=r&&r.length>1&&r[0].constructor||null;if(!n)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');let a=r.reduce((s,o)=>s+o.length,0),t=new n(a),i=0;for(let s of r)t.set(s,i),i+=s.length;return t}var _1=At(Ui());var p1="EXT_mesh_features",m1="EXT_feature_metadata";function Xi(e,r,n){let a=r==null?void 0:r.extensions;if(!a)return[];for(let[t,i]of Object.entries(a||{}))switch(t){case m1:return y1(e,i,n);case p1:return console.warn("EXT_mesh_features extension is not supported yet"),[];default:return[]}return[]}function y1(e,r,n){var s,o,c,u,l,h,f;let a=(s=r==null?void 0:r.featureIdAttributes)==null?void 0:s[0];if((o=a==null?void 0:a.featureIds)==null?void 0:o.attribute)return e[a.featureIds.attribute].value;if(((c=a==null?void 0:a.featureIds)==null?void 0:c.hasOwnProperty("constant"))&&((u=a==null?void 0:a.featureIds)==null?void 0:u.hasOwnProperty("divisor"))){let d=((l=e==null?void 0:e.POSITIONS)==null?void 0:l.value.length)/3||0;return g1(d,a.featureIds.constant,a.featureIds.divisor)}let t=(r==null?void 0:r.featureIdTextures)&&(r==null?void 0:r.featureIdTextures[0]);if(t){let v=`TEXCOORD_${((f=(h=t==null?void 0:t.featureIds)==null?void 0:h.texture)==null?void 0:f.texCoord)||0}`,m=e[v].value;return M1(t,m,n)}return(r==null?void 0:r.featureTextures)&&(r==null?void 0:r.featureTextures[0])?(console.warn("EXT_feature_metadata doesn't yet support featureTextures in primitive"),[]):[]}function g1(e,r=0,n=0){let a=[];if(n>0){let t=r,i=n;for(let s=0;s<e;s++)a.push(t),i-=1,i===0&&(t++,i=n)}else a=Array(e).fill(r,0,e);return a}function M1(e,r,n){var u,l,h;if(!(n==null?void 0:n.length))return[];let a={r:0,g:1,b:2,a:3},t=(l=(u=e==null?void 0:e.featureIds)==null?void 0:u.texture)==null?void 0:l.index,i=(h=e==null?void 0:e.featureIds)==null?void 0:h.channels;if(!i||t===void 0)return[];let s=n[t],o=[],c=a[i];if(s&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(s==null?void 0:s.components))for(let f=0;f<r.length;f+=2){let d=r[f],v=r[f+1],m=Math.min(Gi(d)*s.width|0,s.width-1),y=(Math.min(Gi(v)*s.height|0,s.height-1)*s.width+m)*s.components+c,b=new Uint8Array(s.data)[y];o.push(b)}else console.warn(`Can't get batch Ids from ${(s==null?void 0:s.mimeType)||""} compressed texture`);return o}function Gi(e){return(e%1+1)%1}var b1={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},x1={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},qr=Ir(Ir({},b1),x1);var Zi=e=>{let r=new Uint32Array(e);for(let n=0;n<e;n++)r[n]=n;return r};var Ze=3,Er=2,O1=4;var $i=["CUSTOM_ATTRIBUTE_2","_BATCHID","BATCHID"];var fv=new Ie.Vector3;async function Hi(e,r,n){let{nodes:a,images:t,cartographicOrigin:i,cartesianModelMatrix:s}=e,o=new Map;for(let c of r){let u={positions:new Float32Array(0),normals:new Float32Array(0),texCoords:new Float32Array(0),colors:new Uint8Array(0),uvRegions:new Uint16Array(0),featureIndicesGroups:[],featureIndices:[],boundingVolumes:null,mergedMaterials:c.mergedMaterials};for(let l of c.mergedMaterials)o.set(l.originalMaterialId,u)}Ki(a,t,i,s,o,n);for(let c of o.keys()){let u=o.get(c);if(!!u){if(u.positions.length===0){o.delete(c);continue}u.featureIndicesGroups&&(u.featureIndices=u.featureIndicesGroups.reduce((l,h)=>l.concat(h)),delete u.featureIndicesGroups)}}return o}function Ki(e,r,n,a,t,i,s=new Ie.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){if(e)for(let o of e)T1(o,r,n,a,t,i,s)}function k1(e,r){let n=r,{matrix:a,rotation:t,scale:i,translation:s}=e;return a&&(n=r.multiplyRight(a)),s&&(n=n.translate(s)),t&&(n=n.rotateXYZ(t)),i&&(n=n.scale(i)),n}function T1(e,r,n,a,t,i,s=new Ie.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){let o=k1(e,s),c=e.mesh;c&&R1(c,r,n,a,t,i,o),Ki(e.children||[],r,n,a,t,i,o)}function R1(e,r,n,a,t,i=!1,s=new Ie.Matrix4([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){var o;for(let c of e.primitives){let u=null,l;c.material?(u=t.get(c.material.id),l=(o=u==null?void 0:u.mergedMaterials.find(({originalMaterialId:d})=>{var v;return d===((v=c.material)==null?void 0:v.id)}))==null?void 0:o.uvRegion):t.has("default")&&(u=t.get("default")),Sr(u!==null,"Primitive - material mapping failed"),Sr(c.mode===void 0||c.mode===qr.TRIANGLES||c.mode===qr.TRIANGLE_STRIP,`Primitive - unsupported mode ${c.mode}`);let h=c.attributes;if(!u)continue;let f=A1(c);u.positions=Ge(u.positions,Ji({vertices:h.POSITION.value,cartographicOrigin:n,cartesianModelMatrix:a,nodeMatrix:s,indices:f,attributeSpecificTransformation:P1,useCartesianPositions:i})),u.normals=Ge(u.normals,Ji({vertices:h.NORMAL&&h.NORMAL.value,cartographicOrigin:n,cartesianModelMatrix:a,nodeMatrix:s,indices:f,attributeSpecificTransformation:w1,useCartesianPositions:!1})),u.texCoords=Ge(u.texCoords,S1(h.TEXCOORD_0&&h.TEXCOORD_0.value,f)),u.colors=Ge(u.colors,q1(h.COLOR_0,f)),l&&(u.uvRegions=Ge(u.uvRegions,E1(l,f))),u.featureIndicesGroups=u.featureIndicesGroups||[],u.featureIndicesGroups.push(L1(I1(h,c,r),f))}}function A1(e){var n;let r=(n=e.indices)==null?void 0:n.value;if(!r){let a=e.attributes.POSITION.value;return Zi(a.length/Ze)}if(r&&e.mode===qr.TRIANGLE_STRIP){let a=r.constructor,t=new a((r.length-2)*3),i=0,s=r.slice(0,3);t.set(s,0);for(let o=1;o+2<r.length;o++)i+=3,s=r.slice(o,o+3),o%2==0?t.set(s,i):t.set(s.reverse(),i);r=t}return r}function Ji(e){let{vertices:r,indices:n,attributeSpecificTransformation:a}=e,t=new Float32Array(n.length*Ze);if(!r)return t;for(let i=0;i<n.length;i++){let s=n[i]*Ze,o=r.subarray(s,s+Ze),c=new Ie.Vector3(Array.from(o));c=a(c,e),t[i*Ze]=c.x,t[i*Ze+1]=c.y,t[i*Ze+2]=c.z}return t}function P1(e,r){let{cartesianModelMatrix:n,cartographicOrigin:a,nodeMatrix:t,useCartesianPositions:i}=r;return t&&(e=e.transform(t)),e=e.transform(n),i||(Qi.Ellipsoid.WGS84.cartesianToCartographic([e[0],e[1],e[2]],e),e=e.subtract(a)),e}function w1(e,r){let{cartesianModelMatrix:n,nodeMatrix:a}=r;return a&&(e=e.transformAsVector(a)),e=e.transformAsVector(n),e}function S1(e,r){let n=new Float32Array(r.length*Er);if(!e)return n.fill(1),n;for(let a=0;a<r.length;a++){let t=r[a]*Er,i=e.subarray(t,t+Er);n[a*Er]=i[0],n[a*Er+1]=i[1]}return n}function q1(e,r){let n=(e==null?void 0:e.components)||O1,a=new Uint8Array(r.length*n);if(!e)return a.fill(255),a;let t=e.value;for(let i=0;i<r.length;i++){let s=r[i]*n,o=t.subarray(s,s+n),c=new Uint8Array(n);for(let u=0;u<o.length;u++)c[u]=o[u]*255;a.set(c,i*n)}return a}function E1(e,r){let n=new Uint16Array(r.length*4);for(let a=0;a<n.length;a+=4)n.set(e,a);return n}function L1(e,r){if(!e.length||!r.length)return[];let n=[];for(let a=0;a<r.length;a++){let t=r[a];n.push(e[t])}return n}function I1(e,r,n){let a=Xi(e,r,n);if(a.length)return a;for(let t=0;t<$i.length;t++){let i=$i[t];if(e[i]&&e[i].value)return e[i].value}return[]}St(async(e,r={})=>await Hi(e,r.materialAndTextureList,r.useCartesianPositions));
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
//# sourceMappingURL=i3s-attributes-worker.js.map
