{"version":3,"file":"types.js","names":[],"sources":["../../../src/i3s-converter/types.ts"],"sourcesContent":["import {GLTFImagePostprocessed} from '@loaders.gl/gltf';\nimport {\n  BoundingVolumes,\n  I3SMaterialDefinition,\n  MaterialDefinitionInfo,\n  TextureDefinitionInfo\n} from '@loaders.gl/i3s';\n\n/** Converted resources for specific node */\nexport type I3SConvertedResources = {\n  /**\n   * Node id\n   */\n  nodeId?: number;\n  /** Non-compressed geometry buffer that have structure met\n   * https://github.com/Esri/i3s-spec/blob/master/docs/1.8/defaultGeometrySchema.cmn.md\n   * (Geometry buffer)\n   */\n  geometry: ArrayBuffer | null;\n  /**\n   * Draco compressed geometry\n   */\n  compressedGeometry?: Promise<ArrayBuffer> | null;\n  /**\n   * Texture image content\n   */\n  texture: any | null;\n  /**\n   * If the resource has uvRegions geometry attribute\n   */\n  hasUvRegions: boolean;\n  /**\n   * Shared resources built from GLTF material\n   */\n  sharedResources: SharedResourcesArrays | null;\n  /**\n   * Material definition of the node\n   */\n  meshMaterial?: I3SMaterialDefinition | null;\n  /**\n   * Number of vertices in the node\n   */\n  vertexCount: number | null;\n  /**\n   * Feature attributes contents\n   */\n  attributes: ArrayBuffer[] | null;\n  /**\n   * Number of features in the node\n   */\n  featureCount: number | null;\n  /**\n   * MBS and/or OBB bounding volumes of the node\n   */\n  boundingVolumes: BoundingVolumes | null;\n};\n\n/**\n * Geometry and feature attributes converted from GLTF primitives\n */\nexport type ConvertedAttributes = {\n  /** POSITION attribute value */\n  positions: Float32Array;\n  /** NORMAL attribute value */\n  normals: Float32Array;\n  /** TEXCOORD_0 attribute value */\n  texCoords: Float32Array;\n  /** COLOR_0 attribute value */\n  colors: Uint8Array;\n  /** uvRegion attribute for a texture atlas */\n  uvRegions: Uint16Array;\n  /** Feature indices grouped by ...\n   * converted from \"batch ids\" of GLTF\n   */\n  featureIndicesGroups?: number[][];\n  /** Feature indices converted from \"batch ids\" */\n  featureIndices: number[];\n  /**\n   * MBS and/or OBB bounding volumes of the node\n   */\n  boundingVolumes: null | BoundingVolumes;\n  /** merged materials data */\n  mergedMaterials: MergedMaterial[];\n};\n\n/** Postprocessed geometry and feature attributes\n * https://github.com/Esri/i3s-spec/blob/master/docs/1.8/defaultGeometrySchema.cmn.md\n */\nexport type GeometryAttributes = {\n  /** POSITION attribute value */\n  positions: Float32Array;\n  /** NORMAL attribute value */\n  normals: Float32Array;\n  /** TEXCOORD_0 attribute value */\n  texCoords: Float32Array;\n  /** COLOR_0 attribute value */\n  colors: Uint8Array;\n  /** uvRegion attribute for a texture atlas */\n  uvRegions: Uint16Array;\n  /** faceRanges attribute value  */\n  faceRange: Uint32Array;\n  /** feature Ids attribute value */\n  featureIds: number[];\n  /** number of features in the node */\n  featureCount: number;\n};\n\n/** Geometry attributes specific for the particular feature */\nexport type GroupedByFeatureIdAttributes = {\n  /** Feature Id */\n  featureId: number;\n  /** POSITION attribute value */\n  positions: Float32Array;\n  /** NORMAL attribute value */\n  normals: Float32Array;\n  /** COLOR_0 attribute value */\n  colors: Uint8Array;\n  /** uvRegion attribute for a texture atlas */\n  uvRegions: Uint16Array;\n  /** TEXCOORD_0 attribute value */\n  texCoords: Float32Array;\n};\n\n/** Shared resources made from GLTF material */\nexport type SharedResourcesArrays = {\n  /** material definitions list https://github.com/Esri/i3s-spec/blob/master/docs/1.8/materialDefinitionInfo.cmn.md */\n  materialDefinitionInfos?: MaterialDefinitionInfo[];\n  /** texture definitions list  https://github.com/Esri/i3s-spec/blob/master/docs/1.8/textureDefinitionInfo.cmn.md*/\n  textureDefinitionInfos?: TextureDefinitionInfo[];\n  /** node id to make unique SharedResource ids */\n  nodePath?: string;\n};\n\n/** I3S material definition and texture content taken from GLTF material */\nexport type I3SMaterialWithTexture = {\n  /** Material definition https://github.com/Esri/i3s-spec/blob/master/docs/1.8/materialDefinitions.cmn.md */\n  material: I3SMaterialDefinition;\n  /** Texture content (image) */\n  texture?: GLTFImagePostprocessed;\n  /** Metadata of all merged materials */\n  mergedMaterials: MergedMaterial[];\n};\n\n/** Metadata of some original texture */\nexport type MergedMaterial = {\n  /** Gltf material Id */\n  originalMaterialId: string;\n  /** Original texture size */\n  textureSize?: {\n    width: number;\n    height: number;\n  };\n  /** Uint16Array of 4 elements https://github.com/Esri/i3s-spec/blob/master/docs/1.7/geometryUVRegion.cmn.md */\n  uvRegion?: Uint16Array;\n};\n\nexport type TypedArrayConstructor =\n  | Uint8ArrayConstructor\n  | Int8ArrayConstructor\n  | Uint16ArrayConstructor\n  | Int16ArrayConstructor\n  | Int32ArrayConstructor\n  | Uint32ArrayConstructor\n  | Float32ArrayConstructor\n  | Float64ArrayConstructor;\n"],"mappings":""}