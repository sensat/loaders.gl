{"version":3,"file":"shared-resources.js","names":["transform","MATERIAL_DEFINITION_INFO_PARAMS","renderMode","path","default","shininess","reflectivity","ambient","diffuse","specular","useVertexColorAlpha","vertexRegions","vertexColors","MATERIAL_DEFINITION_INFO","name","type","params","val","thisObject","originalObject","TEXTURE_DEFINITION_IMAGE","id","size","href","length","TEXTURE_DEFINITION_INFO","encoding","wrap","atlas","uvSet","channels","images","map","image","SHARED_RESOURCES","materialDefinitions","transfromMaterialDefinitions","textureDefinitions","transfromTextureDefinitions","materialDefinitionInfos","result","index","materialDefinitionInfo","entries","concat","nodePath","textureDefinitionInfos","textureDefinitionInfo","imageIndex"],"sources":["../../../../src/i3s-converter/json-templates/shared-resources.ts"],"sourcesContent":["import transform from 'json-map-transform';\n\nconst MATERIAL_DEFINITION_INFO_PARAMS = () => ({\n  renderMode: {\n    path: 'renderMode',\n    default: 'solid'\n  },\n  shininess: {\n    path: 'shininess',\n    default: 1\n  },\n  reflectivity: {\n    path: 'reflectivity',\n    default: 0\n  },\n  ambient: {\n    path: 'ambient',\n    default: [1, 1, 1]\n  },\n  diffuse: {\n    path: 'diffuse',\n    default: [1, 1, 1]\n  },\n  specular: {\n    path: 'specular',\n    default: [0, 0, 0]\n  },\n  useVertexColorAlpha: {\n    path: 'useVertexColorAlpha',\n    default: false\n  },\n  vertexRegions: {\n    path: 'vertexRegions',\n    default: false\n  },\n  vertexColors: {\n    path: 'vertexColors',\n    default: true\n  }\n});\n\nconst MATERIAL_DEFINITION_INFO = () => ({\n  name: {\n    path: 'name',\n    default: 'standard'\n  },\n  type: {\n    path: 'type',\n    default: 'standard'\n  },\n  params: {\n    path: 'params',\n    transform: (val, thisObject, originalObject) =>\n      transform(originalObject, MATERIAL_DEFINITION_INFO_PARAMS())\n  }\n});\n\nconst TEXTURE_DEFINITION_IMAGE = () => ({\n  id: {\n    path: 'id'\n  },\n  size: {\n    path: 'size'\n  },\n  href: {\n    path: 'href',\n    default: ['../textures/0']\n  },\n  length: {\n    path: 'length'\n  }\n});\n\nconst TEXTURE_DEFINITION_INFO = () => ({\n  encoding: {\n    path: 'encoding'\n  },\n  wrap: {\n    path: 'wrap',\n    default: ['none']\n  },\n  atlas: {\n    path: 'atlas',\n    default: false\n  },\n  uvSet: {\n    path: 'uvSet',\n    default: 'uv0'\n  },\n  channels: {\n    path: 'channels',\n    default: 'rgb'\n  },\n  images: {\n    path: 'images',\n    transform: (val, thisObject, originalObject) =>\n      val.map((image) => transform(image, TEXTURE_DEFINITION_IMAGE()))\n  }\n});\n\nexport const SHARED_RESOURCES = () => ({\n  materialDefinitions: {\n    path: 'materialDefinitionInfos',\n    transform: transfromMaterialDefinitions\n  },\n  textureDefinitions: {\n    path: 'textureDefinitionInfos',\n    transform: transfromTextureDefinitions\n  }\n});\n\nfunction transfromMaterialDefinitions(materialDefinitionInfos, thisObject, originalObject) {\n  const result = {};\n  for (const [index, materialDefinitionInfo] of materialDefinitionInfos.entries()) {\n    result[`Mat${originalObject.nodePath}${index}`] = transform(\n      materialDefinitionInfo,\n      MATERIAL_DEFINITION_INFO()\n    );\n  }\n  return result;\n}\n\nfunction transfromTextureDefinitions(textureDefinitionInfos, thisObject, originalObject) {\n  if (!textureDefinitionInfos) {\n    return null;\n  }\n  const result = {};\n  for (const [index, textureDefinitionInfo] of textureDefinitionInfos.entries()) {\n    const imageIndex = `${originalObject.nodePath}${index}`;\n    textureDefinitionInfo.imageIndex = imageIndex;\n    result[imageIndex] = transform(textureDefinitionInfo, TEXTURE_DEFINITION_INFO());\n  }\n  return result;\n}\n"],"mappings":"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"}