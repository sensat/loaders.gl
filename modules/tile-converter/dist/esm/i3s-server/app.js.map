{"version":3,"file":"app.js","names":["express","require","path","logger","cors","indexRouter","sceneServerRouter","router","I3S_LAYER_PATH","process","env","I3sLayerPath","app","use","json","urlencoded","extended","static","join","__dirname","test","module","exports"],"sources":["../../../src/i3s-server/app.js"],"sourcesContent":["const express = require('express');\nconst path = require('path');\nconst logger = require('morgan');\nconst cors = require('cors');\n\nconst indexRouter = require('./routes/index');\nconst {sceneServerRouter, router} = require('./routes/slpk-router');\n\nconst I3S_LAYER_PATH = process.env.I3sLayerPath || ''; // eslint-disable-line no-process-env, no-undef\nconst app = express();\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({extended: false}));\napp.use(express.static(path.join(__dirname, 'public')));\napp.use(cors());\n\nif (/\\.slpk$/.test(I3S_LAYER_PATH)) {\n  app.use('/SceneServer/layers/0', router);\n  app.use('/SceneServer', sceneServerRouter);\n} else {\n  app.use('/', indexRouter);\n}\n\nmodule.exports = app;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAM,CAAC;AAE5B,MAAMI,WAAW,GAAGJ,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAM;EAACK,iBAAiB;EAAEC;AAAM,CAAC,GAAGN,OAAO,CAAC,sBAAsB,CAAC;AAEnE,MAAMO,cAAc,GAAGC,OAAO,CAACC,GAAG,CAACC,YAAY,IAAI,EAAE;AACrD,MAAMC,GAAG,GAAGZ,OAAO,CAAC,CAAC;AAErBY,GAAG,CAACC,GAAG,CAACV,MAAM,CAAC,KAAK,CAAC,CAAC;AACtBS,GAAG,CAACC,GAAG,CAACb,OAAO,CAACc,IAAI,CAAC,CAAC,CAAC;AACvBF,GAAG,CAACC,GAAG,CAACb,OAAO,CAACe,UAAU,CAAC;EAACC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAC9CJ,GAAG,CAACC,GAAG,CAACb,OAAO,CAACiB,MAAM,CAACf,IAAI,CAACgB,IAAI,CAACC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;AACvDP,GAAG,CAACC,GAAG,CAACT,IAAI,CAAC,CAAC,CAAC;AAEf,IAAI,SAAS,CAACgB,IAAI,CAACZ,cAAc,CAAC,EAAE;EAClCI,GAAG,CAACC,GAAG,CAAC,uBAAuB,EAAEN,MAAM,CAAC;EACxCK,GAAG,CAACC,GAAG,CAAC,cAAc,EAAEP,iBAAiB,CAAC;AAC5C,CAAC,MAAM;EACLM,GAAG,CAACC,GAAG,CAAC,GAAG,EAAER,WAAW,CAAC;AAC3B;AAEAgB,MAAM,CAACC,OAAO,GAAGV,GAAG"}