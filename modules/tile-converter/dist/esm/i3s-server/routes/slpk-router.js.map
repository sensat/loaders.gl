{"version":3,"file":"slpk-router.js","names":["express","require","getFileByUrl","createSceneServer","sceneServerRouter","Router","get","req","res","next","file","layer","JSON","parse","toString","sceneServerResponse","name","send","status","router","console","log","path","module","exports"],"sources":["../../../../src/i3s-server/routes/slpk-router.js"],"sourcesContent":["const express = require('express');\nconst {getFileByUrl} = require('../controllers/slpk-controller');\nconst createSceneServer = require('../utils/create-scene-server');\n\nconst sceneServerRouter = express.Router();\nsceneServerRouter.get('*', async function (req, res, next) {\n  const file = await getFileByUrl('/');\n  if (file) {\n    const layer = JSON.parse(file.toString());\n    const sceneServerResponse = createSceneServer(layer.name, layer);\n    res.send(sceneServerResponse);\n  } else {\n    res.status(404);\n    res.send('File not found');\n  }\n});\n\nconst router = express.Router();\nrouter.get('*', async function (req, res, next) {\n  console.log(req.path);\n  const file = await getFileByUrl(req.path);\n  if (file) {\n    res.send(file);\n  } else {\n    res.status(404);\n    res.send('File not found');\n  }\n});\n\nmodule.exports = {\n  sceneServerRouter,\n  router\n};\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAACC;AAAY,CAAC,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAChE,MAAME,iBAAiB,GAAGF,OAAO,CAAC,8BAA8B,CAAC;AAEjE,MAAMG,iBAAiB,GAAGJ,OAAO,CAACK,MAAM,CAAC,CAAC;AAC1CD,iBAAiB,CAACE,GAAG,CAAC,GAAG,EAAE,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACzD,MAAMC,IAAI,GAAG,MAAMR,YAAY,CAAC,GAAG,CAAC;EACpC,IAAIQ,IAAI,EAAE;IACR,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAACI,QAAQ,CAAC,CAAC,CAAC;IACzC,MAAMC,mBAAmB,GAAGZ,iBAAiB,CAACQ,KAAK,CAACK,IAAI,EAAEL,KAAK,CAAC;IAChEH,GAAG,CAACS,IAAI,CAACF,mBAAmB,CAAC;EAC/B,CAAC,MAAM;IACLP,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC;IACfV,GAAG,CAACS,IAAI,CAAC,gBAAgB,CAAC;EAC5B;AACF,CAAC,CAAC;AAEF,MAAME,MAAM,GAAGnB,OAAO,CAACK,MAAM,CAAC,CAAC;AAC/Bc,MAAM,CAACb,GAAG,CAAC,GAAG,EAAE,gBAAgBC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC9CW,OAAO,CAACC,GAAG,CAACd,GAAG,CAACe,IAAI,CAAC;EACrB,MAAMZ,IAAI,GAAG,MAAMR,YAAY,CAACK,GAAG,CAACe,IAAI,CAAC;EACzC,IAAIZ,IAAI,EAAE;IACRF,GAAG,CAACS,IAAI,CAACP,IAAI,CAAC;EAChB,CAAC,MAAM;IACLF,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC;IACfV,GAAG,CAACS,IAAI,CAAC,gBAAgB,CAAC;EAC5B;AACF,CAAC,CAAC;AAEFM,MAAM,CAACC,OAAO,GAAG;EACfpB,iBAAiB;EACjBe;AACF,CAAC"}