{"version":3,"file":"create-scene-server-path.js","names":["_uuid","require","_jsonMapTransform","_interopRequireDefault","_path","_sceneServer","_fileUtils","createSceneServerPath","_x","_x2","_x3","_createSceneServerPath","apply","arguments","_asyncToGenerator2","default","_regenerator","mark","_callee","layerName","layers0","rootPath","sceneServerData","sceneServer","nodePagePath","wrap","_callee$","_context","prev","next","serviceItemId","uuidv4","replace","transform","sceneServerTemplate","join","writeFile","JSON","stringify","stop"],"sources":["../../../../src/i3s-converter/helpers/create-scene-server-path.ts"],"sourcesContent":["import type {SceneLayer3D} from '@loaders.gl/i3s';\nimport {v4 as uuidv4} from 'uuid';\nimport transform from 'json-map-transform';\nimport {join} from 'path';\n\nimport {SCENE_SERVER as sceneServerTemplate} from '../json-templates/scene-server';\nimport {writeFile} from '../../lib/utils/file-utils';\n\n/**\n * Form and save sceneServer meta data into a file\n * @param layerName - layer name to display\n * @param layers0 - layer object embedded into sceneServer meta data\n * @param rootPath - root path of new converted tileset\n */\nexport async function createSceneServerPath(\n  layerName: string,\n  layers0: SceneLayer3D,\n  rootPath: string\n): Promise<void> {\n  const sceneServerData = {\n    serviceItemId: uuidv4().replace(/-/gi, ''),\n    layerName,\n    layers0\n  };\n\n  const sceneServer = transform(sceneServerData, sceneServerTemplate());\n  const nodePagePath = join(rootPath, 'SceneServer');\n  await writeFile(nodePagePath, JSON.stringify(sceneServer));\n}\n"],"mappings":";;;;;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AAEA,IAAAI,YAAA,GAAAJ,OAAA;AACA,IAAAK,UAAA,GAAAL,OAAA;AAAqD,SAQ/BM,qBAAqBA,CAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,sBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,uBAAA;EAAAA,sBAAA,OAAAG,kBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAApC,SAAAC,QACLC,SAAiB,EACjBC,OAAqB,EACrBC,QAAgB;IAAA,IAAAC,eAAA,EAAAC,WAAA,EAAAC,YAAA;IAAA,OAAAR,YAAA,CAAAD,OAAA,CAAAU,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAEVP,eAAe,GAAG;YACtBQ,aAAa,EAAE,IAAAC,QAAM,EAAC,CAAC,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;YAC1Cb,SAAS,EAATA,SAAS;YACTC,OAAO,EAAPA;UACF,CAAC;UAEKG,WAAW,GAAG,IAAAU,yBAAS,EAACX,eAAe,EAAE,IAAAY,yBAAmB,EAAC,CAAC,CAAC;UAC/DV,YAAY,GAAG,IAAAW,UAAI,EAACd,QAAQ,EAAE,aAAa,CAAC;UAAAM,QAAA,CAAAE,IAAA;UAAA,OAC5C,IAAAO,oBAAS,EAACZ,YAAY,EAAEa,IAAI,CAACC,SAAS,CAACf,WAAW,CAAC,CAAC;QAAA;QAAA;UAAA,OAAAI,QAAA,CAAAY,IAAA;MAAA;IAAA,GAAArB,OAAA;EAAA,CAC3D;EAAA,OAAAP,sBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}