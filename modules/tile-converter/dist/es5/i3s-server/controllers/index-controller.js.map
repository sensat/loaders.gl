{"version":3,"file":"index-controller.js","names":["path","require","fs","promises","I3S_LAYER_PATH","process","env","I3sLayerPath","FULL_LAYER_PATH","join","cwd","getFileNameByUrl","_x","_getFileNameByUrl","apply","arguments","_asyncToGenerator2","default","_regenerator","mark","_callee","url","extensions","_i","_extensions","ext","fileName","wrap","_callee$","_context","prev","next","length","concat","access","abrupt","t0","stop","module","exports"],"sources":["../../../../src/i3s-server/controllers/index-controller.js"],"sourcesContent":["const path = require('path');\nconst fs = require('fs');\n\nconst {promises} = fs;\n\nconst I3S_LAYER_PATH = process.env.I3sLayerPath || ''; // eslint-disable-line no-process-env, no-undef\nconst FULL_LAYER_PATH = path.join(process.cwd(), I3S_LAYER_PATH); // eslint-disable-line no-undef\n\nasync function getFileNameByUrl(url) {\n  const extensions = ['json', 'bin', 'jpg', 'jpeg', 'png', 'bin.dds', 'ktx2'];\n  for (const ext of extensions) {\n    const fileName = `${FULL_LAYER_PATH}${url}/index.${ext}`;\n    try {\n      await promises.access(fileName);\n      return fileName;\n    } catch {\n      continue; // eslint-disable-line no-continue\n    }\n  }\n  return null;\n}\n\nmodule.exports = {\n  getFileNameByUrl\n};\n"],"mappings":";;;;;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAMC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC;AAExB,IAAOE,QAAQ,GAAID,EAAE,CAAdC,QAAQ;AAEf,IAAMC,cAAc,GAAGC,OAAO,CAACC,GAAG,CAACC,YAAY,IAAI,EAAE;AACrD,IAAMC,eAAe,GAAGR,IAAI,CAACS,IAAI,CAACJ,OAAO,CAACK,GAAG,CAAC,CAAC,EAAEN,cAAc,CAAC;AAAC,SAElDO,gBAAgBA,CAAAC,EAAA;EAAA,OAAAC,iBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,kBAAA;EAAAA,iBAAA,OAAAG,kBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAA/B,SAAAC,QAAgCC,GAAG;IAAA,IAAAC,UAAA,EAAAC,EAAA,EAAAC,WAAA,EAAAC,GAAA,EAAAC,QAAA;IAAA,OAAAR,YAAA,CAAAD,OAAA,CAAAU,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAC3BT,UAAU,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,CAAC;UAAAC,EAAA,MAAAC,WAAA,GACzDF,UAAU;QAAA;UAAA,MAAAC,EAAA,GAAAC,WAAA,CAAAQ,MAAA;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAjBN,GAAG,GAAAD,WAAA,CAAAD,EAAA;UACNG,QAAQ,MAAAO,MAAA,CAAMzB,eAAe,EAAAyB,MAAA,CAAGZ,GAAG,aAAAY,MAAA,CAAUR,GAAG;UAAAI,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAE,IAAA;UAAA,OAE9C5B,QAAQ,CAAC+B,MAAM,CAACR,QAAQ,CAAC;QAAA;UAAA,OAAAG,QAAA,CAAAM,MAAA,WACxBT,QAAQ;QAAA;UAAAG,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAO,EAAA,GAAAP,QAAA;UAAA,OAAAA,QAAA,CAAAM,MAAA;QAAA;UAAAZ,EAAA;UAAAM,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAA,OAAAF,QAAA,CAAAM,MAAA,WAKZ,IAAI;QAAA;QAAA;UAAA,OAAAN,QAAA,CAAAQ,IAAA;MAAA;IAAA,GAAAjB,OAAA;EAAA,CACZ;EAAA,OAAAP,iBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAEDuB,MAAM,CAACC,OAAO,GAAG;EACf5B,gBAAgB,EAAhBA;AACF,CAAC"}