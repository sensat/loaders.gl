{"version":3,"file":"i3s-attributes-worker.js","names":["_workerUtils","require","VERSION","I3SAttributesWorker","id","name","module","version","options","useCartesianPositions","exports","transformI3SAttributesOnWorker","attributesData","processOnWorker","_typecheckI3SAttributesWorker"],"sources":["../../src/i3s-attributes-worker.ts"],"sourcesContent":["import type {WorkerObject} from '@loaders.gl/worker-utils';\nimport type {ConvertedAttributes} from './i3s-converter/types';\nimport type {Matrix4, Vector3} from '@math.gl/core';\nimport type {GLTFNodePostprocessed} from '@loaders.gl/gltf';\n\nimport {processOnWorker} from '@loaders.gl/worker-utils';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n\nexport type I3SAttributesWorkerOptions = {\n  _nodeWorkers: boolean;\n  reuseWorkers: boolean;\n  useCartesianPositions: boolean;\n  source: string;\n};\n\nexport type TextureImageProperties = {\n  data: Uint8Array;\n  compressed?: boolean;\n  height?: number;\n  width?: number;\n  components?: number;\n  mimeType?: string;\n};\n\nexport type B3DMAttributesData = {\n  gltfMaterials?: {id: string}[];\n  nodes: GLTFNodePostprocessed[];\n  images: (null | TextureImageProperties)[];\n  cartographicOrigin: Vector3;\n  cartesianModelMatrix: Matrix4;\n};\n\n/**\n * I3S Attributes Worker to handle B3DM object\n */\nexport const I3SAttributesWorker = {\n  id: 'i3s-attributes',\n  name: 'I3S Attributes Worker',\n  module: 'tile-converter',\n  version: VERSION,\n  options: {\n    useCartesianPositions: false\n  }\n};\n\n/**\n * Performs I3S attributes transformation\n */\nexport function transformI3SAttributesOnWorker(\n  attributesData: B3DMAttributesData,\n  options: I3SAttributesWorkerOptions\n): Promise<Map<string, ConvertedAttributes>> {\n  return processOnWorker(I3SAttributesWorker, attributesData, options);\n}\n\nexport const _typecheckI3SAttributesWorker: WorkerObject = I3SAttributesWorker;\n"],"mappings":";;;;;;;AAKA,IAAAA,YAAA,GAAAC,OAAA;AAIA,IAAMC,OAAO,GAAG,sBAAkB,KAAK,WAAW,qBAAiB,QAAQ;AA6BpE,IAAMC,mBAAmB,GAAG;EACjCC,EAAE,EAAE,gBAAgB;EACpBC,IAAI,EAAE,uBAAuB;EAC7BC,MAAM,EAAE,gBAAgB;EACxBC,OAAO,EAAEL,OAAO;EAChBM,OAAO,EAAE;IACPC,qBAAqB,EAAE;EACzB;AACF,CAAC;AAACC,OAAA,CAAAP,mBAAA,GAAAA,mBAAA;AAKK,SAASQ,8BAA8BA,CAC5CC,cAAkC,EAClCJ,OAAmC,EACQ;EAC3C,OAAO,IAAAK,4BAAe,EAACV,mBAAmB,EAAES,cAAc,EAAEJ,OAAO,CAAC;AACtE;AAEO,IAAMM,6BAA2C,GAAGX,mBAAmB;AAACO,OAAA,CAAAI,6BAAA,GAAAA,6BAAA"}