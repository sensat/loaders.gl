{"version":3,"file":"jsonpath.js","names":["JSONPath","path","arguments","length","undefined","_classCallCheck2","default","_defineProperty2","_toConsumableArray2","Array","isArray","_this$path","push","apply","split","Error","_createClass2","key","value","clone","toString","join","name","pop","set","equals","other","i","setFieldAtPath","object","shift","field","_iterator","_createForOfIteratorHelper","_step","s","n","done","component","err","e","f","getFieldAtPath","_iterator2","_step2","exports"],"sources":["../../../../src/lib/jsonpath/jsonpath.ts"],"sourcesContent":["/**\n * A parser for a minimal subset of the jsonpath standard\n * Full JSON path parsers for JS exist but are quite large (bundle size)\n *\n * Supports\n *\n *   `$.component.component.component`\n */\nexport default class JSONPath {\n  path: string[];\n\n  constructor(path: JSONPath | string[] | string | null = null) {\n    this.path = ['$'];\n\n    if (path instanceof JSONPath) {\n      // @ts-ignore\n      this.path = [...path.path];\n      return;\n    }\n\n    if (Array.isArray(path)) {\n      this.path.push(...path);\n      return;\n    }\n\n    // Parse a string as a JSONPath\n    if (typeof path === 'string') {\n      this.path = path.split('.');\n      if (this.path[0] !== '$') {\n        throw new Error('JSONPaths must start with $');\n      }\n    }\n  }\n\n  clone(): JSONPath {\n    return new JSONPath(this);\n  }\n\n  toString(): string {\n    return this.path.join('.');\n  }\n\n  push(name: string): void {\n    this.path.push(name);\n  }\n\n  pop() {\n    return this.path.pop();\n  }\n\n  set(name: string): void {\n    this.path[this.path.length - 1] = name;\n  }\n\n  equals(other: JSONPath): boolean {\n    if (!this || !other || this.path.length !== other.path.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.path.length; ++i) {\n      if (this.path[i] !== other.path[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Sets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   * @param value\n   */\n  setFieldAtPath(object, value) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    object[field] = value;\n  }\n\n  /**\n   * Gets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   */\n  getFieldAtPath(object) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    return object[field];\n  }\n}\n"],"mappings":"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"}