{"version":3,"file":"clarinet.js","names":["MAX_BUFFER_LENGTH","Number","MAX_SAFE_INTEGER","STATE","Char","tab","lineFeed","carriageReturn","space","doubleQuote","plus","comma","minus","period","_0","_9","colon","E","openBracket","backslash","closeBracket","a","b","e","f","l","n","r","s","t","u","openBrace","closeBrace","stringTokenPattern","DEFAULT_OPTIONS","onready","onopenobject","onkey","oncloseobject","onopenarray","onclosearray","onvalue","onerror","onend","onchunkparsed","ClarinetParser","options","arguments","length","undefined","_classCallCheck2","default","_defineProperty2","BEGIN","_objectSpread","textNode","numberNode","emit","_createClass2","key","value","end","state","VALUE","depth","_error","_closeValue","c","closed","resume","error","close","write","event","data","_this$options$event","_this$options","call","emitNode","chunk","i","charCodeAt","p","position","line","column","OPEN_OBJECT","OPEN_ARRAY","isWhitespace","OPEN_KEY","stack","push","CLOSE_KEY","pop","CLOSE_OBJECT","STRING","CLOSE_ARRAY","TRUE","FALSE","NULL","String","fromCharCode","NUMBER_DIGIT","starti","slashed","unicodeI","STRING_BIGLOOP","unicodeS","parseInt","substring","lastIndex","reResult","exec","index","TRUE2","concat","TRUE3","FALSE2","FALSE3","FALSE4","NULL2","NULL3","NUMBER_DECIMAL_POINT","indexOf","_closeNumber","bufferCheckPosition","checkBufferLength","parseFloat","message","Error","exports","parser","maxAllowed","Math","max","maxActual","_i","_arr","buffer","len"],"sources":["../../../../src/lib/clarinet/clarinet.ts"],"sourcesContent":["// loaders.gl, MIT license\n// This is a fork of the clarinet library, originally BSD license (see LICENSE file)\n// loaders.gl changes:\n// - typescript port\n\nexport type ClarinetEvent =\n  | 'onvalue'\n  | 'onstring'\n  | 'onkey'\n  | 'onopenobject'\n  | 'oncloseobject'\n  | 'onopenarray'\n  | 'onclosearray'\n  | 'onerror'\n  | 'onend'\n  | 'onready';\n\n// Removes the MAX_BUFFER_LENGTH, originally set to 64 * 1024\nconst MAX_BUFFER_LENGTH = Number.MAX_SAFE_INTEGER;\n// const DEBUG = false;\n\nenum STATE {\n  BEGIN = 0,\n  VALUE, // general stuff\n  OPEN_OBJECT, // {\n  CLOSE_OBJECT, // }\n  OPEN_ARRAY, // [\n  CLOSE_ARRAY, // ]\n  TEXT_ESCAPE, // \\ stuff\n  STRING, // \"\"\n  BACKSLASH,\n  END, // No more stack\n  OPEN_KEY, // , \"a\"\n  CLOSE_KEY, // :\n  TRUE, // r\n  TRUE2, // u\n  TRUE3, // e\n  FALSE, // a\n  FALSE2, // l\n  FALSE3, // s\n  FALSE4, // e\n  NULL, // u\n  NULL2, // l\n  NULL3, // l\n  NUMBER_DECIMAL_POINT, // .\n  NUMBER_DIGIT // [0-9]\n}\n\nconst Char = {\n  tab: 0x09, // \\t\n  lineFeed: 0x0a, // \\n\n  carriageReturn: 0x0d, // \\r\n  space: 0x20, // \" \"\n\n  doubleQuote: 0x22, // \"\n  plus: 0x2b, // +\n  comma: 0x2c, // ,\n  minus: 0x2d, // -\n  period: 0x2e, // .\n\n  _0: 0x30, // 0\n  _9: 0x39, // 9\n\n  colon: 0x3a, // :\n\n  E: 0x45, // E\n\n  openBracket: 0x5b, // [\n  backslash: 0x5c, // \\\n  closeBracket: 0x5d, // ]\n\n  a: 0x61, // a\n  b: 0x62, // b\n  e: 0x65, // e\n  f: 0x66, // f\n  l: 0x6c, // l\n  n: 0x6e, // n\n  r: 0x72, // r\n  s: 0x73, // s\n  t: 0x74, // t\n  u: 0x75, // u\n\n  openBrace: 0x7b, // {\n  closeBrace: 0x7d // }\n};\n\nconst stringTokenPattern = /[\\\\\"\\n]/g;\n\ntype ParserEvent = (parser: ClarinetParser, event: string, data?: any) => void;\n\nexport type ClarinetParserOptions = {\n  onready?: ParserEvent;\n  onopenobject?: ParserEvent;\n  onkey?: ParserEvent;\n  oncloseobject?: ParserEvent;\n  onopenarray?: ParserEvent;\n  onclosearray?: ParserEvent;\n  onvalue?: ParserEvent;\n  onerror?: ParserEvent;\n  onend?: ParserEvent;\n  onchunkparsed?: ParserEvent;\n};\n\nconst DEFAULT_OPTIONS: Required<ClarinetParserOptions> = {\n  onready: () => {},\n  onopenobject: () => {},\n  onkey: () => {},\n  oncloseobject: () => {},\n  onopenarray: () => {},\n  onclosearray: () => {},\n  onvalue: () => {},\n  onerror: () => {},\n  onend: () => {},\n  onchunkparsed: () => {}\n};\nexport default class ClarinetParser {\n  protected options: Required<ClarinetParserOptions> = DEFAULT_OPTIONS;\n\n  bufferCheckPosition = MAX_BUFFER_LENGTH;\n  q = '';\n  c = '';\n  p = '';\n  closed = false;\n  closedRoot = false;\n  sawRoot = false;\n  // tag = null;\n  error: Error | null = null;\n  state = STATE.BEGIN;\n  stack: STATE[] = [];\n  // mostly just for error reporting\n  position: number = 0;\n  column: number = 0;\n  line: number = 1;\n  slashed: boolean = false;\n  unicodeI: number = 0;\n  unicodeS: string | null = null;\n  depth: number = 0;\n\n  textNode;\n  numberNode;\n\n  constructor(options: ClarinetParserOptions = {}) {\n    this.options = {...DEFAULT_OPTIONS, ...options};\n    this.textNode = undefined;\n    this.numberNode = '';\n    this.emit('onready');\n  }\n\n  end() {\n    if (this.state !== STATE.VALUE || this.depth !== 0) this._error('Unexpected end');\n\n    this._closeValue();\n    this.c = '';\n    this.closed = true;\n    this.emit('onend');\n    return this;\n  }\n\n  resume() {\n    this.error = null;\n    return this;\n  }\n\n  close() {\n    return this.write(null);\n  }\n\n  // protected\n\n  emit(event: string, data?: any): void {\n    // if (DEBUG) console.log('-- emit', event, data);\n    this.options[event]?.(data, this);\n  }\n\n  emitNode(event: string, data?: any): void {\n    this._closeValue();\n    this.emit(event, data);\n  }\n\n  /* eslint-disable no-continue */\n  // eslint-disable-next-line complexity, max-statements\n  write(chunk) {\n    if (this.error) {\n      throw this.error;\n    }\n    if (this.closed) {\n      return this._error('Cannot write after close. Assign an onready handler.');\n    }\n    if (chunk === null) {\n      return this.end();\n    }\n    let i = 0;\n    let c = chunk.charCodeAt(0);\n    let p = this.p;\n    // if (DEBUG) console.log(`write -> [${  chunk  }]`);\n    while (c) {\n      p = c;\n      this.c = c = chunk.charCodeAt(i++);\n      // if chunk doesnt have next, like streaming char by char\n      // this way we need to check if previous is really previous\n      // if not we need to reset to what the this says is the previous\n      // from buffer\n      if (p !== c) {\n        this.p = p;\n      } else {\n        p = this.p;\n      }\n\n      if (!c) break;\n\n      // if (DEBUG) console.log(i, c, STATE[this.state]);\n      this.position++;\n      if (c === Char.lineFeed) {\n        this.line++;\n        this.column = 0;\n      } else this.column++;\n\n      switch (this.state) {\n        case STATE.BEGIN:\n          if (c === Char.openBrace) this.state = STATE.OPEN_OBJECT;\n          else if (c === Char.openBracket) this.state = STATE.OPEN_ARRAY;\n          else if (!isWhitespace(c)) {\n            this._error('Non-whitespace before {[.');\n          }\n          continue;\n\n        case STATE.OPEN_KEY:\n        case STATE.OPEN_OBJECT:\n          if (isWhitespace(c)) continue;\n          if (this.state === STATE.OPEN_KEY) this.stack.push(STATE.CLOSE_KEY);\n          else if (c === Char.closeBrace) {\n            this.emit('onopenobject');\n            this.depth++;\n            this.emit('oncloseobject');\n            this.depth--;\n            this.state = this.stack.pop() || STATE.VALUE;\n            continue;\n          } else this.stack.push(STATE.CLOSE_OBJECT);\n          if (c === Char.doubleQuote) this.state = STATE.STRING;\n          else this._error('Malformed object key should start with \"');\n          continue;\n\n        case STATE.CLOSE_KEY:\n        case STATE.CLOSE_OBJECT:\n          if (isWhitespace(c)) continue;\n          // let event = this.state === STATE.CLOSE_KEY ? 'key' : 'object';\n          if (c === Char.colon) {\n            if (this.state === STATE.CLOSE_OBJECT) {\n              this.stack.push(STATE.CLOSE_OBJECT);\n              this._closeValue('onopenobject');\n              this.depth++;\n            } else this._closeValue('onkey');\n            this.state = STATE.VALUE;\n          } else if (c === Char.closeBrace) {\n            this.emitNode('oncloseobject');\n            this.depth--;\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else if (c === Char.comma) {\n            if (this.state === STATE.CLOSE_OBJECT) this.stack.push(STATE.CLOSE_OBJECT);\n            this._closeValue();\n            this.state = STATE.OPEN_KEY;\n          } else this._error('Bad object');\n          continue;\n\n        case STATE.OPEN_ARRAY: // after an array there always a value\n        case STATE.VALUE:\n          if (isWhitespace(c)) continue;\n          if (this.state === STATE.OPEN_ARRAY) {\n            this.emit('onopenarray');\n            this.depth++;\n            this.state = STATE.VALUE;\n            if (c === Char.closeBracket) {\n              this.emit('onclosearray');\n              this.depth--;\n              this.state = this.stack.pop() || STATE.VALUE;\n              continue;\n            } else {\n              this.stack.push(STATE.CLOSE_ARRAY);\n            }\n          }\n          if (c === Char.doubleQuote) this.state = STATE.STRING;\n          else if (c === Char.openBrace) this.state = STATE.OPEN_OBJECT;\n          else if (c === Char.openBracket) this.state = STATE.OPEN_ARRAY;\n          else if (c === Char.t) this.state = STATE.TRUE;\n          else if (c === Char.f) this.state = STATE.FALSE;\n          else if (c === Char.n) this.state = STATE.NULL;\n          else if (c === Char.minus) {\n            // keep and continue\n            this.numberNode += '-';\n          } else if (Char._0 <= c && c <= Char._9) {\n            this.numberNode += String.fromCharCode(c);\n            this.state = STATE.NUMBER_DIGIT;\n          } else this._error('Bad value');\n          continue;\n\n        case STATE.CLOSE_ARRAY:\n          if (c === Char.comma) {\n            this.stack.push(STATE.CLOSE_ARRAY);\n            this._closeValue('onvalue');\n            this.state = STATE.VALUE;\n          } else if (c === Char.closeBracket) {\n            this.emitNode('onclosearray');\n            this.depth--;\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else if (isWhitespace(c)) continue;\n          else this._error('Bad array');\n          continue;\n\n        case STATE.STRING:\n          if (this.textNode === undefined) {\n            this.textNode = '';\n          }\n\n          // thanks thejh, this is an about 50% performance improvement.\n          let starti = i - 1;\n          let slashed = this.slashed;\n          let unicodeI = this.unicodeI;\n          // eslint-disable-next-line no-constant-condition, no-labels\n          STRING_BIGLOOP: while (true) {\n            // if (DEBUG) console.log(i, c, STATE[this.state], slashed);\n            // zero means \"no unicode active\". 1-4 mean \"parse some more\". end after 4.\n            while (unicodeI > 0) {\n              this.unicodeS += String.fromCharCode(c);\n              c = chunk.charCodeAt(i++);\n              this.position++;\n              if (unicodeI === 4) {\n                // TODO this might be slow? well, probably not used too often anyway\n                this.textNode += String.fromCharCode(parseInt(this.unicodeS as string, 16));\n                unicodeI = 0;\n                starti = i - 1;\n              } else {\n                unicodeI++;\n              }\n              // we can just break here: no stuff we skipped that still has to be sliced out or so\n              // eslint-disable-next-line no-labels\n              if (!c) break STRING_BIGLOOP;\n            }\n            if (c === Char.doubleQuote && !slashed) {\n              this.state = this.stack.pop() || STATE.VALUE;\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              break;\n            }\n            if (c === Char.backslash && !slashed) {\n              slashed = true;\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              c = chunk.charCodeAt(i++);\n              this.position++;\n              if (!c) break;\n            }\n            if (slashed) {\n              slashed = false;\n              if (c === Char.n) {\n                this.textNode += '\\n';\n              } else if (c === Char.r) {\n                this.textNode += '\\r';\n              } else if (c === Char.t) {\n                this.textNode += '\\t';\n              } else if (c === Char.f) {\n                this.textNode += '\\f';\n              } else if (c === Char.b) {\n                this.textNode += '\\b';\n              } else if (c === Char.u) {\n                // \\uxxxx. meh!\n                unicodeI = 1;\n                this.unicodeS = '';\n              } else {\n                this.textNode += String.fromCharCode(c);\n              }\n              c = chunk.charCodeAt(i++);\n              this.position++;\n              starti = i - 1;\n              if (!c) break;\n              else continue;\n            }\n\n            stringTokenPattern.lastIndex = i;\n            const reResult = stringTokenPattern.exec(chunk);\n            if (reResult === null) {\n              i = chunk.length + 1;\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              break;\n            }\n            i = reResult.index + 1;\n            c = chunk.charCodeAt(reResult.index);\n            if (!c) {\n              this.textNode += chunk.substring(starti, i - 1);\n              this.position += i - 1 - starti;\n              break;\n            }\n          }\n          this.slashed = slashed;\n          this.unicodeI = unicodeI;\n          continue;\n\n        case STATE.TRUE:\n          if (c === Char.r) this.state = STATE.TRUE2;\n          else this._error(`Invalid true started with t${c}`);\n          continue;\n\n        case STATE.TRUE2:\n          if (c === Char.u) this.state = STATE.TRUE3;\n          else this._error(`Invalid true started with tr${c}`);\n          continue;\n\n        case STATE.TRUE3:\n          if (c === Char.e) {\n            this.emit('onvalue', true);\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else this._error(`Invalid true started with tru${c}`);\n          continue;\n\n        case STATE.FALSE:\n          if (c === Char.a) this.state = STATE.FALSE2;\n          else this._error(`Invalid false started with f${c}`);\n          continue;\n\n        case STATE.FALSE2:\n          if (c === Char.l) this.state = STATE.FALSE3;\n          else this._error(`Invalid false started with fa${c}`);\n          continue;\n\n        case STATE.FALSE3:\n          if (c === Char.s) this.state = STATE.FALSE4;\n          else this._error(`Invalid false started with fal${c}`);\n          continue;\n\n        case STATE.FALSE4:\n          if (c === Char.e) {\n            this.emit('onvalue', false);\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else this._error(`Invalid false started with fals${c}`);\n          continue;\n\n        case STATE.NULL:\n          if (c === Char.u) this.state = STATE.NULL2;\n          else this._error(`Invalid null started with n${c}`);\n          continue;\n\n        case STATE.NULL2:\n          if (c === Char.l) this.state = STATE.NULL3;\n          else this._error(`Invalid null started with nu${c}`);\n          continue;\n\n        case STATE.NULL3:\n          if (c === Char.l) {\n            this.emit('onvalue', null);\n            this.state = this.stack.pop() || STATE.VALUE;\n          } else this._error(`Invalid null started with nul${c}`);\n          continue;\n\n        case STATE.NUMBER_DECIMAL_POINT:\n          if (c === Char.period) {\n            this.numberNode += '.';\n            this.state = STATE.NUMBER_DIGIT;\n          } else this._error('Leading zero not followed by .');\n          continue;\n\n        case STATE.NUMBER_DIGIT:\n          if (Char._0 <= c && c <= Char._9) this.numberNode += String.fromCharCode(c);\n          else if (c === Char.period) {\n            if (this.numberNode.indexOf('.') !== -1) this._error('Invalid number has two dots');\n            this.numberNode += '.';\n          } else if (c === Char.e || c === Char.E) {\n            if (this.numberNode.indexOf('e') !== -1 || this.numberNode.indexOf('E') !== -1)\n              this._error('Invalid number has two exponential');\n            this.numberNode += 'e';\n          } else if (c === Char.plus || c === Char.minus) {\n            // @ts-expect-error\n            if (!(p === Char.e || p === Char.E)) this._error('Invalid symbol in number');\n            this.numberNode += String.fromCharCode(c);\n          } else {\n            this._closeNumber();\n            i--; // go back one\n            this.state = this.stack.pop() || STATE.VALUE;\n          }\n          continue;\n\n        default:\n          this._error(`Unknown state: ${this.state}`);\n      }\n    }\n    if (this.position >= this.bufferCheckPosition) {\n      checkBufferLength(this);\n    }\n\n    this.emit('onchunkparsed');\n\n    return this;\n  }\n\n  _closeValue(event: string = 'onvalue'): void {\n    if (this.textNode !== undefined) {\n      this.emit(event, this.textNode);\n    }\n    this.textNode = undefined;\n  }\n\n  _closeNumber(): void {\n    if (this.numberNode) this.emit('onvalue', parseFloat(this.numberNode));\n    this.numberNode = '';\n  }\n\n  _error(message: string = ''): void {\n    this._closeValue();\n    message += `\\nLine: ${this.line}\\nColumn: ${this.column}\\nChar: ${this.c}`;\n    const error = new Error(message);\n    this.error = error;\n    this.emit('onerror', error);\n  }\n}\n\nfunction isWhitespace(c): boolean {\n  return c === Char.carriageReturn || c === Char.lineFeed || c === Char.space || c === Char.tab;\n}\n\nfunction checkBufferLength(parser) {\n  const maxAllowed = Math.max(MAX_BUFFER_LENGTH, 10);\n  let maxActual = 0;\n\n  for (const buffer of ['textNode', 'numberNode']) {\n    const len = parser[buffer] === undefined ? 0 : parser[buffer].length;\n    if (len > maxAllowed) {\n      switch (buffer) {\n        case 'text':\n          // TODO - should this be closeValue?\n          // closeText(parser);\n          break;\n\n        default:\n          parser._error(`Max buffer length exceeded: ${buffer}`);\n      }\n    }\n    maxActual = Math.max(maxActual, len);\n  }\n  parser.bufferCheckPosition = MAX_BUFFER_LENGTH - maxActual + parser.position;\n}\n"],"mappings":"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"}