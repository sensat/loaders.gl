{"version":3,"file":"jsonpath.js","names":["JSONPath","constructor","path","arguments","length","undefined","_defineProperty","Array","isArray","push","split","Error","clone","toString","join","name","pop","set","equals","other","i","setFieldAtPath","object","value","shift","field","component","getFieldAtPath"],"sources":["../../../../src/lib/jsonpath/jsonpath.ts"],"sourcesContent":["/**\n * A parser for a minimal subset of the jsonpath standard\n * Full JSON path parsers for JS exist but are quite large (bundle size)\n *\n * Supports\n *\n *   `$.component.component.component`\n */\nexport default class JSONPath {\n  path: string[];\n\n  constructor(path: JSONPath | string[] | string | null = null) {\n    this.path = ['$'];\n\n    if (path instanceof JSONPath) {\n      // @ts-ignore\n      this.path = [...path.path];\n      return;\n    }\n\n    if (Array.isArray(path)) {\n      this.path.push(...path);\n      return;\n    }\n\n    // Parse a string as a JSONPath\n    if (typeof path === 'string') {\n      this.path = path.split('.');\n      if (this.path[0] !== '$') {\n        throw new Error('JSONPaths must start with $');\n      }\n    }\n  }\n\n  clone(): JSONPath {\n    return new JSONPath(this);\n  }\n\n  toString(): string {\n    return this.path.join('.');\n  }\n\n  push(name: string): void {\n    this.path.push(name);\n  }\n\n  pop() {\n    return this.path.pop();\n  }\n\n  set(name: string): void {\n    this.path[this.path.length - 1] = name;\n  }\n\n  equals(other: JSONPath): boolean {\n    if (!this || !other || this.path.length !== other.path.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.path.length; ++i) {\n      if (this.path[i] !== other.path[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Sets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   * @param value\n   */\n  setFieldAtPath(object, value) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    object[field] = value;\n  }\n\n  /**\n   * Gets the value pointed at by path\n   * TODO - handle root path\n   * @param object\n   */\n  getFieldAtPath(object) {\n    const path = [...this.path];\n    path.shift();\n    const field = path.pop();\n    for (const component of path) {\n      object = object[component];\n    }\n    // @ts-ignore\n    return object[field];\n  }\n}\n"],"mappings":"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"}