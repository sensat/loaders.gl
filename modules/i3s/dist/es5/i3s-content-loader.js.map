{"version":3,"file":"i3s-content-loader.js","names":["_parseI3sTileContent","require","VERSION","I3SContentLoader","name","id","module","worker","version","mimeTypes","parse","extensions","options","exports","_x","_x2","_x3","_parse","apply","arguments","_asyncToGenerator2","default","_regenerator","mark","_callee","data","context","_ref","tile","_tileOptions","tileset","_tilesetOptions","tileOptions","tilesetOptions","wrap","_callee$","_context","prev","next","i3s","abrupt","parseI3STileContent","sent","stop"],"sources":["../../src/i3s-content-loader.ts"],"sourcesContent":["import type {LoaderWithParser, LoaderContext} from '@loaders.gl/loader-utils';\nimport type {I3SLoaderOptions} from './i3s-loader';\nimport {parseI3STileContent} from './lib/parsers/parse-i3s-tile-content';\nimport {I3STileOptions, I3STilesetOptions} from './types';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\n\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'beta';\n/**\n * Loader for I3S - Indexed 3D Scene Layer\n */\nexport const I3SContentLoader: LoaderWithParser = {\n  name: 'I3S Content (Indexed Scene Layers)',\n  id: 'i3s-content',\n  module: 'i3s',\n  worker: true,\n  version: VERSION,\n  mimeTypes: ['application/octet-stream'],\n  parse,\n  extensions: ['bin'],\n  options: {\n    'i3s-content': {}\n  }\n};\n\nasync function parse(data, options?: I3SLoaderOptions, context?: LoaderContext) {\n  const {tile, _tileOptions, tileset, _tilesetOptions} = options?.i3s || {};\n  const tileOptions = _tileOptions || tile;\n  const tilesetOptions = _tilesetOptions || tileset;\n  if (!tileOptions || !tilesetOptions) {\n    return null;\n  }\n  return await parseI3STileContent(\n    data,\n    tileOptions as I3STileOptions,\n    tilesetOptions as I3STilesetOptions,\n    options,\n    context\n  );\n}\n"],"mappings":";;;;;;;;;AAEA,IAAAA,oBAAA,GAAAC,OAAA;AAMA,IAAMC,OAAO,GAAG,sBAAkB,KAAK,WAAW,qBAAiB,MAAM;AAIlE,IAAMC,gBAAkC,GAAG;EAChDC,IAAI,EAAE,oCAAoC;EAC1CC,EAAE,EAAE,aAAa;EACjBC,MAAM,EAAE,KAAK;EACbC,MAAM,EAAE,IAAI;EACZC,OAAO,EAAEN,OAAO;EAChBO,SAAS,EAAE,CAAC,0BAA0B,CAAC;EACvCC,KAAK,EAALA,KAAK;EACLC,UAAU,EAAE,CAAC,KAAK,CAAC;EACnBC,OAAO,EAAE;IACP,aAAa,EAAE,CAAC;EAClB;AACF,CAAC;AAACC,OAAA,CAAAV,gBAAA,GAAAA,gBAAA;AAAA,SAEaO,KAAKA,CAAAI,EAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,OAAA;EAAAA,MAAA,OAAAG,kBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAApB,SAAAC,QAAqBC,IAAI,EAAEb,OAA0B,EAAEc,OAAuB;IAAA,IAAAC,IAAA,EAAAC,IAAA,EAAAC,YAAA,EAAAC,OAAA,EAAAC,eAAA,EAAAC,WAAA,EAAAC,cAAA;IAAA,OAAAX,YAAA,CAAAD,OAAA,CAAAa,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAX,IAAA,GACrB,CAAAf,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE2B,GAAG,KAAI,CAAC,CAAC,EAAlEX,IAAI,GAAAD,IAAA,CAAJC,IAAI,EAAEC,YAAY,GAAAF,IAAA,CAAZE,YAAY,EAAEC,OAAO,GAAAH,IAAA,CAAPG,OAAO,EAAEC,eAAe,GAAAJ,IAAA,CAAfI,eAAe;UAC7CC,WAAW,GAAGH,YAAY,IAAID,IAAI;UAClCK,cAAc,GAAGF,eAAe,IAAID,OAAO;UAAA,MAC7C,CAACE,WAAW,IAAI,CAACC,cAAc;YAAAG,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,OAAAF,QAAA,CAAAI,MAAA,WAC1B,IAAI;QAAA;UAAAJ,QAAA,CAAAE,IAAA;UAAA,OAEA,IAAAG,wCAAmB,EAC9BhB,IAAI,EACJO,WAAW,EACXC,cAAc,EACdrB,OAAO,EACPc,OACF,CAAC;QAAA;UAAA,OAAAU,QAAA,CAAAI,MAAA,WAAAJ,QAAA,CAAAM,IAAA;QAAA;QAAA;UAAA,OAAAN,QAAA,CAAAO,IAAA;MAAA;IAAA,GAAAnB,OAAA;EAAA,CACF;EAAA,OAAAP,MAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}