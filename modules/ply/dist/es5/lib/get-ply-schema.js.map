{"version":3,"file":"get-ply-schema.js","names":["_schema","require","getPLYSchema","plyHeader","attributes","metadata","makeMetadataFromPlyHeader","schema","deduceMeshSchema","ply_comments","JSON","stringify","comments","ply_elements","elements","format","undefined","ply_format","version","ply_version","headerLength","ply_headerLength","toString"],"sources":["../../../src/lib/get-ply-schema.ts"],"sourcesContent":["import {Schema, MeshAttributes, deduceMeshSchema} from '@loaders.gl/schema';\nimport type {PLYHeader} from './ply-types';\n\n/**\n * Gets schema from PLY header\n * @param plyHeader\n * @param metadata\n * @returns Schema\n */\nexport function getPLYSchema(plyHeader: PLYHeader, attributes: MeshAttributes): Schema {\n  const metadata = makeMetadataFromPlyHeader(plyHeader);\n  const schema = deduceMeshSchema(attributes, metadata);\n  return schema;\n}\n\n/**\n * Make arrow like schema metadata by PlyHeader properties\n * @param plyHeader\n * @returns\n */\nfunction makeMetadataFromPlyHeader(plyHeader: PLYHeader): Record<string, string> {\n  /* eslint-disable camelcase */\n  const metadata: Record<string, string> = {};\n  metadata.ply_comments = JSON.stringify(plyHeader.comments);\n  metadata.ply_elements = JSON.stringify(plyHeader.elements);\n  if (plyHeader.format !== undefined) {\n    metadata.ply_format = plyHeader.format;\n  }\n  if (plyHeader.version !== undefined) {\n    metadata.ply_version = plyHeader.version;\n  }\n  if (plyHeader.headerLength !== undefined) {\n    metadata.ply_headerLength = plyHeader.headerLength.toString(10);\n  }\n  return metadata;\n}\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AASO,SAASC,YAAYA,CAACC,SAAoB,EAAEC,UAA0B,EAAU;EACrF,IAAMC,QAAQ,GAAGC,yBAAyB,CAACH,SAAS,CAAC;EACrD,IAAMI,MAAM,GAAG,IAAAC,wBAAgB,EAACJ,UAAU,EAAEC,QAAQ,CAAC;EACrD,OAAOE,MAAM;AACf;AAOA,SAASD,yBAAyBA,CAACH,SAAoB,EAA0B;EAE/E,IAAME,QAAgC,GAAG,CAAC,CAAC;EAC3CA,QAAQ,CAACI,YAAY,GAAGC,IAAI,CAACC,SAAS,CAACR,SAAS,CAACS,QAAQ,CAAC;EAC1DP,QAAQ,CAACQ,YAAY,GAAGH,IAAI,CAACC,SAAS,CAACR,SAAS,CAACW,QAAQ,CAAC;EAC1D,IAAIX,SAAS,CAACY,MAAM,KAAKC,SAAS,EAAE;IAClCX,QAAQ,CAACY,UAAU,GAAGd,SAAS,CAACY,MAAM;EACxC;EACA,IAAIZ,SAAS,CAACe,OAAO,KAAKF,SAAS,EAAE;IACnCX,QAAQ,CAACc,WAAW,GAAGhB,SAAS,CAACe,OAAO;EAC1C;EACA,IAAIf,SAAS,CAACiB,YAAY,KAAKJ,SAAS,EAAE;IACxCX,QAAQ,CAACgB,gBAAgB,GAAGlB,SAAS,CAACiB,YAAY,CAACE,QAAQ,CAAC,EAAE,CAAC;EACjE;EACA,OAAOjB,QAAQ;AACjB"}