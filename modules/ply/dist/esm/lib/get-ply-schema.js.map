{"version":3,"file":"get-ply-schema.js","names":["deduceMeshSchema","getPLYSchema","plyHeader","attributes","metadata","makeMetadataFromPlyHeader","schema","ply_comments","JSON","stringify","comments","ply_elements","elements","format","undefined","ply_format","version","ply_version","headerLength","ply_headerLength","toString"],"sources":["../../../src/lib/get-ply-schema.ts"],"sourcesContent":["import {Schema, MeshAttributes, deduceMeshSchema} from '@loaders.gl/schema';\nimport type {PLYHeader} from './ply-types';\n\n/**\n * Gets schema from PLY header\n * @param plyHeader\n * @param metadata\n * @returns Schema\n */\nexport function getPLYSchema(plyHeader: PLYHeader, attributes: MeshAttributes): Schema {\n  const metadata = makeMetadataFromPlyHeader(plyHeader);\n  const schema = deduceMeshSchema(attributes, metadata);\n  return schema;\n}\n\n/**\n * Make arrow like schema metadata by PlyHeader properties\n * @param plyHeader\n * @returns\n */\nfunction makeMetadataFromPlyHeader(plyHeader: PLYHeader): Record<string, string> {\n  /* eslint-disable camelcase */\n  const metadata: Record<string, string> = {};\n  metadata.ply_comments = JSON.stringify(plyHeader.comments);\n  metadata.ply_elements = JSON.stringify(plyHeader.elements);\n  if (plyHeader.format !== undefined) {\n    metadata.ply_format = plyHeader.format;\n  }\n  if (plyHeader.version !== undefined) {\n    metadata.ply_version = plyHeader.version;\n  }\n  if (plyHeader.headerLength !== undefined) {\n    metadata.ply_headerLength = plyHeader.headerLength.toString(10);\n  }\n  return metadata;\n}\n"],"mappings":"AAAA,SAAgCA,gBAAgB,QAAO,oBAAoB;AAS3E,OAAO,SAASC,YAAYA,CAACC,SAAoB,EAAEC,UAA0B,EAAU;EACrF,MAAMC,QAAQ,GAAGC,yBAAyB,CAACH,SAAS,CAAC;EACrD,MAAMI,MAAM,GAAGN,gBAAgB,CAACG,UAAU,EAAEC,QAAQ,CAAC;EACrD,OAAOE,MAAM;AACf;AAOA,SAASD,yBAAyBA,CAACH,SAAoB,EAA0B;EAE/E,MAAME,QAAgC,GAAG,CAAC,CAAC;EAC3CA,QAAQ,CAACG,YAAY,GAAGC,IAAI,CAACC,SAAS,CAACP,SAAS,CAACQ,QAAQ,CAAC;EAC1DN,QAAQ,CAACO,YAAY,GAAGH,IAAI,CAACC,SAAS,CAACP,SAAS,CAACU,QAAQ,CAAC;EAC1D,IAAIV,SAAS,CAACW,MAAM,KAAKC,SAAS,EAAE;IAClCV,QAAQ,CAACW,UAAU,GAAGb,SAAS,CAACW,MAAM;EACxC;EACA,IAAIX,SAAS,CAACc,OAAO,KAAKF,SAAS,EAAE;IACnCV,QAAQ,CAACa,WAAW,GAAGf,SAAS,CAACc,OAAO;EAC1C;EACA,IAAId,SAAS,CAACgB,YAAY,KAAKJ,SAAS,EAAE;IACxCV,QAAQ,CAACe,gBAAgB,GAAGjB,SAAS,CAACgB,YAAY,CAACE,QAAQ,CAAC,EAAE,CAAC;EACjE;EACA,OAAOhB,QAAQ;AACjB"}