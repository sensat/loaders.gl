{"version":3,"file":"file-reader.js","names":["atob","FileReaderPolyfill","constructor","_defineProperty","onload","abort","readAsArrayBuffer","blob","arrayBuffer","target","result","readAsBinaryString","Error","readAsDataURL","text","dataUrl","concat","readAsText"],"sources":["../../../../src/node/file/file-reader.ts"],"sourcesContent":["import {atob} from '../buffer/btoa.node';\n\nexport class FileReaderPolyfill implements FileReader {\n  // onload: ({result: any}) => void;\n  onload;\n  onabort;\n  onerror;\n  error;\n  onloadstart;\n  onloadend;\n  onprogress;\n\n  readyState;\n  result;\n  DONE;\n  EMPTY;\n  LOADING;\n  addEventListener;\n  removeEventListener;\n  dispatchEvent;\n\n  constructor() {\n    this.onload = null;\n  }\n\n  abort(): void {\n    return;\n  }\n\n  async readAsArrayBuffer(blob: Blob): Promise<void> {\n    const arrayBuffer = await blob.arrayBuffer();\n    if (this.onload) {\n      this.onload({target: {result: arrayBuffer}});\n    }\n  }\n\n  async readAsBinaryString(blob) {\n    throw Error('Not implemented');\n  }\n\n  async readAsDataURL(blob) {\n    const text = await blob.text();\n    const dataUrl = `data://;base64,${atob(text)}`;\n    if (this.onload) {\n      this.onload({target: {result: dataUrl}});\n    }\n  }\n\n  async readAsText(blob) {\n    const text = await blob.text();\n    if (this.onload) {\n      this.onload({target: {result: text}});\n    }\n  }\n}\n"],"mappings":";AAAA,SAAQA,IAAI,QAAO,qBAAqB;AAExC,OAAO,MAAMC,kBAAkB,CAAuB;EAmBpDC,WAAWA,CAAA,EAAG;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACZ,IAAI,CAACC,MAAM,GAAG,IAAI;EACpB;EAEAC,KAAKA,CAAA,EAAS;IACZ;EACF;EAEA,MAAMC,iBAAiBA,CAACC,IAAU,EAAiB;IACjD,MAAMC,WAAW,GAAG,MAAMD,IAAI,CAACC,WAAW,CAAC,CAAC;IAC5C,IAAI,IAAI,CAACJ,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC;QAACK,MAAM,EAAE;UAACC,MAAM,EAAEF;QAAW;MAAC,CAAC,CAAC;IAC9C;EACF;EAEA,MAAMG,kBAAkBA,CAACJ,IAAI,EAAE;IAC7B,MAAMK,KAAK,CAAC,iBAAiB,CAAC;EAChC;EAEA,MAAMC,aAAaA,CAACN,IAAI,EAAE;IACxB,MAAMO,IAAI,GAAG,MAAMP,IAAI,CAACO,IAAI,CAAC,CAAC;IAC9B,MAAMC,OAAO,qBAAAC,MAAA,CAAqBhB,IAAI,CAACc,IAAI,CAAC,CAAE;IAC9C,IAAI,IAAI,CAACV,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC;QAACK,MAAM,EAAE;UAACC,MAAM,EAAEK;QAAO;MAAC,CAAC,CAAC;IAC1C;EACF;EAEA,MAAME,UAAUA,CAACV,IAAI,EAAE;IACrB,MAAMO,IAAI,GAAG,MAAMP,IAAI,CAACO,IAAI,CAAC,CAAC;IAC9B,IAAI,IAAI,CAACV,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC;QAACK,MAAM,EAAE;UAACC,MAAM,EAAEI;QAAI;MAAC,CAAC,CAAC;IACvC;EACF;AACF"}