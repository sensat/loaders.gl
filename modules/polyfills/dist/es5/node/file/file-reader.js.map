{"version":3,"file":"file-reader.js","names":["_btoa","require","FileReaderPolyfill","_classCallCheck2","default","_defineProperty2","onload","_createClass2","key","value","abort","_readAsArrayBuffer","_asyncToGenerator2","_regenerator","mark","_callee","blob","arrayBuffer","wrap","_callee$","_context","prev","next","sent","target","result","stop","readAsArrayBuffer","_x","apply","arguments","_readAsBinaryString","_callee2","_callee2$","_context2","Error","readAsBinaryString","_x2","_readAsDataURL","_callee3","text","dataUrl","_callee3$","_context3","concat","atob","readAsDataURL","_x3","_readAsText","_callee4","_callee4$","_context4","readAsText","_x4","exports"],"sources":["../../../../src/node/file/file-reader.ts"],"sourcesContent":["import {atob} from '../buffer/btoa.node';\n\nexport class FileReaderPolyfill implements FileReader {\n  // onload: ({result: any}) => void;\n  onload;\n  onabort;\n  onerror;\n  error;\n  onloadstart;\n  onloadend;\n  onprogress;\n\n  readyState;\n  result;\n  DONE;\n  EMPTY;\n  LOADING;\n  addEventListener;\n  removeEventListener;\n  dispatchEvent;\n\n  constructor() {\n    this.onload = null;\n  }\n\n  abort(): void {\n    return;\n  }\n\n  async readAsArrayBuffer(blob: Blob): Promise<void> {\n    const arrayBuffer = await blob.arrayBuffer();\n    if (this.onload) {\n      this.onload({target: {result: arrayBuffer}});\n    }\n  }\n\n  async readAsBinaryString(blob) {\n    throw Error('Not implemented');\n  }\n\n  async readAsDataURL(blob) {\n    const text = await blob.text();\n    const dataUrl = `data://;base64,${atob(text)}`;\n    if (this.onload) {\n      this.onload({target: {result: dataUrl}});\n    }\n  }\n\n  async readAsText(blob) {\n    const text = await blob.text();\n    if (this.onload) {\n      this.onload({target: {result: text}});\n    }\n  }\n}\n"],"mappings":"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"}