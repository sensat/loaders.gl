{"version":3,"file":"octree.js","names":["PointCloudOctree","_createClass2","default","_classCallCheck2","url","octreeDir","spacing","boundingBox","root","nodes","pointAttributes","hierarchyStepSize","loader","exports","PointCloudOctant","name","octree","id","PointCloudOctreeGeometryNode","IDCount","index","parseInt","charAt","length","geometry","boundingSphere","getBoundingSphere","THREE","Sphere","children","numPoints","level","loaded","oneTimeDisposeHandlers","key","value","isGeometryNode","getLevel","isTreeNode","isLoaded","getBoundingBox","getChildren","filter","Boolean","getURL","version","hierarchyPath","concat","getHierarchyPath","path","indices","substr","numParts","Math","floor","i","slice","addChild","child","parent","load","loading","Potree","numNodesLoading","maxNodesLoading","equalOrHigher","hasChildren","loadHierachyThenPoints","loadPoints","node","callback","hbuffer","view","DataView","stack","getUint8","getUint32","push","decoded","offset","snode","shift","mask","childName","childChildren","childNumPoints","byteLength","pco","pcoGeometry","decodedNumPoints","parentName","substring","parentNode","Utils","createChildAABB","currentNode","pow","hurl","xhr","XHRFactory","createXMLHttpRequest","open","responseType","overrideMimeType","onreadystatechange","readyState","status","response","console","log","send","e","getNumPoints","dispose","handler"],"sources":["../../../src/lib/octree.ts"],"sourcesContent":["/* eslint-disable */\n\n// @ts-nocheck\n\nexport class PointCloudOctree {\n  constructor() {\n    this.url = null;\n    this.octreeDir = null;\n    this.spacing = 0;\n    this.boundingBox = null;\n    this.root = null;\n    this.nodes = null;\n    this.pointAttributes = null;\n    this.hierarchyStepSize = -1;\n    this.loader = null;\n  }\n}\n\nexport class PointCloudOctant {\n  constructor(name, octree, boundingBox) {\n    this.octree = this.id = PointCloudOctreeGeometryNode.IDCount++;\n    this.name = name;\n    this.index = parseInt(name.charAt(name.length - 1));\n    this.octree = octree;\n    this.geometry = null;\n    this.boundingBox = boundingBox;\n    this.boundingSphere = boundingBox.getBoundingSphere(new THREE.Sphere());\n    this.children = {};\n    this.numPoints = 0;\n    this.level = null;\n    this.loaded = false;\n    this.oneTimeDisposeHandlers = [];\n  }\n\n  isGeometryNode() {\n    return true;\n  }\n\n  getLevel() {\n    return this.level;\n  }\n\n  isTreeNode() {\n    return false;\n  }\n\n  isLoaded() {\n    return this.loaded;\n  }\n\n  getBoundingSphere() {\n    return this.boundingSphere;\n  }\n\n  getBoundingBox() {\n    return this.boundingBox;\n  }\n\n  getChildren() {\n    // Children is a length 8 array with nulls for \"missing\" octants\n    return this.children.filter(Boolean);\n  }\n\n  getURL() {\n    const {version} = this.octree;\n    const hierarchyPath = version >= 1.5 ? `${this.getHierarchyPath()}/` : '';\n    return `${this.octree.octreeDir}/${hierarchyPath}${this.name}`;\n  }\n\n  getHierarchyPath() {\n    let path = 'r/';\n\n    let hierarchyStepSize = this.octree.hierarchyStepSize;\n    let indices = this.name.substr(1);\n\n    let numParts = Math.floor(indices.length / hierarchyStepSize);\n    for (let i = 0; i < numParts; i++) {\n      path += indices.substr(i * hierarchyStepSize, hierarchyStepSize) + '/';\n    }\n\n    path = path.slice(0, -1);\n\n    return path;\n  }\n\n  addChild(child) {\n    this.children[child.index] = child;\n    child.parent = this;\n  }\n\n  load() {\n    if (\n      this.loading === true ||\n      this.loaded === true ||\n      Potree.numNodesLoading >= Potree.maxNodesLoading\n    ) {\n      return;\n    }\n\n    this.loading = true;\n\n    Potree.numNodesLoading++;\n\n    if (this.octree.loader.version.equalOrHigher('1.5')) {\n      if (this.level % this.octree.hierarchyStepSize === 0 && this.hasChildren) {\n        this.loadHierachyThenPoints();\n      } else {\n        this.loadPoints();\n      }\n    } else {\n      this.loadPoints();\n    }\n  }\n\n  loadPoints() {\n    this.octree.loader.load(this);\n  }\n\n  loadHierachyThenPoints() {\n    let node = this;\n\n    // load hierarchy\n    let callback = function (node, hbuffer) {\n      let view = new DataView(hbuffer);\n\n      let stack = [];\n      let children = view.getUint8(0);\n      let numPoints = view.getUint32(1, true);\n      node.numPoints = numPoints;\n      stack.push({children: children, numPoints: numPoints, name: node.name});\n\n      let decoded = [];\n\n      let offset = 5;\n      while (stack.length > 0) {\n        let snode = stack.shift();\n        let mask = 1;\n        for (let i = 0; i < 8; i++) {\n          if ((snode.children & mask) !== 0) {\n            let childName = snode.name + i;\n\n            let childChildren = view.getUint8(offset);\n            let childNumPoints = view.getUint32(offset + 1, true);\n\n            stack.push({children: childChildren, numPoints: childNumPoints, name: childName});\n\n            decoded.push({children: childChildren, numPoints: childNumPoints, name: childName});\n\n            offset += 5;\n          }\n\n          mask = mask * 2;\n        }\n\n        if (offset === hbuffer.byteLength) {\n          break;\n        }\n      }\n\n      // console.log(decoded);\n\n      let nodes = {};\n      nodes[node.name] = node;\n      let pco = node.pcoGeometry;\n\n      for (let i = 0; i < decoded.length; i++) {\n        let name = decoded[i].name;\n        let decodedNumPoints = decoded[i].numPoints;\n        let index = parseInt(name.charAt(name.length - 1));\n        let parentName = name.substring(0, name.length - 1);\n        let parentNode = nodes[parentName];\n        let level = name.length - 1;\n        let boundingBox = Utils.createChildAABB(parentNode.boundingBox, index);\n\n        let currentNode = new PointCloudOctreeGeometryNode(name, pco, boundingBox);\n        currentNode.level = level;\n        currentNode.numPoints = decodedNumPoints;\n        currentNode.hasChildren = decoded[i].children > 0;\n        currentNode.spacing = pco.spacing / Math.pow(2, level);\n        parentNode.addChild(currentNode);\n        nodes[name] = currentNode;\n      }\n\n      node.loadPoints();\n    };\n    if (node.level % node.pcoGeometry.hierarchyStepSize === 0) {\n      // let hurl = node.pcoGeometry.octreeDir + \"/../hierarchy/\" + node.name + \".hrc\";\n      let hurl =\n        node.pcoGeometry.octreeDir + '/' + node.getHierarchyPath() + '/' + node.name + '.hrc';\n\n      let xhr = XHRFactory.createXMLHttpRequest();\n      xhr.open('GET', hurl, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.overrideMimeType('text/plain; charset=x-user-defined');\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState === 4) {\n          if (xhr.status === 200 || xhr.status === 0) {\n            let hbuffer = xhr.response;\n            callback(node, hbuffer);\n          } else {\n            console.log('Failed to load file! HTTP status: ' + xhr.status + ', file: ' + hurl);\n            Potree.numNodesLoading--;\n          }\n        }\n      };\n      try {\n        xhr.send(null);\n      } catch (e) {\n        console.log('fehler beim laden der punktwolke: ' + e);\n      }\n    }\n  }\n\n  getNumPoints() {\n    return this.numPoints;\n  }\n\n  dispose() {\n    if (this.geometry && this.parent != null) {\n      this.geometry.dispose();\n      this.geometry = null;\n      this.loaded = false;\n\n      // this.dispatchEvent( { type: 'dispose' } );\n      for (let i = 0; i < this.oneTimeDisposeHandlers.length; i++) {\n        let handler = this.oneTimeDisposeHandlers[i];\n        handler();\n      }\n      this.oneTimeDisposeHandlers = [];\n    }\n  }\n}\n\nPointCloudOctreeGeometryNode.IDCount = 0;\n"],"mappings":"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"}