{"version":3,"file":"bson-loader.js","names":["parseBSONSync","VERSION","DEFAULT_BSON_LOADER_OPTIONS","bson","BSONLoader","name","id","module","version","extensions","mimeTypes","category","binary","parse","parseSync","options","arrayBuffer","bsonOptions"],"sources":["../../src/bson-loader.ts"],"sourcesContent":["// loaders.gl, MIT license\nimport type {LoaderWithParser, LoaderOptions} from '@loaders.gl/loader-utils';\nimport type {ParseBSONOptions} from './lib/parsers/parse-bson';\nimport {parseBSONSync} from './lib/parsers/parse-bson';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n\n/**\n * @param table -\n * @param bsonpaths -\n */\nexport type BSONLoaderOptions = LoaderOptions & {\n  bson?: ParseBSONOptions;\n};\n\nconst DEFAULT_BSON_LOADER_OPTIONS = {\n  bson: {}\n};\n\nexport const BSONLoader: LoaderWithParser<Record<string, unknown>, never, BSONLoaderOptions> = {\n  name: 'BSON',\n  id: 'bson',\n  module: 'bson',\n  version: VERSION,\n  extensions: ['bson'],\n  mimeTypes: ['application/bson'],\n  category: 'json',\n  binary: true,\n  parse,\n  parseSync,\n  options: DEFAULT_BSON_LOADER_OPTIONS\n};\n\nasync function parse(arrayBuffer: ArrayBuffer, options?: BSONLoaderOptions) {\n  const bsonOptions = {...DEFAULT_BSON_LOADER_OPTIONS.bson, ...options?.bson};\n  return parseBSONSync(arrayBuffer, bsonOptions);\n}\n\nfunction parseSync(arrayBuffer: ArrayBuffer, options?: BSONLoaderOptions) {\n  const bsonOptions = {...DEFAULT_BSON_LOADER_OPTIONS.bson, ...options?.bson};\n  return parseBSONSync(arrayBuffer, bsonOptions);\n}\n"],"mappings":"AAGA,SAAQA,aAAa,QAAO,0BAA0B;AAItD,MAAMC,OAAO,GAAG,sBAAkB,KAAK,WAAW,qBAAiB,QAAQ;AAU3E,MAAMC,2BAA2B,GAAG;EAClCC,IAAI,EAAE,CAAC;AACT,CAAC;AAED,OAAO,MAAMC,UAA+E,GAAG;EAC7FC,IAAI,EAAE,MAAM;EACZC,EAAE,EAAE,MAAM;EACVC,MAAM,EAAE,MAAM;EACdC,OAAO,EAAEP,OAAO;EAChBQ,UAAU,EAAE,CAAC,MAAM,CAAC;EACpBC,SAAS,EAAE,CAAC,kBAAkB,CAAC;EAC/BC,QAAQ,EAAE,MAAM;EAChBC,MAAM,EAAE,IAAI;EACZC,KAAK;EACLC,SAAS;EACTC,OAAO,EAAEb;AACX,CAAC;AAED,eAAeW,KAAKA,CAACG,WAAwB,EAAED,OAA2B,EAAE;EAC1E,MAAME,WAAW,GAAG;IAAC,GAAGf,2BAA2B,CAACC,IAAI;IAAE,IAAGY,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,IAAI;EAAA,CAAC;EAC3E,OAAOH,aAAa,CAACgB,WAAW,EAAEC,WAAW,CAAC;AAChD;AAEA,SAASH,SAASA,CAACE,WAAwB,EAAED,OAA2B,EAAE;EACxE,MAAME,WAAW,GAAG;IAAC,GAAGf,2BAA2B,CAACC,IAAI;IAAE,IAAGY,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,IAAI;EAAA,CAAC;EAC3E,OAAOH,aAAa,CAACgB,WAAW,EAAEC,WAAW,CAAC;AAChD"}