{"version":3,"file":"bson-loader.js","names":["_parseBson","require","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","VERSION","DEFAULT_BSON_LOADER_OPTIONS","bson","BSONLoader","name","id","module","version","extensions","mimeTypes","category","binary","parse","parseSync","options","exports","_x","_x2","_parse","_asyncToGenerator2","_regenerator","mark","_callee","arrayBuffer","bsonOptions","wrap","_callee$","_context","prev","next","abrupt","parseBSONSync","stop"],"sources":["../../src/bson-loader.ts"],"sourcesContent":["// loaders.gl, MIT license\nimport type {LoaderWithParser, LoaderOptions} from '@loaders.gl/loader-utils';\nimport type {ParseBSONOptions} from './lib/parsers/parse-bson';\nimport {parseBSONSync} from './lib/parsers/parse-bson';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n\n/**\n * @param table -\n * @param bsonpaths -\n */\nexport type BSONLoaderOptions = LoaderOptions & {\n  bson?: ParseBSONOptions;\n};\n\nconst DEFAULT_BSON_LOADER_OPTIONS = {\n  bson: {}\n};\n\nexport const BSONLoader: LoaderWithParser<Record<string, unknown>, never, BSONLoaderOptions> = {\n  name: 'BSON',\n  id: 'bson',\n  module: 'bson',\n  version: VERSION,\n  extensions: ['bson'],\n  mimeTypes: ['application/bson'],\n  category: 'json',\n  binary: true,\n  parse,\n  parseSync,\n  options: DEFAULT_BSON_LOADER_OPTIONS\n};\n\nasync function parse(arrayBuffer: ArrayBuffer, options?: BSONLoaderOptions) {\n  const bsonOptions = {...DEFAULT_BSON_LOADER_OPTIONS.bson, ...options?.bson};\n  return parseBSONSync(arrayBuffer, bsonOptions);\n}\n\nfunction parseSync(arrayBuffer: ArrayBuffer, options?: BSONLoaderOptions) {\n  const bsonOptions = {...DEFAULT_BSON_LOADER_OPTIONS.bson, ...options?.bson};\n  return parseBSONSync(arrayBuffer, bsonOptions);\n}\n"],"mappings":";;;;;;;;;;AAGA,IAAAA,UAAA,GAAAC,OAAA;AAAuD,SAAAC,QAAAC,MAAA,EAAAC,cAAA,QAAAC,IAAA,GAAAC,MAAA,CAAAD,IAAA,CAAAF,MAAA,OAAAG,MAAA,CAAAC,qBAAA,QAAAC,OAAA,GAAAF,MAAA,CAAAC,qBAAA,CAAAJ,MAAA,GAAAC,cAAA,KAAAI,OAAA,GAAAA,OAAA,CAAAC,MAAA,WAAAC,GAAA,WAAAJ,MAAA,CAAAK,wBAAA,CAAAR,MAAA,EAAAO,GAAA,EAAAE,UAAA,OAAAP,IAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,IAAA,EAAAG,OAAA,YAAAH,IAAA;AAAA,SAAAU,cAAAC,MAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAF,CAAA,UAAAG,MAAA,WAAAF,SAAA,CAAAD,CAAA,IAAAC,SAAA,CAAAD,CAAA,QAAAA,CAAA,OAAAf,OAAA,CAAAI,MAAA,CAAAc,MAAA,OAAAC,OAAA,WAAAC,GAAA,QAAAC,gBAAA,CAAAC,OAAA,EAAAR,MAAA,EAAAM,GAAA,EAAAF,MAAA,CAAAE,GAAA,SAAAhB,MAAA,CAAAmB,yBAAA,GAAAnB,MAAA,CAAAoB,gBAAA,CAAAV,MAAA,EAAAV,MAAA,CAAAmB,yBAAA,CAAAL,MAAA,KAAAlB,OAAA,CAAAI,MAAA,CAAAc,MAAA,GAAAC,OAAA,WAAAC,GAAA,IAAAhB,MAAA,CAAAqB,cAAA,CAAAX,MAAA,EAAAM,GAAA,EAAAhB,MAAA,CAAAK,wBAAA,CAAAS,MAAA,EAAAE,GAAA,iBAAAN,MAAA;AAIvD,IAAMY,OAAO,GAAG,sBAAkB,KAAK,WAAW,qBAAiB,QAAQ;AAU3E,IAAMC,2BAA2B,GAAG;EAClCC,IAAI,EAAE,CAAC;AACT,CAAC;AAEM,IAAMC,UAA+E,GAAG;EAC7FC,IAAI,EAAE,MAAM;EACZC,EAAE,EAAE,MAAM;EACVC,MAAM,EAAE,MAAM;EACdC,OAAO,EAAEP,OAAO;EAChBQ,UAAU,EAAE,CAAC,MAAM,CAAC;EACpBC,SAAS,EAAE,CAAC,kBAAkB,CAAC;EAC/BC,QAAQ,EAAE,MAAM;EAChBC,MAAM,EAAE,IAAI;EACZC,KAAK,EAALA,KAAK;EACLC,SAAS,EAATA,SAAS;EACTC,OAAO,EAAEb;AACX,CAAC;AAACc,OAAA,CAAAZ,UAAA,GAAAA,UAAA;AAAA,SAEaS,KAAKA,CAAAI,EAAA,EAAAC,GAAA;EAAA,OAAAC,MAAA,CAAAhC,KAAA,OAAAI,SAAA;AAAA;AAAA,SAAA4B,OAAA;EAAAA,MAAA,OAAAC,kBAAA,CAAAvB,OAAA,EAAAwB,YAAA,CAAAxB,OAAA,CAAAyB,IAAA,CAApB,SAAAC,QAAqBC,WAAwB,EAAET,OAA2B;IAAA,IAAAU,WAAA;IAAA,OAAAJ,YAAA,CAAAxB,OAAA,CAAA6B,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAClEL,WAAW,GAAArC,aAAA,CAAAA,aAAA,KAAOc,2BAA2B,CAACC,IAAI,GAAKY,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,IAAI;UAAA,OAAAyB,QAAA,CAAAG,MAAA,WACnE,IAAAC,wBAAa,EAACR,WAAW,EAAEC,WAAW,CAAC;QAAA;QAAA;UAAA,OAAAG,QAAA,CAAAK,IAAA;MAAA;IAAA,GAAAV,OAAA;EAAA,CAC/C;EAAA,OAAAJ,MAAA,CAAAhC,KAAA,OAAAI,SAAA;AAAA;AAED,SAASuB,SAASA,CAACU,WAAwB,EAAET,OAA2B,EAAE;EACxE,IAAMU,WAAW,GAAArC,aAAA,CAAAA,aAAA,KAAOc,2BAA2B,CAACC,IAAI,GAAKY,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,IAAI,CAAC;EAC3E,OAAO,IAAA6B,wBAAa,EAACR,WAAW,EAAEC,WAAW,CAAC;AAChD"}